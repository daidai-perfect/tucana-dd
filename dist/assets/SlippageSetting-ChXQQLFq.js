import{r as h,j as e}from"./react-CxzTU07i.js";import{p as N,h as R,E as z,d as f,a1 as A,an as E,m as B,o as H,I as k,ao as O}from"./App-Cb960mne.js";import"./bn.js-CjHYPH1W.js";import{u as $}from"./useApiUrl-BWcjgV84.js";import{$ as V,a1 as W,F as i,T as o,B as y,p as M,l as _,z as D,A as F,D as G,E as P,G as U,J as L,f as w,a as Y,n as J,Q,O as X}from"./@chakra-ui-F3U2dpjw.js";function te(b){const{amount:x,balance:r,title:c,noMax:p,noArrow:g,currentCoin:n,textIsAvailable:s,onTokenChange:l,onAmountChange:u,isLoading:m}=b,{getCointAmountValue:S}=N(),j=h.useMemo(()=>S(x,n==null?void 0:n.metadata),[x]),{isImportToken:C}=$(),d=R(),t=a=>{l&&l(a)},I=a=>{const v=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(n==null?void 0:n.decimals)&&(n==null?void 0:n.decimals)}})?).*$`),T=a.target.value.replace(v,"$1");u(T||"")};return e.jsx(V,{width:"100%",p:"12px 16px",backgroundColor:"input_bg",border:"1px solid",borderColor:"border",children:e.jsx(W,{children:e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",gap:"4px",direction:"column",children:[e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o,{fontSize:"xs",children:c||""}),e.jsxs(i,{align:"center",children:[e.jsxs(o,{fontSize:"xs",children:[s?"Available":"Balance",": ",z(r)]}),p?null:e.jsx(y,{variant:"outline",w:"38px",h:"20px",lineHeight:"20px",borderRadius:"4px",fontSize:"xs",ml:"8px",onClick:()=>{console.log("Click Max balance: ",r),console.log("Click Max currentCoin: ",n),console.log("Click Max currentConfig: ",d);const a=(n==null?void 0:n.metadata)===(d==null?void 0:d.nativeToken)&&!s?f(r).minus(.5).toString():r;u(a&&f(a).gt(0)?a:"0")},children:"MAX"})]})]}),e.jsxs(i,{align:"center",width:"100%",position:"relative",children:[e.jsx(M,{placeholder:"0.0",value:x,onChange:I,w:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",opacity:m?0:1}),m&&e.jsx(i,{w:"100%",justifyContent:"flex-start",position:"absolute",children:e.jsx(_,{w:"120px",h:"21px"})}),e.jsx(i,{gap:"8px",alignItems:"center",children:g?e.jsx(E,{showPopoverUI:!1,symbol:n==null?void 0:n.symbol,icon:n==null?void 0:n.image,haveArrow:!g,showTag:C(n==null?void 0:n.metadata),showTagWidth:"16px",showTagHeight:"16px"}):e.jsx(A,{showPopoverUI:!1,h:"32px",current:n,onChange:t,noArrow:g,showTagWidth:"16px",showTagHeight:"16px"})})]}),e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[m?e.jsx(_,{w:"80px",h:"21px"}):e.jsx(o,{fontSize:"xs",children:j&&`$${j}`}),e.jsx(B,{fontSize:"xs",textMaxNum:24,children:n==null?void 0:n.name})]})]})})})}function se(b){const{isOpen:x,onClose:r,showRouter:c=!1}=b,{slippage:p,setSlippage:g}=H(),n=["0.1","0.5","1"],[s,l]=h.useState(""),[u,m]=h.useState(!0);h.useEffect(()=>{console.log("showRouter: ",c)},[c]),h.useEffect(()=>{const t=Number(localStorage.getItem("tucana-slippage"))*100||f(p).mul(100).toString();l(String(t))},[x]);const S=t=>{const a=t.target.value.replace(/[^\d^.]+/g,""),v=a&&a[a.length-1]!="."&&a.length>3&&(a!=null&&a.includes("."))?O(a,2):a;l(v)},j=t=>{l(t)};h.useEffect(()=>{p&&l(String(p))},[p]);const C=t=>{m(t)},d=()=>{if(s){const t=f(s).div(100).toNumber();g(t),localStorage.setItem("tucana-slippage",String(t))}r()};return e.jsxs(D,{isOpen:x,onClose:r,isCentered:!0,children:[e.jsx(F,{}),e.jsxs(G,{children:[e.jsx(P,{fontWeight:"400 !important",children:"Settings"}),e.jsx(U,{}),e.jsxs(L,{pb:"16px",children:[e.jsxs(w,{children:[e.jsx(o,{children:"Slippage Tolerance"}),e.jsxs(i,{align:"center",w:"100%",justifyContent:"space-between",mt:"8px",children:[e.jsx(i,{justifyContent:"center",alignItems:"center",p:"4px",sx:{"@media screen and (max-width: 810px)":{w:"70%"}},children:n.map(t=>e.jsx(Y,{cursor:"pointer",w:"80px",h:"40px",bg:t===String(s)?"primary":"bg_secondary",mr:"8px",borderRadius:"8px",onClick:()=>j(t),sx:{"@media screen and (max-width: 810px)":{w:"33%"}},children:e.jsxs(o,{color:t===String(s)?"highlight_content_text":"text_paragraph",children:[t,"%"]})},t))}),e.jsxs(J,{alignItems:"center",justifyContent:"center",sx:{"@media screen and (max-width: 810px)":{w:"30%"}},children:[e.jsx(M,{borderRadius:"8px",w:"132px",h:"40px",mr:"2px",variant:"outline",value:s,onChange:S,textAlign:"right",fontSize:"sm",pr:"52px",pl:"32px",placeholder:"0.5",sx:{"@media screen and (max-width: 810px)":{w:"100%",pr:"28px",pl:"12px"}}}),e.jsx(Q,{width:"20px",height:"20px",right:"34px",top:"0px",sx:{"@media screen and (max-width: 810px)":{right:"12px"}},children:e.jsx(o,{fontSize:"sm",color:"text_caption",children:"%"})})]})]}),s&&(Number(s)>1||Number(s)<.05)?e.jsxs(w,{w:"100%",h:"20px",borderRadius:"20px",mt:"8px",children:[Number(s)<.05?e.jsxs(i,{align:"center",children:[e.jsx(k,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"warning"}),e.jsx(o,{fontSize:"xs",color:"warning",ml:"4px",children:"Slippage is low. Your transaction may fail."})]}):null,Number(s)<=50&&Number(s)>1?e.jsxs(i,{align:"center",children:[e.jsx(k,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"warning"}),e.jsx(o,{fontSize:"xs",color:"warning",ml:"4px",children:"Your transaction may be frontrun."})]}):null,Number(s)>50?e.jsxs(i,{align:"center",children:[e.jsx(k,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"error"}),e.jsx(o,{fontSize:"xs",color:"error",ml:"4px",children:"Enter a valid slippage percentage"})]}):null]}):null]}),c&&e.jsxs(w,{children:[e.jsx(w,{w:"100%",h:"1px",bg:"bg_secondary",m:"20px 0"}),e.jsx(o,{children:"Router"}),e.jsxs(i,{align:"center",justifyContent:"space-between",mt:"8px",children:[e.jsx(o,{color:"text_caption",children:"Support order split"}),e.jsx(X,{ml:"4px",isChecked:u,onChange:t=>C(t.target.checked)})]})]}),e.jsxs(i,{align:"center",justifyContent:"space-between",mt:"20px",children:[e.jsx(y,{w:"48%",h:"48px",variant:"outline",onClick:r,children:"Cancel"}),e.jsx(y,{w:"48%",h:"48px",onClick:d,isDisabled:Number(s)>50||Number(s)<.05,children:"Confirm"})]})]})]})]})}export{se as S,te as T};
