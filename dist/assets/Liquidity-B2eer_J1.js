import{j as o,y as ao,v as Je,l as Fn,aA as oo,r as _,aB as zr,t as V,aC as Lr,o as me,V as J,F as ut,q as tt,R as Qe,N as xe,T as B,ak as he,H as Q,B as Gs,aD as We,aE as ks,I as zt,f as ke,aF as Bn,D as Xs,J as ie,K as Pe,aG as ji,a8 as Hn,S as Ye,aH as Sn,w as Ge,aI as Se,aJ as lt,aK as nn,an as co,ao as lo,ap as uo,aq as ho,M as fo,a as po,b as xo,c as go,d as mo,e as yo,aL as _o,aw as vo,p as As,O as Ks,aM as re,i as jn,G as Nt,aN as qn,aO as Vn,aP as wo,aQ as ko,a0 as Un,al as Dr,U as bo,W as To,Y as Ci,Z as ns,_ as So,s as jo,aR as Co,aj as Cn,aS as Ro,aT as Eo,aU as Mo,aV as No,aW as Ri,aX as ss,aY as zo,a9 as Lo,aa as Do,ab as $o,ac as Ei,ad as sn,af as Oo,ag as rn,aZ as Fo,a_ as Bo,a$ as oe,b0 as Ho,b1 as Mi,b2 as qo,n as $r,b3 as Vo,b4 as bs,b5 as Ft,b6 as Rn,b7 as Uo,a2 as Or,b8 as Wo,b9 as Po,ba as Yo,bb as Go,Q as Xo,L as Ao,bc as Ko,bd as Zo}from"./index-CZ9BtG6K.js";import{R as Zs,u as Jo,P as Qo,a as Io}from"./RectangularTab-CB6psDTh.js";import{R as Fr,Y as Br,X as Hr,A as tc,a as ec}from"./AreaChart-5RHNlqJv.js";import{B as nc}from"./BarChart-BxyrneS2.js";import{e as Ni,i as ue,T as qr,B as sc,R as ic,c as zi,a as Li,b as rc,d as ac,_ as oc,f as cc,g as lc,h as Vr,s as uc,l as Ts,m as Ur,j as dc,k as hc,t as fc,n as pc}from"./generateCategoricalChart-DQq0vuN5.js";import{u as Wr}from"./useRate-Dv8umWLB.js";import{g as Js,a as xc}from"./apiDataProcessing-BAM4zGSR.js";import{a as Di,u as Ss,T as $i,S as gc}from"./useDebounce-BVAm3t-5.js";import{a as De,b as mc,T as Oi,u as yc}from"./useSearchPools-C7DWPqjl.js";import{u as _c,P as vc}from"./useSelectRange-DQhWJSWn.js";import{u as wc,a as kc,b as bc,P as Tc,c as Sc,d as jc,e as Cc}from"./PositionIncreaseModal-BcmT38T7.js";import{u as Fi}from"./useGetBalance-DBgDBORY.js";import{T as Bi}from"./TableCardH5-n0g93OwG.js";import{L as Hi}from"./LockMask-BmIYgER1.js";import{A as Rc}from"./AprTooltip-xeBNZxDD.js";import{R as Wn}from"./RefreshIcon-DU_SDOKY.js";function Pr(){return o.jsx(ao,{h:"120px",children:o.jsx(Je,{size:"lg"})})}function qi(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Qs(t,e){this._context=t,this._k=(1-e)/6}Qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:qi(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:qi(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(s){return new Qs(s,e)}return n.tension=function(s){return t(+s)},n})(0);function Ec(t,e,n){var s=t._x1,i=t._y1,a=t._x2,r=t._y2;if(t._l01_a>Ni){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);s=(s*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Ni){var d=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*d+t._x1*t._l23_2a-e*t._l12_2a)/h,r=(r*d+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(s,i,a,r,t._x2,t._y2)}function Yr(t,e){this._context=t,this._alpha=e}Yr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,s=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ec(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Gr=function t(e){function n(s){return e?new Yr(s,e):new Qs(s,0)}return n.alpha=function(s){return t(+s)},n}(.5);function Mc(t,e){let n,s;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=s=i):(n>i&&(n=i),s<i&&(s=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=s=a):(n>a&&(n=a),s<a&&(s=a)))}return[n,s]}var Vi=180/Math.PI,js={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xr(t,e,n,s,i,a){var r,u,c;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(c=t*n+e*s)&&(n-=t*c,s-=e*c),(u=Math.sqrt(n*n+s*s))&&(n/=u,s/=u,c/=u),t*s<e*n&&(t=-t,e=-e,c=-c,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Vi,skewX:Math.atan(c)*Vi,scaleX:r,scaleY:u}}var an;function Nc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?js:Xr(e.a,e.b,e.c,e.d,e.e,e.f)}function zc(t){return t==null||(an||(an=document.createElementNS("http://www.w3.org/2000/svg","g")),an.setAttribute("transform",t),!(t=an.transform.baseVal.consolidate()))?js:(t=t.matrix,Xr(t.a,t.b,t.c,t.d,t.e,t.f))}function Ar(t,e,n,s){function i(d){return d.length?d.pop()+" ":""}function a(d,h,l,p,f,w){if(d!==l||h!==p){var b=f.push("translate(",null,e,null,n);w.push({i:b-4,x:ue(d,l)},{i:b-2,x:ue(h,p)})}else(l||p)&&f.push("translate("+l+e+p+n)}function r(d,h,l,p){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),p.push({i:l.push(i(l)+"rotate(",null,s)-2,x:ue(d,h)})):h&&l.push(i(l)+"rotate("+h+s)}function u(d,h,l,p){d!==h?p.push({i:l.push(i(l)+"skewX(",null,s)-2,x:ue(d,h)}):h&&l.push(i(l)+"skewX("+h+s)}function c(d,h,l,p,f,w){if(d!==l||h!==p){var b=f.push(i(f)+"scale(",null,",",null,")");w.push({i:b-4,x:ue(d,l)},{i:b-2,x:ue(h,p)})}else(l!==1||p!==1)&&f.push(i(f)+"scale("+l+","+p+")")}return function(d,h){var l=[],p=[];return d=t(d),h=t(h),a(d.translateX,d.translateY,h.translateX,h.translateY,l,p),r(d.rotate,h.rotate,l,p),u(d.skewX,h.skewX,l,p),c(d.scaleX,d.scaleY,h.scaleX,h.scaleY,l,p),d=h=null,function(f){for(var w=-1,b=p.length,x;++w<b;)l[(x=p[w]).i]=x.x(f);return l.join("")}}}var Lc=Ar(Nc,"px, ","px)","deg)"),Dc=Ar(zc,", ",")",")"),$c=1e-12;function Ui(t){return((t=Math.exp(t))+1/t)/2}function Oc(t){return((t=Math.exp(t))-1/t)/2}function Fc(t){return((t=Math.exp(2*t))-1)/(t+1)}const Bc=function t(e,n,s){function i(a,r){var u=a[0],c=a[1],d=a[2],h=r[0],l=r[1],p=r[2],f=h-u,w=l-c,b=f*f+w*w,x,m;if(b<$c)m=Math.log(p/d)/e,x=function(N){return[u+N*f,c+N*w,d*Math.exp(e*N*m)]};else{var S=Math.sqrt(b),T=(p*p-d*d+s*b)/(2*d*n*S),j=(p*p-d*d-s*b)/(2*p*n*S),E=Math.log(Math.sqrt(T*T+1)-T),M=Math.log(Math.sqrt(j*j+1)-j);m=(M-E)/e,x=function(N){var C=N*m,$=Ui(E),H=d/(n*S)*($*Fc(e*C+E)-Oc(E));return[u+H*f,c+H*w,d*$/Ui(e*C+E)]}}return x.duration=m*1e3*e/Math.SQRT2,x}return i.rho=function(a){var r=Math.max(.001,+a),u=r*r,c=u*u;return t(r,u,c)},i}(Math.SQRT2,2,4);function Kr(){const t=Fn(oo),[e,n]=_.useState([]),[s,i]=_.useState(!0);return{loading:s,dataList:e,getHistogramData:async r=>{i(!0);try{const u=new URLSearchParams;u.append("date_type",String(r.date_type)),u.append("histogram_type",String(r.histogram_type)),u.append("limit",String(r.limit)),r.pool_address&&u.append("id",String(r.pool_address));const d=await(await fetch(`${t}?${u.toString()}`)).json();console.log("getHistogramData: ",d);const h=[];d&&d.data&&d.data.list&&d.data.list.forEach(l=>{h.push({name:"Page A",time:l.date,uv:0,pv:l.num,amt:0})}),console.log("getHistogramData list: ",h),n(h),i(!1)}catch(u){console.log(u,"getHistogramData"),i(!1)}}}}const Hc=zr(t=>({displayToken0Value:"",displayToken1Value:"",addToken0:void 0,addToken1:void 0,currentFeeTier:"",currentApiPoolInfo:null,currentContractPoolInfo:null,currentPrice:"",inversePrice:"",baseCoin:"",currentApiPoolInfoIsLoading:!0,currentContractPoolInfoIsLoading:!0,priceRangePercentage:0,defaultPriceRangePercentage:0,minPriceData:void 0,maxPriceData:void 0,precomputationInfo:void 0,ratio:{},submitIsLoading:!1,setSubmitIsLoading:e=>{t(()=>({submitIsLoading:e}))},setRatio:e=>{t(()=>({ratio:e}))},setDisplayToken0Value:e=>{t(()=>({displayToken0Value:e}))},setDisplayToken1Value:e=>{t(()=>({displayToken1Value:e}))},setAddToken0:e=>{t(()=>({addToken0:e}))},setAddToken1:e=>{t(()=>({addToken1:e}))},setCurrentFeeTier:e=>{const n=Lr(e);t(()=>({currentFeeTier:e,priceRangePercentage:n,defaultPriceRangePercentage:n}))},setCurrentApiPoolInfo:e=>{t(()=>({currentApiPoolInfo:e}))},setCurrentContractPoolInfo:e=>{t(()=>({currentContractPoolInfo:e}))},setCurrentPrice:e=>{t(()=>({currentPrice:e,inversePrice:V(1).div(e).toString()}))},setBaseCoin:e=>{t(()=>({baseCoin:e}))},setCurrentApiPoolInfoIsLoading:e=>{t(()=>({currentApiPoolInfoIsLoading:e}))},setCurrentContractPoolInfoIsLoading:e=>{t(()=>({currentContractPoolInfoIsLoading:e}))},setPriceRangePercentage:e=>{t(()=>({priceRangePercentage:e}))},saveMinPriceData:e=>{t(()=>({minPriceData:e}))},saveMaxPriceData:e=>{t(()=>({maxPriceData:e}))},setPrecomputationInfo:e=>{t(()=>({precomputationInfo:e}))},currentPoolPositions:[],setCurrentPoolPositions:e=>{t(()=>({currentPoolPositions:e}))},currentPoolPositionsIsLoading:!0,setCurrentPoolPositionsIsLoading:e=>{t(()=>({currentPoolPositionsIsLoading:e}))},isShowMinMaxDist:!1,setIsShowMinMaxDist:e=>{t(()=>({isShowMinMaxDist:e}))},minDistPercentange:"",maxDistPercentange:"",setMinDistPercentange:e=>{t(()=>({minDistPercentange:e}))},setMaxDistPercentange:e=>{t(()=>({maxDistPercentange:e}))},resetLiquidityState:()=>{t(()=>({displayToken0Value:"",displayToken1Value:"",addToken0:void 0,addToken1:void 0,currentApiPoolInfo:null,currentContractPoolInfo:null,currentPrice:"",inversePrice:"",baseCoin:"",currentApiPoolInfoIsLoading:!0,currentContractPoolInfoIsLoading:!0,minPrice:"",maxPrice:"",lowerTick:"",upperTick:"",priceRangePercentage:0,defaultPriceRangePercentage:0,minPriceData:void 0,maxPriceData:void 0,precomputationInfo:void 0,ratio:{},submitIsLoading:!1,currentPoolPositionsIsLoading:!0,currentPoolPositions:[],isShowMinMaxDist:!1}))}})),Rt=Hc,Zr=t=>{const e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=t.getUTCFullYear(),s=e[t.getUTCMonth()],i=t.getUTCDate();return`${s} ${i}, ${n} (UTC)`};function qc(){const{currentApiPoolInfo:t}=Rt(),[e,n]=_.useState("Volume"),[s,i]=_.useState("1D"),a=_.useMemo(()=>{if(t)return console.log({radioValue:s,currentTab:e}),{date_type:s=="1D"?"day":s=="7D"?"week":"month",histogram_type:e==="Volume"?"vol":"pure_tvl",limit:s=="1D"?40:s=="7D"?30:20,pool_address:t.address}},[t,s,e]),r=d=>{console.log("handleRadioChange value: ",d),i(d)},u=()=>o.jsx(ut,{h:"20px",children:o.jsx(Qe,{options:["1D","7D","30D"],size:"s",value:s,onChange:r})}),{windowWidth:c}=me();return o.jsxs(J,{w:"100%",align:"flex-start",gap:"0",borderRadius:"12px",children:[o.jsxs(ut,{w:"100%",align:"center",justify:"space-between",children:[o.jsx(tt,{children:o.jsx(Zs,{w:"90px",h:"28px",p:"4px",borderRadius:"4px",currentTab:e,textList:["Volume","Liquidity"],onClick:d=>{n(d)}})}),c>810&&u()]}),e==="Volume"&&o.jsx(Vc,{requestParams:a,RadioCardGroupNode:u()}),e==="Liquidity"&&o.jsx(Uc,{requestParams:a,RadioCardGroupNode:u()})]})}function Jr(t){const{windowWidth:e}=me(),{label:n,value:s,time:i,RadioCardGroupNode:a}=t;return o.jsxs(tt,{children:[o.jsx(ut,{w:"100%",justify:"space-between",mt:"12px",children:o.jsxs(J,{gap:"0",align:"flex-start",children:[o.jsx(B,{fontSize:"xs",children:n}),o.jsx(B,{fontSize:"2xl",color:"text_caption",children:he(s,2)})]})}),o.jsx(B,{w:"100%",mb:"12px",fontSize:"xs",children:i}),e<=810&&o.jsx(tt,{mb:"20px",children:a})]})}function Vc(t){const{requestParams:e,RadioCardGroupNode:n}=t,{loading:s,dataList:i,getHistogramData:a}=Kr(),r=_.useMemo(()=>i.slice().reverse(),[i]);_.useEffect(()=>{e&&a(e)},[e]);const[u,c]=_.useState(null),d=w=>{if(w&&w.activePayload&&w.activePayload.length){const b=w.activePayload[0];c(b.payload)}},h=()=>{},l=_.useMemo(()=>u?Zr(new Date(u.time)):"",[u]);_.useEffect(()=>{r.length>0?c(r[0]):c(null)},[r]);const p=(r==null?void 0:r.length)>0?Math.floor(Math.min(...r.map(w=>w.pv))):0,f=Math.ceil(Math.max(...r.map(w=>w.pv)));return o.jsxs(tt,{width:"100%",children:[o.jsx(Jr,{label:"Trading Volume (24H)",value:(u==null?void 0:u.pv)||"0",time:l,RadioCardGroupNode:n}),s?o.jsx(J,{p:"20px 0px 70px",h:"178px",justifyContent:"center",sx:{"@media screen and (max-width: 810px)":{h:"200px"}},children:o.jsx(Je,{})}):(r==null?void 0:r.length)==0?o.jsx(J,{p:"40px 0px 50px",h:"178px",justifyContent:"center",sx:{"@media screen and (max-width: 810px)":{h:"200px"}},children:o.jsx(xe,{type:"nodata",noBg:!0,text:"No token data yet"})}):o.jsx(Fr,{width:"100%",height:200,children:o.jsxs(nc,{data:r,barSize:5,barCategoryGap:120,onMouseEnter:d,onMouseMove:d,onMouseLeave:h,margin:{top:8,right:8,left:8,bottom:0},children:[o.jsx(qr,{cursor:{stroke:"var(--chakra-colors-primary)",strokeWidth:10,strokeDasharray:"3 2"},content:o.jsx(Ir,{type:"Volume"})}),o.jsx(sc,{dataKey:"pv",fill:"var(--chakra-colors-primary)",className:"custom-bar"}),o.jsx(Br,{domain:[p,f],hide:!0}),o.jsx(Hr,{scale:"point",dataKey:"time",reversed:!0,tickLine:!1,tick:Qr,interval:(r==null?void 0:r.length)<10?0:parseInt(String((r==null?void 0:r.length)/6))}),u&&o.jsx(ic,{x:u.time,stroke:"var(--chakra-colors-chart_tooltip_line)",strokeDasharray:"3 3"})]})})]})}function Uc(t){const{requestParams:e,RadioCardGroupNode:n}=t,{loading:s,dataList:i,getHistogramData:a}=Kr(),r=_.useMemo(()=>i.reverse(),[i]),u=(r==null?void 0:r.length)>0?Math.floor(Math.min(...r.map(w=>w.pv))):0,c=Math.ceil(Math.max(...r.map(w=>w.pv)));_.useEffect(()=>{e&&a(e)},[e]);const[d,h]=_.useState(null),l=w=>{if(w&&w.activePayload&&w.activePayload.length){const b=w.activePayload[0];h(b.payload)}},p=()=>{},f=_.useMemo(()=>d?Zr(new Date(d.time)):"",[d]);return _.useEffect(()=>{r.length>0?h(r[0]):h(null)},[r]),o.jsxs(tt,{width:"100%",children:[o.jsx(Jr,{label:"Liquidity",value:(d==null?void 0:d.pv)||"0",time:f,RadioCardGroupNode:n}),s?o.jsx(J,{p:"20px 0px 70px",h:"178px",justifyContent:"center",sx:{"@media screen and (max-width: 810px)":{h:"200px"}},children:o.jsx(Je,{})}):(r==null?void 0:r.length)==0?o.jsx(J,{p:"40px 0px 50px",h:"178px",justifyContent:"center",sx:{"@media screen and (max-width: 810px)":{h:"200px"}},children:o.jsx(xe,{type:"nodata",noBg:!0,text:"No token data yet"})}):o.jsx(Fr,{width:"100%",height:200,children:o.jsxs(tc,{data:r,syncId:"Liquidity",onMouseEnter:l,onMouseMove:l,onMouseLeave:p,margin:{top:8,right:8,left:8,bottom:0},children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--chakra-colors-primary)",stopOpacity:1}),o.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-primary)",stopOpacity:0})]}),o.jsxs("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--chakra-colors-primary)",stopOpacity:1}),o.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-primary)",stopOpacity:0})]})]}),o.jsx(Hr,{dataKey:"time",reversed:!0,tickLine:!1,tick:Qr,interval:(r==null?void 0:r.length)<10?0:parseInt(String((r==null?void 0:r.length)/6))}),o.jsx(Br,{domain:[u,c],hide:!0}),o.jsx(qr,{cursor:{stroke:"var(--chakra-colors-primary)",strokeWidth:1,strokeDasharray:"3 2"},content:o.jsx(Ir,{type:"Liquidity"})}),o.jsx(ec,{type:"monotone",dataKey:"pv",stroke:"var(--chakra-colors-primary)",fill:"url(#colorUv)"})]})})]})}const Qr=t=>{const{x:e,y:n,payload:s,type:i}=t,a=new Date(s.value);["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getUTCDay()];const u=Number(a.getUTCDate())>=10?`${a.getUTCDate()}`:`0${a.getUTCDate()}`;return o.jsx("g",{transform:`translate(${e},${n})`,children:o.jsx("text",{x:0,y:0,dy:i=="totalValue"?12:18,textAnchor:"middle",fill:"var(--chakra-colors-text_paragraph)",fontSize:12,children:u})})},Ir=t=>null;function Wc(){const{currentApiPoolInfo:t,currentFeeTier:e}=Rt(),{getExplorerUrl:n}=Bn(),{windowWidth:s}=me();return o.jsxs(J,{w:"100%",align:"flex-start",children:[o.jsx(B,{children:"Pool Info"}),o.jsxs(Q,{justify:"space-between",h:"80px",w:"100%",border:"1px solid",borderColor:"border",borderRadius:"8px",p:"12px",sx:{"@media screen and (max-width: 810px)":{display:"flex",flexDirection:"column",h:"unset"}},children:[o.jsxs(ut,{w:"100%",align:"center",justify:"space-between",flexDirection:"column",sx:{"@media screen and (max-width: 810px)":{flexDirection:"row"}},children:[o.jsx(B,{fontSize:"xs",children:"Pool Address"}),o.jsxs(ut,{alignItems:"center",children:[o.jsx(Gs,{variant:"link",fontSize:"12px",children:We(t==null?void 0:t.address)}),o.jsx(tt,{m:"0 4px",children:o.jsx(ks,{text:t==null?void 0:t.address})}),o.jsx(zt,{xlinkHref:"#icon-icon_lead",cursor:"pointer",transform:"rotate(-45deg)",onClick:()=>{window.open(n(t==null?void 0:t.address),"_blank")}})]})]}),o.jsx(ke,{text:"Tick Spacing",textFontSize:"12px",valueFontSize:"12px",value:t==null?void 0:t.tickSpacing,isColumn:!(s<=810)}),o.jsx(ke,{text:"Fee Tier",textFontSize:"12px",valueFontSize:"12px",value:Js(e),isColumn:!(s<=810)})]})]})}function Pc(t,e,n){const{tucanaSpotSDK:s}=Xs(),[i,a]=_.useState(["0","0"]),[r,u]=_.useState(["0","0"]),c=Di(e,i[0],2,!0),d=Di(n,i[1],2,!0);return _.useEffect(()=>{t&&e&&n?s.Pool.getPoolTokenAmounts(t).then(h=>{console.log("------------------",h,n,e),a([ie(new Pe(h[0]),e.decimals).toString(),ie(new Pe(h[1]),n.decimals).toString()])}):a(["0","0"])},[t]),_.useEffect(()=>{try{if(t&&e&&n){const h=V(c).add(d);if(h.eq("0"))u(["--","--"]);else{const l=V(c).div(h).mul(100),p=V(100).sub(l);l.lessThanOrEqualTo(.01)?u(["<0.01","99.99"]):p.lessThanOrEqualTo(.01)?u(["99.99","<0.01"]):u([l.toFixed(2,ji.ROUND_DOWN),p.toFixed(2,ji.ROUND_UP)])}}else u(["--","--"])}catch{u(["--","--"])}},[c,d]),{tokenAmounts:i,tokenRatios:r,amount0Rate:c,amount1Rate:d}}function Yc(){var c,d,h,l,p,f,w,b,x,m,S,T;const{getExplorerUrl:t}=Bn(),{currentApiPoolInfo:e}=Rt(),{tokenAmounts:n,tokenRatios:s,amount0Rate:i,amount1Rate:a}=Pc(e==null?void 0:e.address,e==null?void 0:e.token0,e==null?void 0:e.token1),{isImportToken:r}=Hn(),u=(e==null?void 0:e.isReverse)||!1;return o.jsxs(J,{w:"100%",align:"flex-start",children:[o.jsx(B,{children:"Pool Composition"}),o.jsxs(Q,{justify:"space-between",w:"100%",h:"132px",align:"center",border:"1px solid",borderColor:"border",borderRadius:"8px",p:"12px",sx:{"@media screen and (max-width: 810px)":{display:"flex",flexDirection:"column",h:"unset"}},children:[o.jsxs(J,{w:"50%",sx:{"@media screen and (max-width: 810px)":{w:"100%"}},children:[o.jsxs(Q,{w:"100%",align:"center",justify:"space-between",children:[o.jsxs(Q,{gap:"4px",children:[o.jsx(tt,{children:o.jsx(Ye,{imageUrl:(c=e==null?void 0:e.displayToken0)==null?void 0:c.image,w:"20px",h:"20px",showTag:r((d=e==null?void 0:e.displayToken0)==null?void 0:d.metadata),showTagWidth:"12px",showTagHeight:"12px"})}),o.jsx(B,{fontSize:"xs",children:(h=e==null?void 0:e.displayToken0)==null?void 0:h.symbol})]}),o.jsxs(Q,{alignItems:"center",children:[o.jsx(Sn,{href:t((l=e==null?void 0:e.displayToken0)==null?void 0:l.metadata,"accounts"),fontSize:"xs",target:"_blank",children:We((p=e==null?void 0:e.displayToken0)==null?void 0:p.metadata)}),o.jsx(ks,{text:((f=e==null?void 0:e.displayToken0)==null?void 0:f.metadata)||""})]})]}),o.jsx(B,{}),o.jsx(ke,{text:"Amount",textFontSize:"12px",valueFontSize:"12px",value:Ge(n[u?1:0]).toString()}),o.jsx(B,{w:"100%",align:"right",fontSize:"xs",mt:"-12px",children:`${he(u?a:i,2)}`}),o.jsx(ke,{text:"Token Ratio",textFontSize:"12px",valueFontSize:"12px",value:`${s[u?1:0]}%`})]}),o.jsx(tt,{w:"1px",h:"92px",bg:"border",m:"0 24px",sx:{"@media screen and (max-width: 810px)":{w:"100%",h:"1px",m:"12px 24px"}}}),o.jsxs(J,{w:"50%",sx:{"@media screen and (max-width: 810px)":{w:"100%"}},children:[o.jsxs(Q,{w:"100%",align:"center",justify:"space-between",children:[o.jsxs(Q,{gap:"4px",children:[o.jsx(tt,{children:o.jsx(Ye,{imageUrl:(w=e==null?void 0:e.displayToken1)==null?void 0:w.image,w:"20px",h:"20px",showTag:r((b=e==null?void 0:e.displayToken1)==null?void 0:b.metadata),showTagWidth:"12px",showTagHeight:"12px"})}),o.jsx(B,{fontSize:"xs",children:(x=e==null?void 0:e.displayToken1)==null?void 0:x.symbol})]}),o.jsxs(Q,{alignItems:"center",children:[o.jsx(Sn,{href:t((m=e==null?void 0:e.displayToken1)==null?void 0:m.metadata,"accounts"),fontSize:"xs",target:"_blank",children:We((S=e==null?void 0:e.displayToken1)==null?void 0:S.metadata)}),o.jsx(ks,{text:((T=e==null?void 0:e.displayToken1)==null?void 0:T.metadata)||"0"})]})]}),o.jsx(B,{}),o.jsx(ke,{text:"Amount",textFontSize:"12px",valueFontSize:"12px",value:Ge(n[u?0:1]).toString()}),o.jsx(B,{w:"100%",align:"right",fontSize:"xs",mt:"-12px",children:`${he(u?i:a,2)}`}),o.jsx(ke,{text:"Token Ratio",textFontSize:"12px",valueFontSize:"12px",value:`${s[u?0:1]}%`})]})]})]})}function Gc(){const{currentApiPoolInfo:t}=Rt(),{getRate:e}=Wr(),n=_.useMemo(()=>{var i;if(t){const a=(i=t==null?void 0:t.rewarderApr)==null?void 0:i.reduce((r,u)=>V(r).add(u.apr).toNumber(),0);return Se(V(a).mul(100).toNumber(),2)}return 0},[t]),s=_.useMemo(()=>{var a;const i=[];return(a=t==null?void 0:t.rewarderUSD)==null||a.forEach(r=>{if(V(r==null?void 0:r.amountSecond).gt(0)){const u=xc(r==null?void 0:r.amountSecond),c=e(u,r.metadata);i.push({...r,dayAmount:u,dayAmountRate:c})}}),i},[t]);return o.jsxs(J,{w:"100%",p:"16px",justifyContent:"center",gap:"24px",bg:"card_bg",borderRadius:"16px",backdropFilter:"blur(10px)",children:[o.jsxs(J,{w:"100%",gap:"24px",children:[o.jsx(Wc,{}),o.jsx(Yc,{})]}),o.jsxs(J,{w:"100%",align:"flex-start",children:[o.jsx(qc,{}),(s==null?void 0:s.length)>0&&o.jsxs(tt,{w:"100%",mt:"8px",children:[o.jsx(B,{children:"Rewards"}),o.jsxs(Q,{p:"20px",m:"12px 0",gap:"36px",align:"center",w:"100%",border:"1px solid",borderColor:"border",borderRadius:"8px",sx:{"@media screen and (max-width: 810px)":{display:"flex",flexDirection:"column",gap:"16px"}},children:[o.jsxs(ut,{children:[o.jsx(B,{mr:"8px",fontSize:"md",children:"APR"}),o.jsxs(B,{color:"primary",fontSize:"md",children:[n,"%"]})]}),o.jsx(J,{align:"flex-start",children:s==null?void 0:s.map(i=>o.jsxs(Q,{gap:"4px",children:[o.jsx(tt,{children:o.jsx(Ye,{imageUrl:i==null?void 0:i.image,w:"20px",h:"20px"})}),o.jsxs(B,{fontSize:"xs",color:"text_caption",display:"inline-block",children:[i==null?void 0:i.dayAmount,o.jsxs(B,{fontSize:"xs",display:"inline-block",children:[" ($",i==null?void 0:i.dayAmountRate,") "]}),i==null?void 0:i.symbol," per day"]})]}))})]})]})]})]})}function Xc(t){const{w:e,current:n,feeTierDistribution:s,feeTierDistributionLoading:i,onClick:a}=t,[r,u]=_.useState(!1),c=()=>{u(!0)},d=()=>{u(!1)},h=_.useMemo(()=>[{title:(s==null?void 0:s[lt.LOWEST])!==-1?`${nn(s==null?void 0:s[lt.LOWEST],2)}% seclect`:"Not created",content:"Best for very stable pairs",percent:"0.01%",canCreate:(s==null?void 0:s[lt.LOWEST])===-1,value:lt.LOWEST},{title:(s==null?void 0:s[lt.LOW])!==-1?`${nn(s==null?void 0:s[lt.LOW],2)}% seclect`:"Not created",content:"Best for stable pairs",percent:"0.05%",canCreate:(s==null?void 0:s[lt.LOW])===-1,value:lt.LOW},{title:(s==null?void 0:s[lt.MEDIUM])!==-1?`${nn(s==null?void 0:s[lt.MEDIUM],2)}% seclect`:"Not created",content:"Best for most pairs",percent:"0.25%",canCreate:(s==null?void 0:s[lt.MEDIUM])===-1,value:lt.MEDIUM},{title:(s==null?void 0:s[lt.HIGH])!==-1?`${nn(s==null?void 0:s[lt.HIGH],2)}% seclect`:"Not created",content:"Best for exotic pairs",percent:"1%",canCreate:(s==null?void 0:s[lt.HIGH])===-1,value:lt.HIGH}],[s]),l=p=>{console.log("SelectFeeTier item: ",p),a(p)};return o.jsx(tt,{pb:"8px",onClick:()=>u(!r),onMouseLeave:d,onMouseEnter:c,children:o.jsx(co,{isOpen:r,onClose:d,children:({isOpen:p})=>o.jsxs(o.Fragment,{children:[o.jsx(lo,{w:e||"",p:"8px 12px",isActive:r,as:Gs,bg:"bg_secondary",h:"34px",borderRadius:"8px",sx:{_hover:{bg:"card_bg",p:{color:"primary"},svg:{fill:"primary"}},_active:{bg:"card_bg",p:{color:"primary"},svg:{fill:"primary"}}},children:o.jsxs(ut,{w:e||"",align:"center",justifyContent:"center",children:[o.jsxs(B,{color:"text_caption",mr:"4px",fontSize:"xs",children:[n&&Js(n)," fee tier"]}),o.jsx(zt,{xlinkHref:"#icon-icon_open",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})]})}),o.jsx(uo,{p:"4px",opacity:"1",children:h.map(f=>o.jsx(ho,{p:"8px 12px",bg:f.value==n?"primary_10":"",borderRadius:"8px",sx:{_hover:{bg:"primary_10"}},onClick:()=>{u(!1),l(f)},children:o.jsxs(ut,{w:"100%",align:"center",justifyContent:"space-between",children:[o.jsxs(J,{gap:"0",align:"flex-start",children:[o.jsx(B,{color:"primary",fontSize:"xs",children:f.title}),o.jsx(B,{fontSize:"xs",children:f.content})]}),o.jsx(B,{color:f.value==n?"primary":"text_caption",ml:"12px",children:f.percent})]})},f.value))})]})})})}function Ac(t){const{isOpen:e,onClose:n,onChange:s}=t,[i,a]=_.useState("");return _.useEffect(()=>{e||a("")},[e]),o.jsxs(fo,{isOpen:e,onClose:n,isCentered:!0,children:[o.jsx(po,{}),o.jsxs(xo,{children:[o.jsx(go,{children:"Select Pool"}),o.jsx(mo,{}),o.jsxs(yo,{pb:"16px",w:"100%",minH:"400px",maxH:"calc(100vh - 40px)",children:[o.jsx(_o,{searchText:i,placeholder:"Search by token or pool address",onChange:r=>{a(r)}}),o.jsx(tt,{mt:"20px",w:"100%",h:"1px",bg:"border"}),o.jsx(Kc,{searchText:i,onChange:r=>{s(r),n()}})]})]})]})}function Kc(t){const{onChange:e,searchText:n}=t,[s,i]=_.useState(De.OfficialPools),{filterPoolList:a}=mc(n,s),r=_.useMemo(()=>a.sort((c,d)=>{var h,l;return V(((h=d.volUSD)==null?void 0:h.day)||"0").sub(((l=c.volUSD)==null?void 0:l.day)||"0").toNumber()}),[a]),u=_.useMemo(()=>s===De.AllPools,[s]);return o.jsxs(tt,{w:"100%",pt:"20px",minHeight:"300px",maxH:"calc(100vh - 180px)",overflowY:"scroll",children:[o.jsxs(Q,{justifyContent:"space-between",children:[o.jsx(B,{children:"Pool"}),o.jsxs(ut,{alignItems:"center",children:[o.jsx(vo,{checked:u,onClick:()=>{s===De.AllPools?i(De.OfficialPools):i(De.AllPools)}}),o.jsx(B,{ml:"14px",color:u?"primary":"text_paragraph",children:"Display All Pools"})]})]}),a.length===0&&o.jsx(tt,{mt:"40px",children:o.jsx(xe,{type:"nodata",background:"transparent",h:"80px",text:"No pool found"})}),r.map((c,d)=>o.jsxs(tt,{children:[o.jsx(Zc,{pool:c,onChange:e},d),d!==a.length-1&&o.jsx(tt,{w:"100%",h:"1px",bg:"border"})]}))]})}function Zc(t){var i,a,r,u,c,d;const{onChange:e,pool:n}=t,{isImportToken:s}=Hn();return o.jsxs(Q,{w:"100%",h:"65px",justifyContent:"space-between",cursor:"pointer",_hover:{opacity:"0.8"},onClick:()=>e(n),children:[o.jsxs(Q,{gap:"10px",alignItems:"center",children:[o.jsx(tt,{children:o.jsx(As,{w:"40px",coinAIconUrl:(i=n==null?void 0:n.displayToken0)==null?void 0:i.image,coinBIconUrl:(a=n==null?void 0:n.displayToken1)==null?void 0:a.image,variant:"border",showATag:s((r=n==null?void 0:n.displayToken0)==null?void 0:r.metadata),showBTag:s((u=n==null?void 0:n.displayToken1)==null?void 0:u.metadata)})}),o.jsxs(B,{color:"text_caption",fontSize:"md",children:[(c=n==null?void 0:n.displayToken0)==null?void 0:c.symbol," - ",(d=n==null?void 0:n.displayToken1)==null?void 0:d.symbol]})]}),o.jsx(B,{mt:"4px",p:"0px 8px",color:"primary",fontSize:"xs",minW:"52px",h:"16px",lineHeight:"16px",borderRadius:"8px",bg:"bg_secondary",textAlign:"center",children:Js(n==null?void 0:n.feeTier)})]})}function Is(){Ks();const{setBaseCoin:t,baseCoin:e,addToken0:n,addToken1:s,currentPrice:i,currentContractPoolInfo:a,currentApiPoolInfo:r,currentFeeTier:u,minPriceData:c,maxPriceData:d,saveMinPriceData:h,saveMaxPriceData:l,defaultPriceRangePercentage:p,priceRangePercentage:f,setPriceRangePercentage:w,isShowMinMaxDist:b,setIsShowMinMaxDist:x}=Rt(),m=_.useMemo(()=>a==null?void 0:a.tick_spacing,[a]),S=_.useMemo(()=>n||(r==null?void 0:r.token0),[n,r]),T=_.useMemo(()=>s||(r==null?void 0:r.token1),[s,r]),j=(g,v,y,k,R)=>{const z=v,D=y;z&&D&&k?g===100?(h(re.buildMinTickPriceData(k,z,D)),l(re.buildMaxTickPriceData(k,z,D))):(h(re.buildTickPriceData(V(R).mul(V(1).minus(V(g).div(100))).toString(),k,z,D)),l(re.buildTickPriceData(V(R).mul(V(1).add(V(g).div(100))).toString(),k,z,D))):(h(void 0),l(void 0))},E=g=>{h(g)},M=g=>{l(g)},{isFullRange:N,handleMinPriceClick:C,handleMaxPriceClick:$,onInputPriceChange:H}=_c({minPriceData:c,maxPriceData:d,saveMinPriceData:h,saveMaxPriceData:l,token0:S,token1:T,tickSpacing:m});return{minPriceData:c,maxPriceData:d,handleBaseCoinChange:g=>{var v;try{const y=r==null?void 0:r.token0,k=r==null?void 0:r.token1,R=a==null?void 0:a.tick_spacing;t(g),g!==e&&y&&k&&c&&d&&(E(d.getInverseTickPrice()),M(c.getInverseTickPrice()));const z=g===((v=r==null?void 0:r.token0)==null?void 0:v.symbol)}catch(y){console.log("handleBaseCoinChange error: ",y)}},handleMinPriceClick:C,handleMaxPriceClick:$,isFullRange:N,handleChangeRange:j,handleChangeMinPrice:E,handleChangeMaxPrice:M,handleInputPriceChange:(g,v,y)=>{console.log("🚀 ~ file: useLiquiditySelectRange.ts:96 ~ handleInputPriceChange ~ price:",g),console.log("🚀 ~ file: useLiquiditySelectRange.ts:96 ~ handleInputPriceChange ~ isMin:",v),console.log("🚀 ~ file: useLiquiditySelectRange.ts:96 ~ handleInputPriceChange ~ isInputComplete:",y),H(g,v,y),x(!0)},handleInputBlur:(g,v,y)=>{console.log("🚀 ~ file: useLiquiditySelectRange.ts:96 ~ handleInputBlur ~ price:",g),console.log("🚀 ~ file: useLiquiditySelectRange.ts:96 ~ handleInputBlur ~ isMin:",v),console.log("🚀 ~ file: useLiquiditySelectRange.ts:96 ~ handleInputBlur ~ isInputComplete:",y);let k=g;g===""&&(console.log("🚀 ~ file: useLiquiditySelectRange.ts:96 ~ handleInputBlur ~ price is empty:"),v?k=V(i).mul(V(1).minus(V(p).div(100))).toString():k=V(i).mul(V(1).add(V(p).div(100))).toString()),H(k,v,y),x(!0)}}}function ti(){const{baseCoin:t,currentApiPoolInfo:e,currentPrice:n,inversePrice:s}=Rt(),i=_.useMemo(()=>{var r,u;return t&&e?(console.log("displayCurrentPrice baseCoin: ",t),console.log("displayCurrentPrice currentApiPoolInfo?.token0?.symbol: ",(r=e==null?void 0:e.token0)==null?void 0:r.symbol),t===((u=e==null?void 0:e.token0)==null?void 0:u.metadata)?jn(n):jn(s)):""},[t,n,s,e]),a=_.useMemo(()=>{var r;return t&&e?t===((r=e==null?void 0:e.token0)==null?void 0:r.metadata)?`${e==null?void 0:e.token1.symbol} per ${e==null?void 0:e.token0.symbol}`:`${e==null?void 0:e.token0.symbol} per ${e==null?void 0:e.token1.symbol}`:""},[t,n,s,e]);return{displayCurrentPrice:i,displayPerText:a}}function ta(){const{tucanaSpotSDK:t}=Xs(),{getRate:e}=Wr(),{setCurrentPoolPositions:n,setCurrentPoolPositionsIsLoading:s}=Rt();return{getCurrentPoolPositions:async(a,r,u)=>{try{s(!0);const c=[],d=await t.Position.getPositionList(u,r?[r.position_collection]:[]);d==null||d.forEach(h=>{var l,p,f,w;if((h==null?void 0:h.pool_address)===(a==null?void 0:a.id)){const b=h.tick_lower_index===Nt.getInitializableTickIndex(qn,r.tick_spacing)?"0":Nt.tickIndexToPrice(h.tick_lower_index,(l=a==null?void 0:a.token0)==null?void 0:l.decimals,(p=a==null?void 0:a.token1)==null?void 0:p.decimals).toString(),x=h.tick_upper_index===Nt.getInitializableTickIndex(Vn,r.tick_spacing)?"∞":Nt.tickIndexToPrice(h.tick_upper_index,(f=a==null?void 0:a.token0)==null?void 0:f.decimals,(w=a==null?void 0:a.token1)==null?void 0:w.decimals).toString(),m=a!=null&&a.isReverse?x==="∞"?"0":V(1).div(x).toString():b,S=a!=null&&a.isReverse?b==="0"?"∞":V(1).div(b).toString():x,T=wo(r==null?void 0:r.current_tick_index,h.tick_lower_index,h.tick_upper_index),j=ko(h.liquidity,r.current_sqrt_price,h==null?void 0:h.tick_lower_index,h==null?void 0:h.tick_upper_index),E=ie(j==null?void 0:j.coinA,a.token0.decimals),M=ie(j==null?void 0:j.coinB,a.token1.decimals),N=E?e(E,a==null?void 0:a.token0.metadata,6,!0):"0",C=M?e(M,a==null?void 0:a.token1.metadata,6,!0):"0",$=N!=="--"&&C!=="--"?V(N).add(C).toString():"--";c.push({posId:h==null?void 0:h.id,displayToken0:a.displayToken0,displayToken1:a==null?void 0:a.displayToken1,token0:a==null?void 0:a.token0,token1:a==null?void 0:a.token1,minPrice:jn(m),maxPrice:jn(S),status:T,liquidityRate:$,coinAmount0:E,coinAmount1:M,coinAmount0Rate:N,coinAmount1Rate:C,...h})}}),console.log("useGetCurrentPoolPositions getPositions positionList: ",c),n(c),s(!1)}catch(c){s(!1),n([]),console.log("useGetCurrentPoolPositions getPositions Error: ",c)}}}}function ea(t){var et;Un();const{getAddLiquidityPaylod:e}=Dr(),{signAndExecuteTransaction:n}=bo(),{slippage:s}=To();Ci();const{addToken0:i,addToken1:a,currentApiPoolInfo:r,currentContractPoolInfo:u,baseCoin:c,displayToken0Value:d,displayToken1Value:h,setDisplayToken0Value:l,setDisplayToken1Value:p,minPriceData:f,maxPriceData:w,precomputationInfo:b,setPrecomputationInfo:x,currentFeeTier:m,ratio:S,submitIsLoading:T,setSubmitIsLoading:j}=Rt();ta();const{fetchTokenBalances:E}=Ci(),M=_.useMemo(()=>{var gt,X,Z;const Y=c===((gt=r==null?void 0:r.token0)==null?void 0:gt.metadata);console.log("🚀 ~ file: useLiquidityDeposit.ts:52 ~ currentPriceStatusParams ~ direct:",Y);const K=Y?f:w==null?void 0:w.getInverseTickPrice();console.log("🚀 ~ file: useLiquidityDeposit.ts:54 ~ currentPriceStatusParams ~ minPriceTickData:",K);const G=Y?w:f==null?void 0:f.getInverseTickPrice();console.log("🚀 ~ file: useLiquidityDeposit.ts:56 ~ currentPriceStatusParams ~ maxPriceTickData:",G);const st=u==null?void 0:u.current_tick_index;console.log("🚀 ~ file: useLiquidityDeposit.ts:58 ~ currentPriceStatusParams ~ currentTick:",st);const rt=K==null?void 0:K.tick,pt=G==null?void 0:G.tick;return{currentTick:st,lower:rt,upper:pt,metadata0:(X=r==null?void 0:r.token0)==null?void 0:X.metadata,metadata1:(Z=r==null?void 0:r.token1)==null?void 0:Z.metadata}},[r,u,f==null?void 0:f.fixsUiPrice,w==null?void 0:w.fixsUiPrice]),N=wc(M);_.useEffect(()=>{console.log("useLiquidityDeposit currentPriceStatus: ",N)},[N]);const C=Fi(r==null?void 0:r.displayToken0),$=Fi(r==null?void 0:r.displayToken1),{isDisabled:H,submitBtnText:P}=kc(T,i,a,N,d,h,C,$),{displayPerText:W,displayCurrentPrice:L}=ti(),[g,v]=_.useState(),y=_.useMemo(()=>{var Y;return c===((Y=r==null?void 0:r.displayToken0)==null?void 0:Y.metadata)?"column":"column-reverse"},[c,(et=r==null?void 0:r.displayToken0)==null?void 0:et.metadata]),R=Ss((Y,K)=>{var A,ot,ht,Ht,Et,Lt,wt,bt,At;const G=c===((A=r==null?void 0:r.token0)==null?void 0:A.metadata),st=((ot=r==null?void 0:r.token0)==null?void 0:ot.metadata)===((ht=r==null?void 0:r.displayToken0)==null?void 0:ht.metadata),rt=G?f:w==null?void 0:w.getInverseTickPrice(),pt=G?w:f==null?void 0:f.getInverseTickPrice(),gt=rt==null?void 0:rt.tick,X=pt==null?void 0:pt.tick,Z=u==null?void 0:u.current_sqrt_price,xt=(K==null?void 0:K.metadata)===((Ht=r==null?void 0:r.token0)==null?void 0:Ht.metadata),nt=(K==null?void 0:K.metadata)===((Et=r==null?void 0:r.displayToken0)==null?void 0:Et.metadata),vt=ns(Y,K==null?void 0:K.decimals);if(console.log("🚀 ~ file: useLiquidityDeposit.ts:110 ~ preAdd ~ value:",Y),console.log("🚀 ~ file: useLiquidityDeposit.ts:110 ~ preAdd ~ amount:",vt.toString()),!vt||V(vt.toString()).equals(0)){nt?p(""):l("");return}if(gt===void 0||X===void 0||!Z)return;const q=Nt.sqrtPriceX64ToTickIndex(new Pe(Z));if(V(q).gte(gt)&&V(q).lt(X)){const Ut=Co.estLiquidityAndcoinAmountFromOneAmounts(gt,X,vt,xt,!0,0,new Pe(Z));x(Ut),nt?p(st?ie(Ut.coinAmountB,(Lt=r==null?void 0:r.token1)==null?void 0:Lt.decimals):ie(Ut.coinAmountA,(wt=r==null?void 0:r.token0)==null?void 0:wt.decimals)):l(st?ie(Ut.coinAmountA,(bt=r==null?void 0:r.token0)==null?void 0:bt.decimals):ie(Ut.coinAmountB,(At=r==null?void 0:r.token1)==null?void 0:At.decimals))}else x(void 0),V(q).lt(gt)?st?p(""):l(""):st?l(""):p("")},500),z=Y=>{l(Y),v(r==null?void 0:r.displayToken0),R(Y,r==null?void 0:r.displayToken0)},D=Y=>{p(Y),v(r==null?void 0:r.displayToken1),R(Y,r==null?void 0:r.displayToken1)};_.useEffect(()=>{var Y;g&&(d||h)&&R((g==null?void 0:g.metadata)===((Y=r==null?void 0:r.displayToken0)==null?void 0:Y.metadata)?d:h,g)},[w==null?void 0:w.fixsUiPrice,f==null?void 0:f.fixsUiPrice,g==null?void 0:g.metadata]);const O=bc(r==null?void 0:r.displayToken0,r==null?void 0:r.displayToken1,d,h);return{handleDisplayToken0ValueChange:z,handleDisplayToken1ValueChange:D,inputBoxDirection:y,currentPriceStatus:N,fixedToken:g,totalRate:O,getSecondaryModalData:()=>{var K,G;return{token0:i,token1:a,amount0:((K=r==null?void 0:r.displayToken0)==null?void 0:K.metadata)===(i==null?void 0:i.metadata)?d:h,amount1:((G=r==null?void 0:r.displayToken0)==null?void 0:G.metadata)===(i==null?void 0:i.metadata)?h:d,fee:V(m).div(Math.pow(10,4)).toString(),ratio:S,totalRate:O,minPrice:f==null?void 0:f.fixsUiPrice,maxPrice:w==null?void 0:w.fixsUiPrice,displayPerText:W,displayCurrentPrice:L,currentPriceStatus:N}},handleSubmitAdd:async()=>{var Y,K,G,st,rt,pt,gt,X,Z,xt;j(!0);try{const nt=(g==null?void 0:g.metadata)===((Y=r==null?void 0:r.token0)==null?void 0:Y.metadata),vt=c===((K=r==null?void 0:r.token0)==null?void 0:K.metadata),q=vt?f:w==null?void 0:w.getInverseTickPrice(),A=vt?w:f==null?void 0:f.getInverseTickPrice(),ot=((G=r==null?void 0:r.displayToken0)==null?void 0:G.metadata)===((st=r==null?void 0:r.token0)==null?void 0:st.metadata);let ht="0",Ht="0";if(b)ht=b!=null&&b.fix_amount_a?(rt=b==null?void 0:b.coinAmountA)==null?void 0:rt.toString():V((pt=b==null?void 0:b.coinAmountA)==null?void 0:pt.toString()).mul(V(1).add(s)).toString(),Ht=b!=null&&b.fix_amount_a?V((X=b==null?void 0:b.coinAmountB)==null?void 0:X.toString()).mul(V(1).add(s)).toString():(gt=b==null?void 0:b.coinAmountB)==null?void 0:gt.toString();else{const Et=ns(d,(Z=r==null?void 0:r.displayToken0)==null?void 0:Z.decimals).toString(),Lt=ns(h,(xt=r==null?void 0:r.displayToken1)==null?void 0:xt.decimals).toString(),wt=ot?Et:Lt,bt=ot?Lt:Et;ht=wt,Ht=bt}if(r!=null&&r.id&&(q==null?void 0:q.tick)!==void 0&&(A==null?void 0:A.tick)!==void 0){const Et={pool_id:r==null?void 0:r.id,tick_lower:q==null?void 0:q.tick,tick_upper:A==null?void 0:A.tick,fix_amount_a:nt,offer_amount_a:String(Se(ht,0)),offer_amount_b:String(Se(Ht,0))};console.log("handleSubmitAdd slippage: ",s),console.log("handleSubmitAdd params: ",Et);const Lt=e(Et);console.log("handleSubmitAdd payload: ",Lt);const wt=await n([Lt],{action:So.Add,description:"Add Liquidity",coinA:{...r==null?void 0:r.displayToken0,amount:d},coinB:{...r==null?void 0:r.displayToken1,amount:h}});j(!1),console.log("handleSubmitAdd response: ",wt),l(""),p(""),await jo(3e3),t&&t(),E()}}catch(nt){console.log("handleSubmitAdd error: ",nt),j(!1)}},displayToken0Balance:C,displayToken1Balance:$,isDisabled:H,submitBtnText:P}}function Jc(){const{currentFeeTier:t,addToken0:e,addToken1:n,currentApiPoolInfo:s,currentContractPoolInfo:i,currentPrice:a,inversePrice:r,setBaseCoin:u,baseCoin:c,priceRangePercentage:d,setPriceRangePercentage:h,isShowMinMaxDist:l,setIsShowMinMaxDist:p,minDistPercentange:f,maxDistPercentange:w}=Rt(),{minPriceData:b,maxPriceData:x,handleMinPriceClick:m,handleMaxPriceClick:S,isFullRange:T,handleChangeRange:j,handleInputPriceChange:E,handleInputBlur:M,handleBaseCoinChange:N,handleChangeMinPrice:C,handleChangeMaxPrice:$}=Is(),{currentPriceStatus:H}=ea(),{displayPerText:P}=ti(),[W,L]=_.useState(""),g=k=>{console.log("handleRadioChange value: ",k),L(k),k==="0.1%"&&h(.1),k==="0.5%"&&h(.5),k==="1%"&&h(1),k==="5%"&&h(5),k==="10%"&&h(10),k==="20%"&&h(20),k==="50%"&&h(50),k==="Full Range"&&h(100),p(!1)},v=_.useMemo(()=>{var k,R,z,D,O,F;return(k=s==null?void 0:s.displayToken0)!=null&&k.symbol&&((R=s==null?void 0:s.displayToken1)!=null&&R.symbol)?[{key:(z=s==null?void 0:s.displayToken0)==null?void 0:z.metadata,label:(D=s==null?void 0:s.displayToken0)==null?void 0:D.symbol},{key:(O=s==null?void 0:s.displayToken1)==null?void 0:O.metadata,label:(F=s==null?void 0:s.displayToken1)==null?void 0:F.symbol}]:[]},[s]),y=k=>{h(k),p(!1)};return _.useEffect(()=>{var k;switch(d){case .1:L("0.1%");break;case .5:L("0.5%");break;case 1:L("1%");break;case 5:L("5%");break;case 10:L("10%");break;case 20:L("20%");break;case 50:L("50%");break;case 100:L("Full Range");break;default:L("")}if(s!=null&&s.token0&&(s!=null&&s.token1)&&a&&(i!=null&&i.tick_spacing)){const R=c===((k=s==null?void 0:s.token0)==null?void 0:k.metadata);j(d,R?s==null?void 0:s.token0:s==null?void 0:s.token1,R?s==null?void 0:s.token1:s==null?void 0:s.token0,i==null?void 0:i.tick_spacing,R?a:r)}},[d]),_.useMemo(()=>{var k;if(c&&c===((k=s==null?void 0:s.token0)==null?void 0:k.metadata))return!0},[c,s]),o.jsxs(J,{w:"100%",gap:"16px",p:"16px",bg:"card_bg",borderRadius:"16px",backdropFilter:"blur(10px)",children:[o.jsxs(Q,{w:"100%",justify:"space-between",children:[o.jsx(B,{fontSize:"md",color:"text_caption",children:"Select Range"}),o.jsx(tt,{w:"140px",children:o.jsx(Zs,{w:"62px",h:"28px",p:"4px",borderRadius:"4px",currentTab:c,textList:v,onClick:N})})]}),o.jsx(vc,{direction:"column",unit:P,min_price:(b==null?void 0:b.uiPrice)||"",max_price:(x==null?void 0:x.uiPrice)||"",handleMinPriceActoin:k=>{m(k),p(!0)},handleMaxPriceActoin:k=>{S(k),p(!0)},onInputPriceChange:E,onInputPriceBlur:M,isFullRange:T}),H==="error"&&o.jsx(tt,{w:"100%",zIndex:100,children:o.jsx(B,{color:"error",fontSize:"12px",children:"The max price should be higher than min price."})}),o.jsxs(J,{w:"100%",justifyContent:"flex-start",children:[o.jsxs(Q,{w:"100%",align:"center",gap:"4px",children:[o.jsx(B,{children:"Range Size"}),o.jsx(Cn,{label:"The Range Size measures the percentage difference between the range selected Min and Max bounds and the current price.","aria-label":"Range Size",placement:"right",sx:{"@media screen and (max-width: 810px)":{w:"200px"}},children:o.jsx("button",{children:o.jsx(zt,{xlinkHref:"#icon-icon_tips",variant:"grayprimary"})})})]}),o.jsxs(Ro,{"aria-label":"slider-ex-1",value:l?0:d,min:0,max:100,onChange:y,children:[o.jsx(Eo,{children:o.jsx(Mo,{})}),o.jsx(No,{})]})]}),o.jsxs(Q,{w:"100%",align:l?"flex-end":"center",justifyContent:"space-between",sx:{"@media screen and (max-width: 1150px)":{display:"flex",flexDirection:"column",alignItems:"flex-start"}},children:[!l&&W==="Full Range"?o.jsx(B,{fontSize:"md",color:"text_caption",lineHeight:"1",sx:{"@media screen and (max-width: 810px)":{fontSize:"sm"}},children:"Full Range"}):l?o.jsxs(Q,{align:"center",children:[o.jsxs(J,{gap:"0",children:[o.jsx(B,{fontSize:"xs",children:"Min"}),o.jsxs(B,{fontSize:"md",color:"text_caption",lineHeight:"1",children:[Ri(f),"%"]})]}),o.jsx(B,{color:"text_caption",pt:"8px",fontSize:"md",lineHeight:"1",children:"/"}),o.jsxs(J,{gap:"0",children:[o.jsx(B,{fontSize:"xs",children:"Max"}),o.jsxs(B,{fontSize:"md",color:"text_caption",lineHeight:"1",children:[Ri(w),"%"]})]})]}):o.jsxs(B,{fontSize:"md",color:"text_caption",sx:{"@media screen and (max-width: 810px)":{fontSize:"sm"}},children:["±",d,"%"]}),ss&&ss[t]&&o.jsx(Qe,{h:"32px",options:ss[t]||[],value:l?"-1":W,onChange:g})]})]})}function Qc(){const t=Fn(zo),[e,n]=_.useState([]),[s,i]=_.useState(!0),[a,r]=_.useState(0);return{loading:s,dataList:e,fetchHistoryData:async c=>{i(!0);try{const d=new Date().getTime(),h=new URLSearchParams;h.append("timestamp",String(d)),h.append("id",String(c.pool_address)),h.append("limit",String(c.limit)),h.append("offset",String(c.offset)),c.event_type&&h.append("event_type",String(c.event_type));const p=await(await fetch(`${t}?${h.toString()}`)).json();if(console.log("fetchHistoryData: ",p),p&&p.data&&p.data.list){const f=p.data.list;f.forEach(w=>{w.eventType==="burn_event"&&(w.eventType="Remove Liquidity"),w.eventType==="mint_event"&&(w.eventType="Add Liquidity"),w.eventType==="swap_event"&&(w.eventType="Swap")}),r(Number(p.data.total)),n(f)}else n([]),r(0);i(!1)}catch(d){console.log(d,"fetchHistoryData"),i(!1)}},total:a}}const is=10;function Ic(t){const{windowWidth:e}=t,{currentApiPoolInfo:n}=Rt(),{fetchHistoryData:s,loading:i,dataList:a,total:r}=Qc(),[u,c]=_.useState(1),{getExplorerUrl:d}=Bn();_.useEffect(()=>{n&&h(1)},[n==null?void 0:n.address]);const h=x=>{c(x),s({limit:is,pool_address:n==null?void 0:n.address,offset:(x-1)*is})};if(i&&u===1&&r===0)return o.jsx(Pr,{});const l=x=>o.jsx(B,{color:"text_caption",fontSize:"xs",children:x==null?void 0:x.eventType}),p=x=>{let m=[];n!=null&&n.isReverse&&x.eventType!=="Swap"?m=x.items.slice().reverse():m=x==null?void 0:x.items;const S=m[0],T=m[1];return o.jsxs(J,{gap:"0px",align:"flex-end",children:[o.jsxs(Q,{children:[o.jsx(Ye,{w:"20px",h:"20px",imageUrl:S==null?void 0:S.image}),o.jsx(B,{fontSize:"xs",color:"text_caption",children:Ge(S==null?void 0:S.amount)}),o.jsx(B,{fontSize:"xs",children:S==null?void 0:S.symbol})]}),(x==null?void 0:x.eventType)==="Swap"&&o.jsx(tt,{mt:"-6px",children:o.jsx(zt,{xlinkHref:"#icon-icon_down",variant:"graygray"})}),(x==null?void 0:x.eventType)==="Add Liquidity"&&o.jsx(tt,{mt:"-6px",children:o.jsx(zt,{xlinkHref:"#icon-icon_increase",variant:"graygray"})}),(x==null?void 0:x.eventType)==="Remove Liquidity"&&o.jsx(tt,{mt:"-6px",children:o.jsx(zt,{xlinkHref:"#icon-icon_reduce4",variant:"graygray"})}),o.jsxs(Q,{mt:"-4px",children:[o.jsx(Ye,{w:"20px",h:"20px",imageUrl:T==null?void 0:T.image}),o.jsx(B,{fontSize:"xs",color:"text_caption",children:Ge(T==null?void 0:T.amount)}),o.jsx(B,{fontSize:"xs",children:T==null?void 0:T.symbol})]}),o.jsx(B,{})]})},f=x=>o.jsx(ut,{justifyContent:"flex-end",children:o.jsx(Sn,{href:d(x==null?void 0:x.tx,"tx"),variant:"link",color:"primary",fontSize:"xs",target:"_blank",children:We(x==null?void 0:x.tx)})}),w=x=>o.jsx(B,{fontSize:"xs",textAlign:"right",children:Bo(Date.parse(x==null?void 0:x.blockTime))}),b=x=>[{leftText:"Recent event",right:l(x)},{leftText:"Amounts",right:p(x),rowListAlign:"flex-start"},{leftText:"Transactions",right:f(x)},{leftText:"Time",right:w(x)}];return o.jsxs(J,{w:"100%",justifyContent:"center",gap:"0px",bg:"card_bg",backdropFilter:"blur(10px)",p:"8px",borderRadius:"12px",children:[o.jsx(Lo,{w:"100%",children:e<=810?o.jsx(J,{w:"100%",children:i?[{},{},{}].map((x,m)=>o.jsx(J,{w:"100%",children:o.jsx(Bi,{isLoading:i})},m)):a==null?void 0:a.map((x,m)=>o.jsx(J,{w:"100%",children:o.jsx(Bi,{isLoading:i,rowList:b(x)})},x==null?void 0:x.tx))}):(a==null?void 0:a.length)>0&&o.jsxs(Do,{size:"sm",variant:"striped",children:[o.jsx($o,{children:o.jsxs(Ei,{children:[o.jsx(sn,{children:o.jsx(B,{fontWeight:"200",children:"Recent event"})}),o.jsx(sn,{textAlign:"right",children:o.jsx(B,{fontWeight:"200",children:"Amounts"})}),o.jsx(sn,{textAlign:"right",children:o.jsx(B,{fontWeight:"200",children:"Transactions"})}),o.jsx(sn,{textAlign:"right",children:o.jsx(B,{fontWeight:"200",children:"Time"})})]})}),o.jsx(Oo,{children:a.map((x,m)=>o.jsxs(Ei,{sx:{td:{background:m%2===0?"button_ghost_bg !important":"transparent",border:"none",_first:{borderRadius:"8px 0 0 8px"},_last:{borderRadius:"0px 8px 8px 0px"}}},children:[o.jsxs(rn,{children:[" ",l(x)," "]}),o.jsx(rn,{children:p(x)}),o.jsx(rn,{children:f(x)}),o.jsx(rn,{children:w(x)})]},x==null?void 0:x.tx))})]})}),a.length===0&&o.jsx(xe,{type:"nodata"}),r<10?null:o.jsx(tt,{m:"20px 0",children:o.jsx(Fo,{total:r,size:is,currentPage:u,onChange:x=>{console.log({current:x}),h(x)}})})]})}function tl(){const{address:t,onboard:e}=Un(),{currentPoolPositionsIsLoading:n,currentPoolPositions:s}=Rt();return o.jsxs(o.Fragment,{children:[!t&&o.jsx(xe,{type:"nowallet",onboard:e}),t&&!n&&(s==null?void 0:s.length)===0&&o.jsx(xe,{type:"nodata",text:"You have no liquidity positions"}),t&&n&&o.jsx(Pr,{}),t&&!n&&(s==null?void 0:s.length)>0&&o.jsx(J,{w:"100%",justifyContent:"center",gap:"8px",children:s==null?void 0:s.map(i=>o.jsx(el,{info:i},`current-pool-positions-${i==null?void 0:i.posId}`))})]})}function el(t){var r,u,c,d,h,l,p,f,w,b,x,m;const e=Ks(),{setCurrentPositionTab:n}=Jo(),{info:s}=t,{isImportToken:i}=Hn(),a=(s==null?void 0:s.displayToken0.metadata)!==(s==null?void 0:s.token0.metadata);return o.jsxs(J,{w:"100%",align:"flex-start",bg:"card_bg",backdropFilter:"blur(10px)",borderRadius:"16px",p:"20px",position:"relative",onClick:()=>{n("increase"),e(`/position/${s==null?void 0:s.pool_address}/${s==null?void 0:s.posId}`)},children:[o.jsx(tt,{position:"absolute",top:"0",right:"0",children:o.jsx(Qo,{borderRadius:"0px  16px",status:s==null?void 0:s.status,isActive:(s==null?void 0:s.status)==="Active"})}),o.jsxs(Q,{children:[o.jsx(As,{w:"32px",coinAIconUrl:(r=s.displayToken0)==null?void 0:r.image,coinBIconUrl:(u=s.displayToken1)==null?void 0:u.image,variant:"border",p:"4px",showATag:i((c=s.displayToken0)==null?void 0:c.metadata),showBTag:i((d=s.displayToken1)==null?void 0:d.metadata)}),o.jsxs(B,{color:"Text_caption",children:[(h=s==null?void 0:s.displayToken0)==null?void 0:h.symbol,"-",(l=s==null?void 0:s.displayToken1)==null?void 0:l.symbol," LP（#",s==null?void 0:s.position_index,")"]})]}),o.jsxs(Q,{w:"100%",justifyContent:"space-between",sx:{"@media screen and (max-width: 810px)":{flexDirection:"column",alignItems:"flex-start"}},children:[o.jsx(Tc,{minPrice:s==null?void 0:s.minPrice,maxPrice:s==null?void 0:s.maxPrice,baseSymbol:(p=s==null?void 0:s.token0)==null?void 0:p.symbol,quoteSymbol:(f=s==null?void 0:s.token1)==null?void 0:f.symbol}),o.jsxs(ut,{align:"center",gap:"10px",sx:{"@media screen and (max-width: 810px)":{w:"100%",justifyContent:"space-between"}},children:[o.jsx(B,{fontSize:"xs",children:"Liquidtity"}),o.jsx(Cn,{label:o.jsxs(J,{gap:"12px",p:"4px 0",minW:"280px",flexDirection:a?"column-reverse":"column",children:[o.jsx(Oi,{icon:((w=s==null?void 0:s.token0)==null?void 0:w.image)||"",amount:(s==null?void 0:s.coinAmount0)||"0",amountValue:(s==null?void 0:s.coinAmount0Rate)||"--",symbol:((b=s==null?void 0:s.token0)==null?void 0:b.symbol)||""}),o.jsx(Oi,{icon:((x=s==null?void 0:s.token1)==null?void 0:x.image)||"",amount:(s==null?void 0:s.coinAmount1)||"0",amountValue:(s==null?void 0:s.coinAmount1Rate)||"--",symbol:((m=s==null?void 0:s.token1)==null?void 0:m.symbol)||""})]}),"aria-label":"LiquidityRate",children:o.jsx("button",{children:o.jsx(B,{color:"text_caption",textDecoration:"underline dotted",dangerouslySetInnerHTML:{__html:`${he(s==null?void 0:s.liquidityRate,2)}`}})})})]})]})]})}function nl(){const{tucanaSpotSDK:t}=Xs();return{getContractPool:async n=>{if(!n)return null;const s=await t.Pool.getPool(n);return console.log("useContractPoolInfo getContractPool poolInfo: ",s),s}}}function sl({handleClickRefresh:t}){var L,g;const{address:e,onboard:n}=Un(),{currentApiPoolInfo:s,displayToken0Value:i,displayToken1Value:a,submitIsLoading:r,setBaseCoin:u,baseCoin:c,addToken0:d,addToken1:h}=Rt(),{handleDisplayToken0ValueChange:l,handleDisplayToken1ValueChange:p,inputBoxDirection:f,currentPriceStatus:w,totalRate:b,handleSubmitAdd:x,getSecondaryModalData:m,displayToken0Balance:S,displayToken1Balance:T,isDisabled:j,submitBtnText:E}=ea(t);Is();const[M,N]=_.useState(!1),[C,$]=_.useState(!1),[H,P]=_.useState(),W=()=>{const v=m();console.log("handleOpenSecondaryModal data: ",v),P(v),$(!0)};return o.jsxs(J,{w:"100%",p:"16px",bg:"card_bg",borderRadius:"16px",backdropFilter:"blur(10px)",children:[o.jsxs(Q,{w:"100%",justify:"space-between",mb:"8px",children:[o.jsx(B,{fontSize:"md",color:"text_caption",children:"Deposit Amounts"}),o.jsx(zt,{xlinkHref:"#icon-icon_slider",onClick:()=>N(!0)})]}),o.jsxs(J,{gap:"0px",w:"100%",flexDirection:f,children:[o.jsxs(tt,{position:"relative",w:"100%",children:[w==="error"||w===((L=s==null?void 0:s.displayToken0)==null?void 0:L.metadata)?o.jsx(Hi,{notHaveText:w==="error"}):null,o.jsx($i,{noArrow:!0,currentCoin:d,amount:i,balance:S,onAmountChange:l})]}),o.jsx(ut,{zIndex:"400",gap:"0px",h:"8px",onClick:()=>{var y,k,R;const v=c===((y=s==null?void 0:s.displayToken0)==null?void 0:y.metadata)?(k=s==null?void 0:s.displayToken1)==null?void 0:k.metadata:(R=s==null?void 0:s.displayToken0)==null?void 0:R.metadata;v&&u(v)},children:o.jsx("div",{className:"exchange liquidity-add"})}),o.jsxs(tt,{position:"relative",w:"100%",children:[w==="error"||w===((g=s==null?void 0:s.displayToken1)==null?void 0:g.metadata)?o.jsx(Hi,{notHaveText:w==="error"}):null,o.jsx($i,{noArrow:!0,currentCoin:h,amount:a,balance:T,onAmountChange:p})]})]}),o.jsxs(Q,{w:"100%",justify:"space-between",bg:"input_bg",h:"52px",p:"0 16px",borderRadius:"16px",border:"1px solid",borderColor:"border",children:[o.jsx(B,{fontSize:"md",children:"Total"}),o.jsxs(B,{fontSize:"16px",color:"text_caption",children:["$",Ge(b)]})]}),o.jsx(Gs,{w:"100%",mt:"4px",size:"lg",onClick:()=>{e?W():n()},isLoading:r,isDisabled:j,children:E}),o.jsx(gc,{isOpen:M,onClose:()=>N(!1)}),o.jsx(Sc,{data:H,isOpen:C,onClose:()=>{$(!1)},onClick:()=>{x(),$(!1)}})]})}const ae=()=>{},Mt=ae(),rs=Object,it=t=>t===Mt,Gt=t=>typeof t=="function",ce=(t,e)=>({...t,...e}),il=t=>Gt(t.then),on=new WeakMap;let rl=0;const Xe=t=>{const e=typeof t,n=t&&t.constructor,s=n==Date;let i,a;if(rs(t)===t&&!s&&n!=RegExp){if(i=on.get(t),i)return i;if(i=++rl+"~",on.set(t,i),n==Array){for(i="@",a=0;a<t.length;a++)i+=Xe(t[a])+",";on.set(t,i)}if(n==rs){i="#";const r=rs.keys(t).sort();for(;!it(a=r.pop());)it(t[a])||(i+=a+":"+Xe(t[a])+",");on.set(t,i)}}else i=s?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},It=new WeakMap,as={},cn={},ei="undefined",Pn=typeof window!=ei,Cs=typeof document!=ei,al=()=>Pn&&typeof window.requestAnimationFrame!=ei,na=(t,e)=>{const n=It.get(t);return[()=>!it(e)&&t.get(e)||as,s=>{if(!it(e)){const i=t.get(e);e in cn||(cn[e]=i),n[5](e,ce(i,s),i||as)}},n[6],()=>!it(e)&&e in cn?cn[e]:!it(e)&&t.get(e)||as]};let Rs=!0;const ol=()=>Rs,[Es,Ms]=Pn&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ae,ae],cl=()=>{const t=Cs&&document.visibilityState;return it(t)||t!=="hidden"},ll=t=>(Cs&&document.addEventListener("visibilitychange",t),Es("focus",t),()=>{Cs&&document.removeEventListener("visibilitychange",t),Ms("focus",t)}),ul=t=>{const e=()=>{Rs=!0,t()},n=()=>{Rs=!1};return Es("online",e),Es("offline",n),()=>{Ms("online",e),Ms("offline",n)}},dl={isOnline:ol,isVisible:cl},hl={initFocus:ll,initReconnect:ul},Wi=!oe.useId,Ae=!Pn||"Deno"in window,fl=t=>al()?window.requestAnimationFrame(t):setTimeout(t,1),os=Ae?_.useEffect:_.useLayoutEffect,cs=typeof navigator<"u"&&navigator.connection,Pi=!Ae&&cs&&(["slow-2g","2g"].includes(cs.effectiveType)||cs.saveData),ni=t=>{if(Gt(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Xe(t):"",[t,e]};let pl=0;const Ns=()=>++pl,sa=0,ia=1,ra=2,xl=3;var $e={__proto__:null,ERROR_REVALIDATE_EVENT:xl,FOCUS_EVENT:sa,MUTATE_EVENT:ra,RECONNECT_EVENT:ia};async function aa(...t){const[e,n,s,i]=t,a=ce({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let r=a.populateCache;const u=a.rollbackOnError;let c=a.optimisticData;const d=p=>typeof u=="function"?u(p):u!==!1,h=a.throwOnError;if(Gt(n)){const p=n,f=[],w=e.keys();for(const b of w)!/^\$(inf|sub)\$/.test(b)&&p(e.get(b)._k)&&f.push(b);return Promise.all(f.map(l))}return l(n);async function l(p){const[f]=ni(p);if(!f)return;const[w,b]=na(e,f),[x,m,S,T]=It.get(e),j=()=>{const L=x[f];return(Gt(a.revalidate)?a.revalidate(w().data,p):a.revalidate!==!1)&&(delete S[f],delete T[f],L&&L[0])?L[0](ra).then(()=>w().data):w().data};if(t.length<3)return j();let E=s,M;const N=Ns();m[f]=[N,0];const C=!it(c),$=w(),H=$.data,P=$._c,W=it(P)?H:P;if(C&&(c=Gt(c)?c(W,H):c,b({data:c,_c:W})),Gt(E))try{E=E(W)}catch(L){M=L}if(E&&il(E))if(E=await E.catch(L=>{M=L}),N!==m[f][0]){if(M)throw M;return E}else M&&C&&d(M)&&(r=!0,b({data:W,_c:Mt}));if(r&&!M)if(Gt(r)){const L=r(E,W);b({data:L,error:Mt,_c:Mt})}else b({data:E,error:Mt,_c:Mt});if(m[f][1]=Ns(),Promise.resolve(j()).then(()=>{b({_c:Mt})}),M){if(h)throw M;return}return E}}const Yi=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},gl=(t,e)=>{if(!It.has(t)){const n=ce(hl,e),s={},i=aa.bind(Mt,t);let a=ae;const r={},u=(h,l)=>{const p=r[h]||[];return r[h]=p,p.push(l),()=>p.splice(p.indexOf(l),1)},c=(h,l,p)=>{t.set(h,l);const f=r[h];if(f)for(const w of f)w(l,p)},d=()=>{if(!It.has(t)&&(It.set(t,[s,{},{},{},i,c,u]),!Ae)){const h=n.initFocus(setTimeout.bind(Mt,Yi.bind(Mt,s,sa))),l=n.initReconnect(setTimeout.bind(Mt,Yi.bind(Mt,s,ia)));a=()=>{h&&h(),l&&l(),It.delete(t)}}};return d(),[t,i,d,a]}return[t,It.get(t)[4]]},ml=(t,e,n,s,i)=>{const a=n.errorRetryCount,r=i.retryCount,u=~~((Math.random()+.5)*(1<<(r<8?r:8)))*n.errorRetryInterval;!it(a)&&r>a||setTimeout(s,u,i)},yl=(t,e)=>Xe(t)==Xe(e),[oa,_l]=gl(new Map),vl=ce({onLoadingSlow:ae,onSuccess:ae,onError:ae,onErrorRetry:ml,onDiscarded:ae,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Pi?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Pi?5e3:3e3,compare:yl,isPaused:()=>!1,cache:oa,mutate:_l,fallback:{}},dl),wl=(t,e)=>{const n=ce(t,e);if(e){const{use:s,fallback:i}=t,{use:a,fallback:r}=e;s&&a&&(n.use=s.concat(a)),i&&r&&(n.fallback=ce(i,r))}return n},kl=_.createContext({}),bl="$inf$",ca=Pn&&window.__SWR_DEVTOOLS_USE__,Tl=ca?window.__SWR_DEVTOOLS_USE__:[],Sl=()=>{ca&&(window.__SWR_DEVTOOLS_REACT__=oe)},la=t=>Gt(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],jl=()=>ce(vl,_.useContext(kl)),Cl=t=>(e,n,s)=>t(e,n&&((...a)=>{const[r]=ni(e),[,,,u]=It.get(oa);if(r.startsWith(bl))return n(...a);const c=u[r];return it(c)?n(...a):(delete u[r],c)}),s),Rl=Tl.concat(Cl),El=t=>function(...n){const s=jl(),[i,a,r]=la(n),u=wl(s,r);let c=t;const{use:d}=u,h=(d||[]).concat(Rl);for(let l=h.length;l--;)c=h[l](c);return c(i,a||u.fetcher||null,u)},Ml=(t,e,n)=>{const s=e[t]||(e[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i>=0&&(s[i]=s[s.length-1],s.pop())}},Nl=(t,e)=>(...n)=>{const[s,i,a]=la(n),r=(a.use||[]).concat(e);return t(s,i,{...a,use:r})};Sl();const Gi=oe.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),ls={dedupe:!0},zl=(t,e,n)=>{const{cache:s,compare:i,suspense:a,fallbackData:r,revalidateOnMount:u,revalidateIfStale:c,refreshInterval:d,refreshWhenHidden:h,refreshWhenOffline:l,keepPreviousData:p}=n,[f,w,b,x]=It.get(s),[m,S]=ni(t),T=_.useRef(!1),j=_.useRef(!1),E=_.useRef(m),M=_.useRef(e),N=_.useRef(n),C=()=>N.current,$=()=>C().isVisible()&&C().isOnline(),[H,P,W,L]=na(s,m),g=_.useRef({}).current,v=it(r)?n.fallback[m]:r,y=(X,Z)=>{for(const xt in g){const nt=xt;if(nt==="data"){if(!i(X[nt],Z[nt])&&(!it(X[nt])||!i(Y,Z[nt])))return!1}else if(Z[nt]!==X[nt])return!1}return!0},k=_.useMemo(()=>{const X=!m||!e?!1:it(u)?C().isPaused()||a?!1:it(c)?!0:c:u,Z=ot=>{const ht=ce(ot);return delete ht._k,X?{isValidating:!0,isLoading:!0,...ht}:ht},xt=H(),nt=L(),vt=Z(xt),q=xt===nt?vt:Z(nt);let A=vt;return[()=>{const ot=Z(H());return y(ot,A)?(A.data=ot.data,A.isLoading=ot.isLoading,A.isValidating=ot.isValidating,A.error=ot.error,A):(A=ot,ot)},()=>q]},[s,m]),R=Ho.useSyncExternalStore(_.useCallback(X=>W(m,(Z,xt)=>{y(xt,Z)||X()}),[s,m]),k[0],k[1]),z=!T.current,D=f[m]&&f[m].length>0,O=R.data,F=it(O)?v:O,ft=R.error,et=_.useRef(F),Y=p?it(O)?et.current:O:F,K=D&&!it(ft)?!1:z&&!it(u)?u:C().isPaused()?!1:a?it(F)?!1:c:it(F)||c,G=!!(m&&e&&z&&K),st=it(R.isValidating)?G:R.isValidating,rt=it(R.isLoading)?G:R.isLoading,pt=_.useCallback(async X=>{const Z=M.current;if(!m||!Z||j.current||C().isPaused())return!1;let xt,nt,vt=!0;const q=X||{},A=!b[m]||!q.dedupe,ot=()=>Wi?!j.current&&m===E.current&&T.current:m===E.current,ht={isValidating:!1,isLoading:!1},Ht=()=>{P(ht)},Et=()=>{const wt=b[m];wt&&wt[1]===nt&&delete b[m]},Lt={isValidating:!0};it(H().data)&&(Lt.isLoading=!0);try{if(A&&(P(Lt),n.loadingTimeout&&it(H().data)&&setTimeout(()=>{vt&&ot()&&C().onLoadingSlow(m,n)},n.loadingTimeout),b[m]=[Z(S),Ns()]),[xt,nt]=b[m],xt=await xt,A&&setTimeout(Et,n.dedupingInterval),!b[m]||b[m][1]!==nt)return A&&ot()&&C().onDiscarded(m),!1;ht.error=Mt;const wt=w[m];if(!it(wt)&&(nt<=wt[0]||nt<=wt[1]||wt[1]===0))return Ht(),A&&ot()&&C().onDiscarded(m),!1;const bt=H().data;ht.data=i(bt,xt)?bt:xt,A&&ot()&&C().onSuccess(xt,m,n)}catch(wt){Et();const bt=C(),{shouldRetryOnError:At}=bt;bt.isPaused()||(ht.error=wt,A&&ot()&&(bt.onError(wt,m,bt),(At===!0||Gt(At)&&At(wt))&&(!C().revalidateOnFocus||!C().revalidateOnReconnect||$())&&bt.onErrorRetry(wt,m,bt,Ut=>{const ye=f[m];ye&&ye[0]&&ye[0]($e.ERROR_REVALIDATE_EVENT,Ut)},{retryCount:(q.retryCount||0)+1,dedupe:!0})))}return vt=!1,Ht(),!0},[m,s]),gt=_.useCallback((...X)=>aa(s,E.current,...X),[]);if(os(()=>{M.current=e,N.current=n,it(O)||(et.current=O)}),os(()=>{if(!m)return;const X=pt.bind(Mt,ls);let Z=0;const nt=Ml(m,f,(vt,q={})=>{if(vt==$e.FOCUS_EVENT){const A=Date.now();C().revalidateOnFocus&&A>Z&&$()&&(Z=A+C().focusThrottleInterval,X())}else if(vt==$e.RECONNECT_EVENT)C().revalidateOnReconnect&&$()&&X();else{if(vt==$e.MUTATE_EVENT)return pt();if(vt==$e.ERROR_REVALIDATE_EVENT)return pt(q)}});return j.current=!1,E.current=m,T.current=!0,P({_k:S}),K&&(it(F)||Ae?X():fl(X)),()=>{j.current=!0,nt()}},[m]),os(()=>{let X;function Z(){const nt=Gt(d)?d(H().data):d;nt&&X!==-1&&(X=setTimeout(xt,nt))}function xt(){!H().error&&(h||C().isVisible())&&(l||C().isOnline())?pt(ls).then(Z):Z()}return Z(),()=>{X&&(clearTimeout(X),X=-1)}},[d,h,l,m]),_.useDebugValue(Y),a&&it(F)&&m){if(!Wi&&Ae)throw new Error("Fallback data is required when using suspense in SSR.");M.current=e,N.current=n,j.current=!1;const X=x[m];if(!it(X)){const Z=gt(X);Gi(Z)}if(it(ft)){const Z=pt(ls);it(Y)||(Z.status="fulfilled",Z.value=!0),Gi(Z)}else throw ft}return{mutate:gt,get data(){return g.data=!0,Y},get error(){return g.error=!0,ft},get isValidating(){return g.isValidating=!0,st},get isLoading(){return g.isLoading=!0,rt}}},Ll=El(zl),Dl=t=>(e,n,s)=>(s.revalidateOnFocus=!1,s.revalidateIfStale=!1,s.revalidateOnReconnect=!1,t(e,n,s)),$l=Nl(Ll,Dl),Ol=8;function Xi(t,e,n,s,i,a){let r={...n},u=[];for(let c=i+(a?1:0);a?c<s.length:c>=0;a?c++:c--){const d=Number(s[c].tick),h={liquidityActive:r.liquidityActive,tick:d,liquidityNet:BigInt(s[c].liquidityNet),price0:Nt.tickIndexToPrice(d,t.decimals,e.decimals).toFixed(Ol)};a?h.liquidityActive=r.liquidityActive+BigInt(s[c].liquidityNet):!a&&r.liquidityNet!==0n&&(h.liquidityActive=r.liquidityActive-r.liquidityNet),u.push(h),r=h}return a||(u=u.reverse()),u}const Fl=8,Bl=(t,e)=>t!==void 0&&e?Math.floor(t/Mi[e])*Mi[e]:void 0;function Hl(t){const e=Fn(qo);Dr();const n=d=>{if(console.log("getTicks args: ",d),console.log("getTicks args?.url: ",d==null?void 0:d.url),!!t)return $r(d==null?void 0:d.url,{id:d.id})},{data:s,error:i,isLoading:a,mutate:r}=$l({url:e,id:t},n),u=()=>{r()},c=_.useMemo(()=>{const d=[];if(console.log("ticksData data: ",s),console.log("ticksData id: ",t),s&&(s!=null&&s.ticks))return console.log("ticksData data?.ticks: ",s==null?void 0:s.ticks),s==null||s.ticks.forEach(h=>{d.push({tick:Number(h.index),liquidityNet:h.liquidity_net,liquidityGross:h.liquidity_gross,id:h.id})}),d},[s]);return{isLoading:a,error:i,data:c,handleRefresh:u}}function ql(t){const e=Hl(t);return console.log("subgraphTickData: ",e),{isLoading:e.isLoading,error:e.error,ticks:e.data,handleRefresh:e.handleRefresh}}function Vl(t,e,n,s){const i=_.useMemo(()=>Bl(t==null?void 0:t.current_tick_index,s),[t,s]),a=_.useMemo(()=>{if(t)return Nt.getInitializableTickIndex(qn,t.tick_spacing)},[t]),r=_.useMemo(()=>{if(t)return Nt.getInitializableTickIndex(Vn,t.tick_spacing)},[t]),{isLoading:u,error:c,ticks:d,handleRefresh:h}=ql(t==null?void 0:t.pool_address);return _.useMemo(()=>{if(!e||!n||i===void 0||d===void 0||!d||(d==null?void 0:d.length)===0||u||!a||!r)return{isLoading:u,error:c,activeTick:i,data:void 0,handleRefresh:h};const l=e,p=n;console.log("🚀 ~ file: usePoolTickData.ts:177 ~ returnuseMemo ~ newTicks start:");const f=d;console.log("🚀 ~ file: usePoolTickData.ts:177 ~ returnuseMemo ~ newTicks:",f),console.log("🚀 ~ file: usePoolTickData.ts:177 ~ returnuseMemo ~ activeTick:",i);const w=f.findIndex(({tick:j})=>Number(j)>i)-1;if(w<0)return{isLoading:u,error:c,activeTick:i,data:void 0,handleRefresh:h};const b=(t==null?void 0:t.liquidity)??0,x={liquidityActive:BigInt(b??0),tick:i,liquidityNet:Number(d[w].tick)===i?BigInt(d[w].liquidityNet):0n,price0:Nt.tickIndexToPrice(i,l.decimals,p.decimals).toFixed(Fl)},m=Xi(l,p,x,f,w,!0),T=Xi(l,p,x,f,w,!1).concat(x).concat(m);return console.log("🚀 ~ file: usePoolTickData.ts:215 ~ returnuseMemo ~ ticksProcessed:",T),{isLoading:u,error:c,activeTick:i,data:T,handleRefresh:h}},[e,n,i,t,d,u,c,a,r])}function Ul({contractPoolInfo:t,currencyA:e,currencyB:n,feeAmount:s}){const{isLoading:i,error:a,data:r,handleRefresh:u}=Vl(t,e,n,s),c=_.useCallback(()=>{if(console.log("🚀 ~ file: useDepthChartData.ts:22 ~ formatData ~ data:",r),!r||!(r!=null&&r.length))return[];const d=[];for(let h=0;h<r.length;h++){const l=r[h],p={depth:parseFloat(l.liquidityActive.toString()),price:parseFloat(l.price0)};p.depth>=0&&d.push(p)}return d},[r]);return _.useMemo(()=>({isLoading:i,error:a,formattedData:i?void 0:c(),handleRefresh:u}),[i,a,c])}function Wl(t){return t}var us=1,pn=2,zs=3,ln=4,Ai=1e-6;function Pl(t){return"translate("+t+",0)"}function Yl(t){return"translate(0,"+t+")"}function Gl(t){return e=>+t(e)}function Xl(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Al(){return!this.__axis}function ua(t,e){var n=[],s=null,i=null,a=6,r=6,u=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,d=t===us||t===ln?-1:1,h=t===ln||t===pn?"x":"y",l=t===us||t===zs?Pl:Yl;function p(f){var w=s??(e.ticks?e.ticks.apply(e,n):e.domain()),b=i??(e.tickFormat?e.tickFormat.apply(e,n):Wl),x=Math.max(a,0)+u,m=e.range(),S=+m[0]+c,T=+m[m.length-1]+c,j=(e.bandwidth?Xl:Gl)(e.copy(),c),E=f.selection?f.selection():f,M=E.selectAll(".domain").data([null]),N=E.selectAll(".tick").data(w,e).order(),C=N.exit(),$=N.enter().append("g").attr("class","tick"),H=N.select("line"),P=N.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),N=N.merge($),H=H.merge($.append("line").attr("stroke","currentColor").attr(h+"2",d*a)),P=P.merge($.append("text").attr("fill","currentColor").attr(h,d*x).attr("dy",t===us?"0em":t===zs?"0.71em":"0.32em")),f!==E&&(M=M.transition(f),N=N.transition(f),H=H.transition(f),P=P.transition(f),C=C.transition(f).attr("opacity",Ai).attr("transform",function(W){return isFinite(W=j(W))?l(W+c):this.getAttribute("transform")}),$.attr("opacity",Ai).attr("transform",function(W){var L=this.parentNode.__axis;return l((L&&isFinite(L=L(W))?L:j(W))+c)})),C.remove(),M.attr("d",t===ln||t===pn?r?"M"+d*r+","+S+"H"+c+"V"+T+"H"+d*r:"M"+c+","+S+"V"+T:r?"M"+S+","+d*r+"V"+c+"H"+T+"V"+d*r:"M"+S+","+c+"H"+T),N.attr("opacity",1).attr("transform",function(W){return l(j(W)+c)}),H.attr(h+"2",d*a),P.attr(h,d*x).text(b),E.filter(Al).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===pn?"start":t===ln?"end":"middle"),E.each(function(){this.__axis=j})}return p.scale=function(f){return arguments.length?(e=f,p):e},p.ticks=function(){return n=Array.from(arguments),p},p.tickArguments=function(f){return arguments.length?(n=f==null?[]:Array.from(f),p):n.slice()},p.tickValues=function(f){return arguments.length?(s=f==null?null:Array.from(f),p):s&&s.slice()},p.tickFormat=function(f){return arguments.length?(i=f,p):i},p.tickSize=function(f){return arguments.length?(a=r=+f,p):a},p.tickSizeInner=function(f){return arguments.length?(a=+f,p):a},p.tickSizeOuter=function(f){return arguments.length?(r=+f,p):r},p.tickPadding=function(f){return arguments.length?(u=+f,p):u},p.offset=function(f){return arguments.length?(c=+f,p):c},p}function Kl(t){return ua(pn,t)}function da(t){return ua(zs,t)}var Zl={value:()=>{}};function Yn(){for(var t=0,e=arguments.length,n={},s;t<e;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new xn(n)}function xn(t){this._=t}function Jl(t,e){return t.trim().split(/^|\s+/).map(function(n){var s="",i=n.indexOf(".");if(i>=0&&(s=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}xn.prototype=Yn.prototype={constructor:xn,on:function(t,e){var n=this._,s=Jl(t+"",n),i,a=-1,r=s.length;if(arguments.length<2){for(;++a<r;)if((i=(t=s[a]).type)&&(i=Ql(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<r;)if(i=(t=s[a]).type)n[i]=Ki(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ki(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new xn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),s=0,i,a;s<i;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],s=0,i=a.length;s<i;++s)a[s].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],i=0,a=s.length;i<a;++i)s[i].value.apply(e,n)}};function Ql(t,e){for(var n=0,s=t.length,i;n<s;++n)if((i=t[n]).name===e)return i.value}function Ki(t,e,n){for(var s=0,i=t.length;s<i;++s)if(t[s].name===e){t[s]=Zl,t=t.slice(0,s).concat(t.slice(s+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ls="http://www.w3.org/1999/xhtml";const Zi={svg:"http://www.w3.org/2000/svg",xhtml:Ls,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Zi.hasOwnProperty(e)?{space:Zi[e],local:t}:t}function Il(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ls&&e.documentElement.namespaceURI===Ls?e.createElement(t):e.createElementNS(n,t)}}function tu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ha(t){var e=Gn(t);return(e.local?tu:Il)(e)}function eu(){}function si(t){return t==null?eu:function(){return this.querySelector(t)}}function nu(t){typeof t!="function"&&(t=si(t));for(var e=this._groups,n=e.length,s=new Array(n),i=0;i<n;++i)for(var a=e[i],r=a.length,u=s[i]=new Array(r),c,d,h=0;h<r;++h)(c=a[h])&&(d=t.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d);return new $t(s,this._parents)}function su(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function iu(){return[]}function fa(t){return t==null?iu:function(){return this.querySelectorAll(t)}}function ru(t){return function(){return su(t.apply(this,arguments))}}function au(t){typeof t=="function"?t=ru(t):t=fa(t);for(var e=this._groups,n=e.length,s=[],i=[],a=0;a<n;++a)for(var r=e[a],u=r.length,c,d=0;d<u;++d)(c=r[d])&&(s.push(t.call(c,c.__data__,d,r)),i.push(c));return new $t(s,i)}function pa(t){return function(){return this.matches(t)}}function xa(t){return function(e){return e.matches(t)}}var ou=Array.prototype.find;function cu(t){return function(){return ou.call(this.children,t)}}function lu(){return this.firstElementChild}function uu(t){return this.select(t==null?lu:cu(typeof t=="function"?t:xa(t)))}var du=Array.prototype.filter;function hu(){return Array.from(this.children)}function fu(t){return function(){return du.call(this.children,t)}}function pu(t){return this.selectAll(t==null?hu:fu(typeof t=="function"?t:xa(t)))}function xu(t){typeof t!="function"&&(t=pa(t));for(var e=this._groups,n=e.length,s=new Array(n),i=0;i<n;++i)for(var a=e[i],r=a.length,u=s[i]=[],c,d=0;d<r;++d)(c=a[d])&&t.call(c,c.__data__,d,a)&&u.push(c);return new $t(s,this._parents)}function ga(t){return new Array(t.length)}function gu(){return new $t(this._enter||this._groups.map(ga),this._parents)}function En(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}En.prototype={constructor:En,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function mu(t){return function(){return t}}function yu(t,e,n,s,i,a){for(var r=0,u,c=e.length,d=a.length;r<d;++r)(u=e[r])?(u.__data__=a[r],s[r]=u):n[r]=new En(t,a[r]);for(;r<c;++r)(u=e[r])&&(i[r]=u)}function _u(t,e,n,s,i,a,r){var u,c,d=new Map,h=e.length,l=a.length,p=new Array(h),f;for(u=0;u<h;++u)(c=e[u])&&(p[u]=f=r.call(c,c.__data__,u,e)+"",d.has(f)?i[u]=c:d.set(f,c));for(u=0;u<l;++u)f=r.call(t,a[u],u,a)+"",(c=d.get(f))?(s[u]=c,c.__data__=a[u],d.delete(f)):n[u]=new En(t,a[u]);for(u=0;u<h;++u)(c=e[u])&&d.get(p[u])===c&&(i[u]=c)}function vu(t){return t.__data__}function wu(t,e){if(!arguments.length)return Array.from(this,vu);var n=e?_u:yu,s=this._parents,i=this._groups;typeof t!="function"&&(t=mu(t));for(var a=i.length,r=new Array(a),u=new Array(a),c=new Array(a),d=0;d<a;++d){var h=s[d],l=i[d],p=l.length,f=ku(t.call(h,h&&h.__data__,d,s)),w=f.length,b=u[d]=new Array(w),x=r[d]=new Array(w),m=c[d]=new Array(p);n(h,l,b,x,m,f,e);for(var S=0,T=0,j,E;S<w;++S)if(j=b[S]){for(S>=T&&(T=S+1);!(E=x[T])&&++T<w;);j._next=E||null}}return r=new $t(r,s),r._enter=u,r._exit=c,r}function ku(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bu(){return new $t(this._exit||this._groups.map(ga),this._parents)}function Tu(t,e,n){var s=this.enter(),i=this,a=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),s&&i?s.merge(i).order():i}function Su(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,i=n.length,a=s.length,r=Math.min(i,a),u=new Array(i),c=0;c<r;++c)for(var d=n[c],h=s[c],l=d.length,p=u[c]=new Array(l),f,w=0;w<l;++w)(f=d[w]||h[w])&&(p[w]=f);for(;c<i;++c)u[c]=n[c];return new $t(u,this._parents)}function ju(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s=t[e],i=s.length-1,a=s[i],r;--i>=0;)(r=s[i])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function Cu(t){t||(t=Ru);function e(l,p){return l&&p?t(l.__data__,p.__data__):!l-!p}for(var n=this._groups,s=n.length,i=new Array(s),a=0;a<s;++a){for(var r=n[a],u=r.length,c=i[a]=new Array(u),d,h=0;h<u;++h)(d=r[h])&&(c[h]=d);c.sort(e)}return new $t(i,this._parents).order()}function Ru(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Eu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Mu(){return Array.from(this)}function Nu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],i=0,a=s.length;i<a;++i){var r=s[i];if(r)return r}return null}function zu(){let t=0;for(const e of this)++t;return t}function Lu(){return!this.node()}function Du(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var i=e[n],a=0,r=i.length,u;a<r;++a)(u=i[a])&&t.call(u,u.__data__,a,i);return this}function $u(t){return function(){this.removeAttribute(t)}}function Ou(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fu(t,e){return function(){this.setAttribute(t,e)}}function Bu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Hu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function qu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Vu(t,e){var n=Gn(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((e==null?n.local?Ou:$u:typeof e=="function"?n.local?qu:Hu:n.local?Bu:Fu)(n,e))}function ma(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Uu(t){return function(){this.style.removeProperty(t)}}function Wu(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Pu(t,e,n){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Yu(t,e,n){return arguments.length>1?this.each((e==null?Uu:typeof e=="function"?Pu:Wu)(t,e,n??"")):je(this.node(),t)}function je(t,e){return t.style.getPropertyValue(e)||ma(t).getComputedStyle(t,null).getPropertyValue(e)}function Gu(t){return function(){delete this[t]}}function Xu(t,e){return function(){this[t]=e}}function Au(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ku(t,e){return arguments.length>1?this.each((e==null?Gu:typeof e=="function"?Au:Xu)(t,e)):this.node()[t]}function ya(t){return t.trim().split(/^|\s+/)}function ii(t){return t.classList||new _a(t)}function _a(t){this._node=t,this._names=ya(t.getAttribute("class")||"")}_a.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function va(t,e){for(var n=ii(t),s=-1,i=e.length;++s<i;)n.add(e[s])}function wa(t,e){for(var n=ii(t),s=-1,i=e.length;++s<i;)n.remove(e[s])}function Zu(t){return function(){va(this,t)}}function Ju(t){return function(){wa(this,t)}}function Qu(t,e){return function(){(e.apply(this,arguments)?va:wa)(this,t)}}function Iu(t,e){var n=ya(t+"");if(arguments.length<2){for(var s=ii(this.node()),i=-1,a=n.length;++i<a;)if(!s.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Qu:e?Zu:Ju)(n,e))}function td(){this.textContent=""}function ed(t){return function(){this.textContent=t}}function nd(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function sd(t){return arguments.length?this.each(t==null?td:(typeof t=="function"?nd:ed)(t)):this.node().textContent}function id(){this.innerHTML=""}function rd(t){return function(){this.innerHTML=t}}function ad(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function od(t){return arguments.length?this.each(t==null?id:(typeof t=="function"?ad:rd)(t)):this.node().innerHTML}function cd(){this.nextSibling&&this.parentNode.appendChild(this)}function ld(){return this.each(cd)}function ud(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dd(){return this.each(ud)}function hd(t){var e=typeof t=="function"?t:ha(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function fd(){return null}function pd(t,e){var n=typeof t=="function"?t:ha(t),s=e==null?fd:typeof e=="function"?e:si(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function xd(){var t=this.parentNode;t&&t.removeChild(this)}function gd(){return this.each(xd)}function md(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yd(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _d(t){return this.select(t?yd:md)}function vd(t){return arguments.length?this.property("__data__",t):this.node().__data__}function wd(t){return function(e){t.call(this,e,this.__data__)}}function kd(t){return t.trim().split(/^|\s+/).map(function(e){var n="",s=e.indexOf(".");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{type:e,name:n}})}function bd(t){return function(){var e=this.__on;if(e){for(var n=0,s=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++s]=a;++s?e.length=s:delete this.__on}}}function Td(t,e,n){return function(){var s=this.__on,i,a=wd(e);if(s){for(var r=0,u=s.length;r<u;++r)if((i=s[r]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},s?s.push(i):this.__on=[i]}}function Sd(t,e,n){var s=kd(t+""),i,a=s.length,r;if(arguments.length<2){var u=this.node().__on;if(u){for(var c=0,d=u.length,h;c<d;++c)for(i=0,h=u[c];i<a;++i)if((r=s[i]).type===h.type&&r.name===h.name)return h.value}return}for(u=e?Td:bd,i=0;i<a;++i)this.each(u(s[i],e,n));return this}function ka(t,e,n){var s=ma(t),i=s.CustomEvent;typeof i=="function"?i=new i(e,n):(i=s.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function jd(t,e){return function(){return ka(this,t,e)}}function Cd(t,e){return function(){return ka(this,t,e.apply(this,arguments))}}function Rd(t,e){return this.each((typeof e=="function"?Cd:jd)(t,e))}function*Ed(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],i=0,a=s.length,r;i<a;++i)(r=s[i])&&(yield r)}var ba=[null];function $t(t,e){this._groups=t,this._parents=e}function Ie(){return new $t([[document.documentElement]],ba)}function Md(){return this}$t.prototype=Ie.prototype={constructor:$t,select:nu,selectAll:au,selectChild:uu,selectChildren:pu,filter:xu,data:wu,enter:gu,exit:bu,join:Tu,merge:Su,selection:Md,order:ju,sort:Cu,call:Eu,nodes:Mu,node:Nu,size:zu,empty:Lu,each:Du,attr:Vu,style:Yu,property:Ku,classed:Iu,text:sd,html:od,raise:ld,lower:dd,append:hd,insert:pd,remove:gd,clone:_d,datum:vd,on:Sd,dispatch:Rd,[Symbol.iterator]:Ed};function yt(t){return typeof t=="string"?new $t([[document.querySelector(t)]],[document.documentElement]):new $t([[t]],ba)}function Nd(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Pt(t,e){if(t=Nd(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ds={capture:!0,passive:!1};function $s(t){t.preventDefault(),t.stopImmediatePropagation()}function Ta(t){var e=t.document.documentElement,n=yt(t).on("dragstart.drag",$s,Ds);"onselectstart"in e?n.on("selectstart.drag",$s,Ds):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Sa(t,e){var n=t.document.documentElement,s=yt(t).on("dragstart.drag",null);e&&(s.on("click.drag",$s,Ds),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ce=0,Be=0,Oe=0,ja=1e3,Mn,He,Nn=0,ge=0,Xn=0,Ke=typeof performance=="object"&&performance.now?performance:Date,Ca=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ri(){return ge||(Ca(zd),ge=Ke.now()+Xn)}function zd(){ge=0}function zn(){this._call=this._time=this._next=null}zn.prototype=Ra.prototype={constructor:zn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ri():+n)+(e==null?0:+e),!this._next&&He!==this&&(He?He._next=this:Mn=this,He=this),this._call=t,this._time=n,Os()},stop:function(){this._call&&(this._call=null,this._time=1/0,Os())}};function Ra(t,e,n){var s=new zn;return s.restart(t,e,n),s}function Ld(){ri(),++Ce;for(var t=Mn,e;t;)(e=ge-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ce}function Ji(){ge=(Nn=Ke.now())+Xn,Ce=Be=0;try{Ld()}finally{Ce=0,$d(),ge=0}}function Dd(){var t=Ke.now(),e=t-Nn;e>ja&&(Xn-=e,Nn=t)}function $d(){for(var t,e=Mn,n,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Mn=n);He=t,Os(s)}function Os(t){if(!Ce){Be&&(Be=clearTimeout(Be));var e=t-ge;e>24?(t<1/0&&(Be=setTimeout(Ji,t-Ke.now()-Xn)),Oe&&(Oe=clearInterval(Oe))):(Oe||(Nn=Ke.now(),Oe=setInterval(Dd,ja)),Ce=1,Ca(Ji))}}function Qi(t,e,n){var s=new zn;return e=e==null?0:+e,s.restart(i=>{s.stop(),t(i+e)},e,n),s}var Od=Yn("start","end","cancel","interrupt"),Fd=[],Ea=0,Ii=1,Fs=2,gn=3,tr=4,Bs=5,mn=6;function An(t,e,n,s,i,a){var r=t.__transition;if(!r)t.__transition={};else if(n in r)return;Bd(t,n,{name:e,index:s,group:i,on:Od,tween:Fd,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ea})}function ai(t,e){var n=Vt(t,e);if(n.state>Ea)throw new Error("too late; already scheduled");return n}function Xt(t,e){var n=Vt(t,e);if(n.state>gn)throw new Error("too late; already running");return n}function Vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Bd(t,e,n){var s=t.__transition,i;s[e]=n,n.timer=Ra(a,0,n.time);function a(d){n.state=Ii,n.timer.restart(r,n.delay,n.time),n.delay<=d&&r(d-n.delay)}function r(d){var h,l,p,f;if(n.state!==Ii)return c();for(h in s)if(f=s[h],f.name===n.name){if(f.state===gn)return Qi(r);f.state===tr?(f.state=mn,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete s[h]):+h<e&&(f.state=mn,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete s[h])}if(Qi(function(){n.state===gn&&(n.state=tr,n.timer.restart(u,n.delay,n.time),u(d))}),n.state=Fs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Fs){for(n.state=gn,i=new Array(p=n.tween.length),h=0,l=-1;h<p;++h)(f=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=f);i.length=l+1}}function u(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=Bs,1),l=-1,p=i.length;++l<p;)i[l].call(t,h);n.state===Bs&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=mn,n.timer.stop(),delete s[e];for(var d in s)return;delete t.__transition}}function Te(t,e){var n=t.__transition,s,i,a=!0,r;if(n){e=e==null?null:e+"";for(r in n){if((s=n[r]).name!==e){a=!1;continue}i=s.state>Fs&&s.state<Bs,s.state=mn,s.timer.stop(),s.on.call(i?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[r]}a&&delete t.__transition}}function Hd(t){return this.each(function(){Te(this,t)})}function qd(t,e){var n,s;return function(){var i=Xt(this,t),a=i.tween;if(a!==n){s=n=a;for(var r=0,u=s.length;r<u;++r)if(s[r].name===e){s=s.slice(),s.splice(r,1);break}}i.tween=s}}function Vd(t,e,n){var s,i;if(typeof n!="function")throw new Error;return function(){var a=Xt(this,t),r=a.tween;if(r!==s){i=(s=r).slice();for(var u={name:e,value:n},c=0,d=i.length;c<d;++c)if(i[c].name===e){i[c]=u;break}c===d&&i.push(u)}a.tween=i}}function Ud(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s=Vt(this.node(),n).tween,i=0,a=s.length,r;i<a;++i)if((r=s[i]).name===t)return r.value;return null}return this.each((e==null?qd:Vd)(n,t,e))}function oi(t,e,n){var s=t._id;return t.each(function(){var i=Xt(this,s);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Vt(i,s).value[e]}}function Ma(t,e){var n;return(typeof e=="number"?ue:e instanceof zi?Li:(n=zi(e))?(e=n,Li):rc)(t,e)}function Wd(t){return function(){this.removeAttribute(t)}}function Pd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yd(t,e,n){var s,i=n+"",a;return function(){var r=this.getAttribute(t);return r===i?null:r===s?a:a=e(s=r,n)}}function Gd(t,e,n){var s,i=n+"",a;return function(){var r=this.getAttributeNS(t.space,t.local);return r===i?null:r===s?a:a=e(s=r,n)}}function Xd(t,e,n){var s,i,a;return function(){var r,u=n(this),c;return u==null?void this.removeAttribute(t):(r=this.getAttribute(t),c=u+"",r===c?null:r===s&&c===i?a:(i=c,a=e(s=r,u)))}}function Ad(t,e,n){var s,i,a;return function(){var r,u=n(this),c;return u==null?void this.removeAttributeNS(t.space,t.local):(r=this.getAttributeNS(t.space,t.local),c=u+"",r===c?null:r===s&&c===i?a:(i=c,a=e(s=r,u)))}}function Kd(t,e){var n=Gn(t),s=n==="transform"?Dc:Ma;return this.attrTween(t,typeof e=="function"?(n.local?Ad:Xd)(n,s,oi(this,"attr."+t,e)):e==null?(n.local?Pd:Wd)(n):(n.local?Gd:Yd)(n,s,e))}function Zd(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Jd(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Qd(t,e){var n,s;function i(){var a=e.apply(this,arguments);return a!==s&&(n=(s=a)&&Jd(t,a)),n}return i._value=e,i}function Id(t,e){var n,s;function i(){var a=e.apply(this,arguments);return a!==s&&(n=(s=a)&&Zd(t,a)),n}return i._value=e,i}function th(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var s=Gn(t);return this.tween(n,(s.local?Qd:Id)(s,e))}function eh(t,e){return function(){ai(this,t).delay=+e.apply(this,arguments)}}function nh(t,e){return e=+e,function(){ai(this,t).delay=e}}function sh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eh:nh)(e,t)):Vt(this.node(),e).delay}function ih(t,e){return function(){Xt(this,t).duration=+e.apply(this,arguments)}}function rh(t,e){return e=+e,function(){Xt(this,t).duration=e}}function ah(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ih:rh)(e,t)):Vt(this.node(),e).duration}function oh(t,e){if(typeof e!="function")throw new Error;return function(){Xt(this,t).ease=e}}function ch(t){var e=this._id;return arguments.length?this.each(oh(e,t)):Vt(this.node(),e).ease}function lh(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Xt(this,t).ease=n}}function uh(t){if(typeof t!="function")throw new Error;return this.each(lh(this._id,t))}function dh(t){typeof t!="function"&&(t=pa(t));for(var e=this._groups,n=e.length,s=new Array(n),i=0;i<n;++i)for(var a=e[i],r=a.length,u=s[i]=[],c,d=0;d<r;++d)(c=a[d])&&t.call(c,c.__data__,d,a)&&u.push(c);return new ne(s,this._parents,this._name,this._id)}function hh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,i=n.length,a=Math.min(s,i),r=new Array(s),u=0;u<a;++u)for(var c=e[u],d=n[u],h=c.length,l=r[u]=new Array(h),p,f=0;f<h;++f)(p=c[f]||d[f])&&(l[f]=p);for(;u<s;++u)r[u]=e[u];return new ne(r,this._parents,this._name,this._id)}function fh(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ph(t,e,n){var s,i,a=fh(e)?ai:Xt;return function(){var r=a(this,t),u=r.on;u!==s&&(i=(s=u).copy()).on(e,n),r.on=i}}function xh(t,e){var n=this._id;return arguments.length<2?Vt(this.node(),n).on.on(t):this.each(ph(n,t,e))}function gh(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mh(){return this.on("end.remove",gh(this._id))}function yh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=si(t));for(var s=this._groups,i=s.length,a=new Array(i),r=0;r<i;++r)for(var u=s[r],c=u.length,d=a[r]=new Array(c),h,l,p=0;p<c;++p)(h=u[p])&&(l=t.call(h,h.__data__,p,u))&&("__data__"in h&&(l.__data__=h.__data__),d[p]=l,An(d[p],e,n,p,d,Vt(h,n)));return new ne(a,this._parents,e,n)}function _h(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fa(t));for(var s=this._groups,i=s.length,a=[],r=[],u=0;u<i;++u)for(var c=s[u],d=c.length,h,l=0;l<d;++l)if(h=c[l]){for(var p=t.call(h,h.__data__,l,c),f,w=Vt(h,n),b=0,x=p.length;b<x;++b)(f=p[b])&&An(f,e,n,b,p,w);a.push(p),r.push(h)}return new ne(a,r,e,n)}var vh=Ie.prototype.constructor;function wh(){return new vh(this._groups,this._parents)}function kh(t,e){var n,s,i;return function(){var a=je(this,t),r=(this.style.removeProperty(t),je(this,t));return a===r?null:a===n&&r===s?i:i=e(n=a,s=r)}}function Na(t){return function(){this.style.removeProperty(t)}}function bh(t,e,n){var s,i=n+"",a;return function(){var r=je(this,t);return r===i?null:r===s?a:a=e(s=r,n)}}function Th(t,e,n){var s,i,a;return function(){var r=je(this,t),u=n(this),c=u+"";return u==null&&(c=u=(this.style.removeProperty(t),je(this,t))),r===c?null:r===s&&c===i?a:(i=c,a=e(s=r,u))}}function Sh(t,e){var n,s,i,a="style."+e,r="end."+a,u;return function(){var c=Xt(this,t),d=c.on,h=c.value[a]==null?u||(u=Na(e)):void 0;(d!==n||i!==h)&&(s=(n=d).copy()).on(r,i=h),c.on=s}}function jh(t,e,n){var s=(t+="")=="transform"?Lc:Ma;return e==null?this.styleTween(t,kh(t,s)).on("end.style."+t,Na(t)):typeof e=="function"?this.styleTween(t,Th(t,s,oi(this,"style."+t,e))).each(Sh(this._id,t)):this.styleTween(t,bh(t,s,e),n).on("end.style."+t,null)}function Ch(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function Rh(t,e,n){var s,i;function a(){var r=e.apply(this,arguments);return r!==i&&(s=(i=r)&&Ch(t,r,n)),s}return a._value=e,a}function Eh(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,Rh(t,e,n??""))}function Mh(t){return function(){this.textContent=t}}function Nh(t){return function(){var e=t(this);this.textContent=e??""}}function zh(t){return this.tween("text",typeof t=="function"?Nh(oi(this,"text",t)):Mh(t==null?"":t+""))}function Lh(t){return function(e){this.textContent=t.call(this,e)}}function Dh(t){var e,n;function s(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Lh(i)),e}return s._value=t,s}function $h(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Dh(t))}function Oh(){for(var t=this._name,e=this._id,n=za(),s=this._groups,i=s.length,a=0;a<i;++a)for(var r=s[a],u=r.length,c,d=0;d<u;++d)if(c=r[d]){var h=Vt(c,e);An(c,t,n,d,r,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ne(s,this._parents,t,n)}function Fh(){var t,e,n=this,s=n._id,i=n.size();return new Promise(function(a,r){var u={value:r},c={value:function(){--i===0&&a()}};n.each(function(){var d=Xt(this,s),h=d.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(c)),d.on=e}),i===0&&a()})}var Bh=0;function ne(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function za(){return++Bh}var Zt=Ie.prototype;ne.prototype={constructor:ne,select:yh,selectAll:_h,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:dh,merge:hh,selection:wh,transition:Oh,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:xh,attr:Kd,attrTween:th,style:jh,styleTween:Eh,text:zh,textTween:$h,remove:mh,tween:Ud,delay:sh,duration:ah,ease:ch,easeVarying:uh,end:Fh,[Symbol.iterator]:Zt[Symbol.iterator]};function Hh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qh={time:null,delay:0,duration:250,ease:Hh};function Vh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Uh(t){var e,n;t instanceof ne?(e=t._id,t=t._name):(e=za(),(n=qh).time=ri(),t=t==null?null:t+"");for(var s=this._groups,i=s.length,a=0;a<i;++a)for(var r=s[a],u=r.length,c,d=0;d<u;++d)(c=r[d])&&An(c,t,e,d,r,n||Vh(c,e));return new ne(s,this._parents,t,e)}Ie.prototype.interrupt=Hd;Ie.prototype.transition=Uh;const ds=t=>()=>t;function Wh(t,{sourceEvent:e,target:n,selection:s,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:s,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Ph(t){t.stopImmediatePropagation()}function hs(t){t.preventDefault(),t.stopImmediatePropagation()}var er={name:"drag"},fs={name:"space"},_e={name:"handle"},ve={name:"center"};const{abs:nr,max:jt,min:Ct}=Math;function sr(t){return[+t[0],+t[1]]}function ir(t){return[sr(t[0]),sr(t[1])]}var yn={name:"x",handles:["w","e"].map(Ln),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},_n={name:"y",handles:["n","s"].map(Ln),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Jt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},rr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ar={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Yh={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Gh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ln(t){return{type:t}}function Xh(t){return!t.ctrlKey&&!t.button}function Ah(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Kh(){return navigator.maxTouchPoints||"ontouchstart"in this}function ps(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Zh(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Jh(){return La(yn)}function Qh(){return La(_n)}function La(t){var e=Ah,n=Xh,s=Kh,i=!0,a=Yn("start","brush","end"),r=6,u;function c(x){var m=x.property("__brush",b).selectAll(".overlay").data([Ln("overlay")]);m.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jt.overlay).merge(m).each(function(){var T=ps(this).extent;yt(this).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1])}),x.selectAll(".selection").data([Ln("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=x.selectAll(".handle").data(t.handles,function(T){return T.type});S.exit().remove(),S.enter().append("rect").attr("class",function(T){return"handle handle--"+T.type}).attr("cursor",function(T){return Jt[T.type]}),x.each(d).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(s).on("touchstart.brush",p).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(x,m,S){x.tween?x.on("start.brush",function(T){h(this,arguments).beforestart().start(T)}).on("interrupt.brush end.brush",function(T){h(this,arguments).end(T)}).tween("brush",function(){var T=this,j=T.__brush,E=h(T,arguments),M=j.selection,N=t.input(typeof m=="function"?m.apply(this,arguments):m,j.extent),C=ac(M,N);function $(H){j.selection=H===1&&N===null?null:C(H),d.call(T),E.brush()}return M!==null&&N!==null?$:$(1)}):x.each(function(){var T=this,j=arguments,E=T.__brush,M=t.input(typeof m=="function"?m.apply(T,j):m,E.extent),N=h(T,j).beforestart();Te(T),E.selection=M===null?null:M,d.call(T),N.start(S).brush(S).end(S)})},c.clear=function(x,m){c.move(x,null,m)};function d(){var x=yt(this),m=ps(this).selection;m?(x.selectAll(".selection").style("display",null).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1]),x.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?m[1][0]-r/2:m[0][0]-r/2}).attr("y",function(S){return S.type[0]==="s"?m[1][1]-r/2:m[0][1]-r/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?m[1][0]-m[0][0]+r:r}).attr("height",function(S){return S.type==="e"||S.type==="w"?m[1][1]-m[0][1]+r:r})):x.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(x,m,S){var T=x.__brush.emitter;return T&&(!S||!T.clean)?T:new l(x,m,S)}function l(x,m,S){this.that=x,this.args=m,this.state=x.__brush,this.active=0,this.clean=S}l.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(x,m){return this.starting?(this.starting=!1,this.emit("start",x,m)):this.emit("brush",x),this},brush:function(x,m){return this.emit("brush",x,m),this},end:function(x,m){return--this.active===0&&(delete this.state.emitter,this.emit("end",x,m)),this},emit:function(x,m,S){var T=yt(this.that).datum();a.call(x,this.that,new Wh(x,{sourceEvent:m,target:c,selection:t.output(this.state.selection),mode:S,dispatch:a}),T)}};function p(x){if(u&&!x.touches||!n.apply(this,arguments))return;var m=this,S=x.target.__data__.type,T=(i&&x.metaKey?S="overlay":S)==="selection"?er:i&&x.altKey?ve:_e,j=t===_n?null:Yh[S],E=t===yn?null:Gh[S],M=ps(m),N=M.extent,C=M.selection,$=N[0][0],H,P,W=N[0][1],L,g,v=N[1][0],y,k,R=N[1][1],z,D,O=0,F=0,ft,et=j&&E&&i&&x.shiftKey,Y,K,G=Array.from(x.touches||[x],q=>{const A=q.identifier;return q=Pt(q,m),q.point0=q.slice(),q.identifier=A,q});Te(m);var st=h(m,arguments,!0).beforestart();if(S==="overlay"){C&&(ft=!0);const q=[G[0],G[1]||G[0]];M.selection=C=[[H=t===_n?$:Ct(q[0][0],q[1][0]),L=t===yn?W:Ct(q[0][1],q[1][1])],[y=t===_n?v:jt(q[0][0],q[1][0]),z=t===yn?R:jt(q[0][1],q[1][1])]],G.length>1&&Z(x)}else H=C[0][0],L=C[0][1],y=C[1][0],z=C[1][1];P=H,g=L,k=y,D=z;var rt=yt(m).attr("pointer-events","none"),pt=rt.selectAll(".overlay").attr("cursor",Jt[S]);if(x.touches)st.moved=X,st.ended=xt;else{var gt=yt(x.view).on("mousemove.brush",X,!0).on("mouseup.brush",xt,!0);i&&gt.on("keydown.brush",nt,!0).on("keyup.brush",vt,!0),Ta(x.view)}d.call(m),st.start(x,T.name);function X(q){for(const A of q.changedTouches||[q])for(const ot of G)ot.identifier===A.identifier&&(ot.cur=Pt(A,m));if(et&&!Y&&!K&&G.length===1){const A=G[0];nr(A.cur[0]-A[0])>nr(A.cur[1]-A[1])?K=!0:Y=!0}for(const A of G)A.cur&&(A[0]=A.cur[0],A[1]=A.cur[1]);ft=!0,hs(q),Z(q)}function Z(q){const A=G[0],ot=A.point0;var ht;switch(O=A[0]-ot[0],F=A[1]-ot[1],T){case fs:case er:{j&&(O=jt($-H,Ct(v-y,O)),P=H+O,k=y+O),E&&(F=jt(W-L,Ct(R-z,F)),g=L+F,D=z+F);break}case _e:{G[1]?(j&&(P=jt($,Ct(v,G[0][0])),k=jt($,Ct(v,G[1][0])),j=1),E&&(g=jt(W,Ct(R,G[0][1])),D=jt(W,Ct(R,G[1][1])),E=1)):(j<0?(O=jt($-H,Ct(v-H,O)),P=H+O,k=y):j>0&&(O=jt($-y,Ct(v-y,O)),P=H,k=y+O),E<0?(F=jt(W-L,Ct(R-L,F)),g=L+F,D=z):E>0&&(F=jt(W-z,Ct(R-z,F)),g=L,D=z+F));break}case ve:{j&&(P=jt($,Ct(v,H-O*j)),k=jt($,Ct(v,y+O*j))),E&&(g=jt(W,Ct(R,L-F*E)),D=jt(W,Ct(R,z+F*E)));break}}k<P&&(j*=-1,ht=H,H=y,y=ht,ht=P,P=k,k=ht,S in rr&&pt.attr("cursor",Jt[S=rr[S]])),D<g&&(E*=-1,ht=L,L=z,z=ht,ht=g,g=D,D=ht,S in ar&&pt.attr("cursor",Jt[S=ar[S]])),M.selection&&(C=M.selection),Y&&(P=C[0][0],k=C[1][0]),K&&(g=C[0][1],D=C[1][1]),(C[0][0]!==P||C[0][1]!==g||C[1][0]!==k||C[1][1]!==D)&&(M.selection=[[P,g],[k,D]],d.call(m),st.brush(q,T.name))}function xt(q){if(Ph(q),q.touches){if(q.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Sa(q.view,ft),gt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);rt.attr("pointer-events","all"),pt.attr("cursor",Jt.overlay),M.selection&&(C=M.selection),Zh(C)&&(M.selection=null,d.call(m)),st.end(q,T.name)}function nt(q){switch(q.keyCode){case 16:{et=j&&E;break}case 18:{T===_e&&(j&&(y=k-O*j,H=P+O*j),E&&(z=D-F*E,L=g+F*E),T=ve,Z(q));break}case 32:{(T===_e||T===ve)&&(j<0?y=k-O:j>0&&(H=P-O),E<0?z=D-F:E>0&&(L=g-F),T=fs,pt.attr("cursor",Jt.selection),Z(q));break}default:return}hs(q)}function vt(q){switch(q.keyCode){case 16:{et&&(Y=K=et=!1,Z(q));break}case 18:{T===ve&&(j<0?y=k:j>0&&(H=P),E<0?z=D:E>0&&(L=g),T=_e,Z(q));break}case 32:{T===fs&&(q.altKey?(j&&(y=k-O*j,H=P+O*j),E&&(z=D-F*E,L=g+F*E),T=ve):(j<0?y=k:j>0&&(H=P),E<0?z=D:E>0&&(L=g),T=_e),pt.attr("cursor",Jt[S]),Z(q));break}default:return}hs(q)}}function f(x){h(this,arguments).moved(x)}function w(x){h(this,arguments).ended(x)}function b(){var x=this.__brush||{selection:null};return x.extent=ir(e.apply(this,arguments)),x.dim=t,x}return c.extent=function(x){return arguments.length?(e=typeof x=="function"?x:ds(ir(x)),c):e},c.filter=function(x){return arguments.length?(n=typeof x=="function"?x:ds(!!x),c):n},c.touchable=function(x){return arguments.length?(s=typeof x=="function"?x:ds(!!x),c):s},c.handleSize=function(x){return arguments.length?(r=+x,c):r},c.keyModifiers=function(x){return arguments.length?(i=!!x,c):i},c.on=function(){var x=a.on.apply(a,arguments);return x===a?c:x},c}const un=t=>()=>t;function Ih(t,{sourceEvent:e,target:n,transform:s,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:i}})}function te(t,e,n){this.k=t,this.x=e,this.y=n}te.prototype={constructor:te,scale:function(t){return t===1?this:new te(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new te(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kn=new te(1,0,0);te.prototype;function xs(t){t.stopImmediatePropagation()}function Fe(t){t.preventDefault(),t.stopImmediatePropagation()}function tf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ef(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function or(){return this.__zoom||Kn}function nf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function sf(){return navigator.maxTouchPoints||"ontouchstart"in this}function rf(t,e,n){var s=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function Da(){var t=tf,e=ef,n=rf,s=nf,i=sf,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],u=250,c=Bc,d=Yn("start","zoom","end"),h,l,p,f=500,w=150,b=0,x=10;function m(g){g.property("__zoom",or).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",H).filter(i).on("touchstart.zoom",P).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(g,v,y,k){var R=g.selection?g.selection():g;R.property("__zoom",or),g!==R?E(g,v,y,k):R.interrupt().each(function(){M(this,arguments).event(k).start().zoom(null,typeof v=="function"?v.apply(this,arguments):v).end()})},m.scaleBy=function(g,v,y,k){m.scaleTo(g,function(){var R=this.__zoom.k,z=typeof v=="function"?v.apply(this,arguments):v;return R*z},y,k)},m.scaleTo=function(g,v,y,k){m.transform(g,function(){var R=e.apply(this,arguments),z=this.__zoom,D=y==null?j(R):typeof y=="function"?y.apply(this,arguments):y,O=z.invert(D),F=typeof v=="function"?v.apply(this,arguments):v;return n(T(S(z,F),D,O),R,r)},y,k)},m.translateBy=function(g,v,y,k){m.transform(g,function(){return n(this.__zoom.translate(typeof v=="function"?v.apply(this,arguments):v,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),r)},null,k)},m.translateTo=function(g,v,y,k,R){m.transform(g,function(){var z=e.apply(this,arguments),D=this.__zoom,O=k==null?j(z):typeof k=="function"?k.apply(this,arguments):k;return n(Kn.translate(O[0],O[1]).scale(D.k).translate(typeof v=="function"?-v.apply(this,arguments):-v,typeof y=="function"?-y.apply(this,arguments):-y),z,r)},k,R)};function S(g,v){return v=Math.max(a[0],Math.min(a[1],v)),v===g.k?g:new te(v,g.x,g.y)}function T(g,v,y){var k=v[0]-y[0]*g.k,R=v[1]-y[1]*g.k;return k===g.x&&R===g.y?g:new te(g.k,k,R)}function j(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function E(g,v,y,k){g.on("start.zoom",function(){M(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(k).end()}).tween("zoom",function(){var R=this,z=arguments,D=M(R,z).event(k),O=e.apply(R,z),F=y==null?j(O):typeof y=="function"?y.apply(R,z):y,ft=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),et=R.__zoom,Y=typeof v=="function"?v.apply(R,z):v,K=c(et.invert(F).concat(ft/et.k),Y.invert(F).concat(ft/Y.k));return function(G){if(G===1)G=Y;else{var st=K(G),rt=ft/st[2];G=new te(rt,F[0]-st[0]*rt,F[1]-st[1]*rt)}D.zoom(null,G)}})}function M(g,v,y){return!y&&g.__zooming||new N(g,v)}function N(g,v){this.that=g,this.args=v,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,v),this.taps=0}N.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,v){return this.mouse&&g!=="mouse"&&(this.mouse[1]=v.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=v.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=v.invert(this.touch1[0])),this.that.__zoom=v,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var v=yt(this.that).datum();d.call(g,this.that,new Ih(g,{sourceEvent:this.sourceEvent,target:m,type:g,transform:this.that.__zoom,dispatch:d}),v)}};function C(g,...v){if(!t.apply(this,arguments))return;var y=M(this,v).event(g),k=this.__zoom,R=Math.max(a[0],Math.min(a[1],k.k*Math.pow(2,s.apply(this,arguments)))),z=Pt(g);if(y.wheel)(y.mouse[0][0]!==z[0]||y.mouse[0][1]!==z[1])&&(y.mouse[1]=k.invert(y.mouse[0]=z)),clearTimeout(y.wheel);else{if(k.k===R)return;y.mouse=[z,k.invert(z)],Te(this),y.start()}Fe(g),y.wheel=setTimeout(D,w),y.zoom("mouse",n(T(S(k,R),y.mouse[0],y.mouse[1]),y.extent,r));function D(){y.wheel=null,y.end()}}function $(g,...v){if(p||!t.apply(this,arguments))return;var y=g.currentTarget,k=M(this,v,!0).event(g),R=yt(g.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",ft,!0),z=Pt(g,y),D=g.clientX,O=g.clientY;Ta(g.view),xs(g),k.mouse=[z,this.__zoom.invert(z)],Te(this),k.start();function F(et){if(Fe(et),!k.moved){var Y=et.clientX-D,K=et.clientY-O;k.moved=Y*Y+K*K>b}k.event(et).zoom("mouse",n(T(k.that.__zoom,k.mouse[0]=Pt(et,y),k.mouse[1]),k.extent,r))}function ft(et){R.on("mousemove.zoom mouseup.zoom",null),Sa(et.view,k.moved),Fe(et),k.event(et).end()}}function H(g,...v){if(t.apply(this,arguments)){var y=this.__zoom,k=Pt(g.changedTouches?g.changedTouches[0]:g,this),R=y.invert(k),z=y.k*(g.shiftKey?.5:2),D=n(T(S(y,z),k,R),e.apply(this,v),r);Fe(g),u>0?yt(this).transition().duration(u).call(E,D,k,g):yt(this).call(m.transform,D,k,g)}}function P(g,...v){if(t.apply(this,arguments)){var y=g.touches,k=y.length,R=M(this,v,g.changedTouches.length===k).event(g),z,D,O,F;for(xs(g),D=0;D<k;++D)O=y[D],F=Pt(O,this),F=[F,this.__zoom.invert(F),O.identifier],R.touch0?!R.touch1&&R.touch0[2]!==F[2]&&(R.touch1=F,R.taps=0):(R.touch0=F,z=!0,R.taps=1+!!h);h&&(h=clearTimeout(h)),z&&(R.taps<2&&(l=F[0],h=setTimeout(function(){h=null},f)),Te(this),R.start())}}function W(g,...v){if(this.__zooming){var y=M(this,v).event(g),k=g.changedTouches,R=k.length,z,D,O,F;for(Fe(g),z=0;z<R;++z)D=k[z],O=Pt(D,this),y.touch0&&y.touch0[2]===D.identifier?y.touch0[0]=O:y.touch1&&y.touch1[2]===D.identifier&&(y.touch1[0]=O);if(D=y.that.__zoom,y.touch1){var ft=y.touch0[0],et=y.touch0[1],Y=y.touch1[0],K=y.touch1[1],G=(G=Y[0]-ft[0])*G+(G=Y[1]-ft[1])*G,st=(st=K[0]-et[0])*st+(st=K[1]-et[1])*st;D=S(D,Math.sqrt(G/st)),O=[(ft[0]+Y[0])/2,(ft[1]+Y[1])/2],F=[(et[0]+K[0])/2,(et[1]+K[1])/2]}else if(y.touch0)O=y.touch0[0],F=y.touch0[1];else return;y.zoom("touch",n(T(D,O,F),y.extent,r))}}function L(g,...v){if(this.__zooming){var y=M(this,v).event(g),k=g.changedTouches,R=k.length,z,D;for(xs(g),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),z=0;z<R;++z)D=k[z],y.touch0&&y.touch0[2]===D.identifier?delete y.touch0:y.touch1&&y.touch1[2]===D.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(D=Pt(D,this),Math.hypot(l[0]-D[0],l[1]-D[1])<x)){var O=yt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return m.wheelDelta=function(g){return arguments.length?(s=typeof g=="function"?g:un(+g),m):s},m.filter=function(g){return arguments.length?(t=typeof g=="function"?g:un(!!g),m):t},m.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:un(!!g),m):i},m.extent=function(g){return arguments.length?(e=typeof g=="function"?g:un([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),m):e},m.scaleExtent=function(g){return arguments.length?(a[0]=+g[0],a[1]=+g[1],m):[a[0],a[1]]},m.translateExtent=function(g){return arguments.length?(r[0][0]=+g[0][0],r[1][0]=+g[1][0],r[0][1]=+g[0][1],r[1][1]=+g[1][1],m):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},m.constrain=function(g){return arguments.length?(n=g,m):n},m.duration=function(g){return arguments.length?(u=+g,m):u},m.interpolate=function(g){return arguments.length?(c=g,m):c},m.on=function(){var g=d.on.apply(d,arguments);return g===d?m:g},m.clickDistance=function(g){return arguments.length?(b=(g=+g)*g,m):Math.sqrt(b)},m.tapDistance=function(g){return arguments.length?(x=+g,m):x},m}var _t=(t=>(t.LOWER="LOWER",t.UPPER="UPPER",t))(_t||{});const Dn={[lt.LOWEST]:{initialMin:.99,initialMax:1.01,min:1e-5,max:1.5},[lt.LOW]:{initialMin:.8,initialMax:1.25,min:1e-5,max:1.5},[lt.MEDIUM]:{initialMin:.5,initialMax:1.5,min:1e-5,max:20},[lt.HIGH]:{initialMin:.5,initialMax:1.5,min:1e-5,max:20}};lt.LOWEST+"",lt.LOW+"",lt.MEDIUM+"",Dn[lt.MEDIUM],lt.HIGH+"",Dn[lt.HIGH];function af(t,e,n,s){for(var i=-1,a=t==null?0:t.length;++i<a;){var r=t[i];e(s,r,n(r),t)}return s}var of=af,cf=oc;function lf(t,e,n,s){return cf(t,function(i,a,r){e(s,i,n(i),r)}),s}var uf=lf,df=of,hf=uf,ff=cc,pf=lc;function xf(t,e){return function(n,s){var i=pf(n)?df:hf,a=e?e():{};return i(n,t,ff(s),a)}}var gf=xf,mf=gf,yf=mf(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),_f=yf;const vf=Vo(_f);var mt="-ms-",Ue="-moz-",at="-webkit-",$a="comm",Zn="rule",ci="decl",wf="@import",Oa="@keyframes",kf="@layer",Fa=Math.abs,li=String.fromCharCode,Hs=Object.assign;function bf(t,e){return Tt(t,0)^45?(((e<<2^Tt(t,0))<<2^Tt(t,1))<<2^Tt(t,2))<<2^Tt(t,3):0}function Ba(t){return t.trim()}function Qt(t,e){return(t=e.exec(t))?t[0]:t}function I(t,e,n){return t.replace(e,n)}function vn(t,e,n){return t.indexOf(e,n)}function Tt(t,e){return t.charCodeAt(e)|0}function Re(t,e,n){return t.slice(e,n)}function Yt(t){return t.length}function Ha(t){return t.length}function qe(t,e){return e.push(t),t}function Tf(t,e){return t.map(e).join("")}function cr(t,e){return t.filter(function(n){return!Qt(n,e)})}var Jn=1,Ee=1,qa=0,Bt=0,kt=0,Le="";function Qn(t,e,n,s,i,a,r,u){return{value:t,root:e,parent:n,type:s,props:i,children:a,line:Jn,column:Ee,length:r,return:"",siblings:u}}function se(t,e){return Hs(Qn("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function we(t){for(;t.root;)t=se(t.root,{children:[t]});qe(t,t.siblings)}function Sf(){return kt}function jf(){return kt=Bt>0?Tt(Le,--Bt):0,Ee--,kt===10&&(Ee=1,Jn--),kt}function qt(){return kt=Bt<qa?Tt(Le,Bt++):0,Ee++,kt===10&&(Ee=1,Jn++),kt}function fe(){return Tt(Le,Bt)}function wn(){return Bt}function In(t,e){return Re(Le,t,e)}function qs(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cf(t){return Jn=Ee=1,qa=Yt(Le=t),Bt=0,[]}function Rf(t){return Le="",t}function gs(t){return Ba(In(Bt-1,Vs(t===91?t+2:t===40?t+1:t)))}function Ef(t){for(;(kt=fe())&&kt<33;)qt();return qs(t)>2||qs(kt)>3?"":" "}function Mf(t,e){for(;--e&&qt()&&!(kt<48||kt>102||kt>57&&kt<65||kt>70&&kt<97););return In(t,wn()+(e<6&&fe()==32&&qt()==32))}function Vs(t){for(;qt();)switch(kt){case t:return Bt;case 34:case 39:t!==34&&t!==39&&Vs(kt);break;case 40:t===41&&Vs(t);break;case 92:qt();break}return Bt}function Nf(t,e){for(;qt()&&t+kt!==57;)if(t+kt===84&&fe()===47)break;return"/*"+In(e,Bt-1)+"*"+li(t===47?t:qt())}function zf(t){for(;!qs(fe());)qt();return In(t,Bt)}function Lf(t){return Rf(kn("",null,null,null,[""],t=Cf(t),0,[0],t))}function kn(t,e,n,s,i,a,r,u,c){for(var d=0,h=0,l=r,p=0,f=0,w=0,b=1,x=1,m=1,S=0,T="",j=i,E=a,M=s,N=T;x;)switch(w=S,S=qt()){case 40:if(w!=108&&Tt(N,l-1)==58){vn(N+=I(gs(S),"&","&\f"),"&\f",Fa(d?u[d-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:N+=gs(S);break;case 9:case 10:case 13:case 32:N+=Ef(w);break;case 92:N+=Mf(wn()-1,7);continue;case 47:switch(fe()){case 42:case 47:qe(Df(Nf(qt(),wn()),e,n,c),c);break;default:N+="/"}break;case 123*b:u[d++]=Yt(N)*m;case 125*b:case 59:case 0:switch(S){case 0:case 125:x=0;case 59+h:m==-1&&(N=I(N,/\f/g,"")),f>0&&Yt(N)-l&&qe(f>32?ur(N+";",s,n,l-1,c):ur(I(N," ","")+";",s,n,l-2,c),c);break;case 59:N+=";";default:if(qe(M=lr(N,e,n,d,h,i,u,T,j=[],E=[],l,a),a),S===123)if(h===0)kn(N,e,M,M,j,a,l,u,E);else switch(p===99&&Tt(N,3)===110?100:p){case 100:case 108:case 109:case 115:kn(t,M,M,s&&qe(lr(t,M,M,0,0,i,u,T,i,j=[],l,E),E),i,E,l,u,s?j:E);break;default:kn(N,M,M,M,[""],E,0,u,E)}}d=h=f=0,b=m=1,T=N="",l=r;break;case 58:l=1+Yt(N),f=w;default:if(b<1){if(S==123)--b;else if(S==125&&b++==0&&jf()==125)continue}switch(N+=li(S),S*b){case 38:m=h>0?1:(N+="\f",-1);break;case 44:u[d++]=(Yt(N)-1)*m,m=1;break;case 64:fe()===45&&(N+=gs(qt())),p=fe(),h=l=Yt(T=N+=zf(wn())),S++;break;case 45:w===45&&Yt(N)==2&&(b=0)}}return a}function lr(t,e,n,s,i,a,r,u,c,d,h,l){for(var p=i-1,f=i===0?a:[""],w=Ha(f),b=0,x=0,m=0;b<s;++b)for(var S=0,T=Re(t,p+1,p=Fa(x=r[b])),j=t;S<w;++S)(j=Ba(x>0?f[S]+" "+T:I(T,/&\f/g,f[S])))&&(c[m++]=j);return Qn(t,e,n,i===0?Zn:u,c,d,h,l)}function Df(t,e,n,s){return Qn(t,e,n,$a,li(Sf()),Re(t,2,-2),0,s)}function ur(t,e,n,s,i){return Qn(t,e,n,ci,Re(t,0,s),Re(t,s+1,-1),s,i)}function Va(t,e,n){switch(bf(t,e)){case 5103:return at+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return at+t+t;case 4789:return Ue+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return at+t+Ue+t+mt+t+t;case 5936:switch(Tt(t,e+11)){case 114:return at+t+mt+I(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return at+t+mt+I(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return at+t+mt+I(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return at+t+mt+t+t;case 6165:return at+t+mt+"flex-"+t+t;case 5187:return at+t+I(t,/(\w+).+(:[^]+)/,at+"box-$1$2"+mt+"flex-$1$2")+t;case 5443:return at+t+mt+"flex-item-"+I(t,/flex-|-self/g,"")+(Qt(t,/flex-|baseline/)?"":mt+"grid-row-"+I(t,/flex-|-self/g,""))+t;case 4675:return at+t+mt+"flex-line-pack"+I(t,/align-content|flex-|-self/g,"")+t;case 5548:return at+t+mt+I(t,"shrink","negative")+t;case 5292:return at+t+mt+I(t,"basis","preferred-size")+t;case 6060:return at+"box-"+I(t,"-grow","")+at+t+mt+I(t,"grow","positive")+t;case 4554:return at+I(t,/([^-])(transform)/g,"$1"+at+"$2")+t;case 6187:return I(I(I(t,/(zoom-|grab)/,at+"$1"),/(image-set)/,at+"$1"),t,"")+t;case 5495:case 3959:return I(t,/(image-set\([^]*)/,at+"$1$`$1");case 4968:return I(I(t,/(.+:)(flex-)?(.*)/,at+"box-pack:$3"+mt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+at+t+t;case 4200:if(!Qt(t,/flex-|baseline/))return mt+"grid-column-align"+Re(t,e)+t;break;case 2592:case 3360:return mt+I(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(s,i){return e=i,Qt(s.props,/grid-\w+-end/)})?~vn(t+(n=n[e].value),"span",0)?t:mt+I(t,"-start","")+t+mt+"grid-row-span:"+(~vn(n,"span",0)?Qt(n,/\d+/):+Qt(n,/\d+/)-+Qt(t,/\d+/))+";":mt+I(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(s){return Qt(s.props,/grid-\w+-start/)})?t:mt+I(I(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return I(t,/(.+)-inline(.+)/,at+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Yt(t)-1-e>6)switch(Tt(t,e+1)){case 109:if(Tt(t,e+4)!==45)break;case 102:return I(t,/(.+:)(.+)-([^]+)/,"$1"+at+"$2-$3$1"+Ue+(Tt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~vn(t,"stretch",0)?Va(I(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return I(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,i,a,r,u,c,d){return mt+i+":"+a+d+(r?mt+i+"-span:"+(u?c:+c-+a)+d:"")+t});case 4949:if(Tt(t,e+6)===121)return I(t,":",":"+at)+t;break;case 6444:switch(Tt(t,Tt(t,14)===45?18:11)){case 120:return I(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+at+(Tt(t,14)===45?"inline-":"")+"box$3$1"+at+"$2$3$1"+mt+"$2box$3")+t;case 100:return I(t,":",":"+mt)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return I(t,"scroll-","scroll-snap-")+t}return t}function $n(t,e){for(var n="",s=0;s<t.length;s++)n+=e(t[s],s,t,e)||"";return n}function $f(t,e,n,s){switch(t.type){case kf:if(t.children.length)break;case wf:case ci:return t.return=t.return||t.value;case $a:return"";case Oa:return t.return=t.value+"{"+$n(t.children,s)+"}";case Zn:if(!Yt(t.value=t.props.join(",")))return""}return Yt(n=$n(t.children,s))?t.return=t.value+"{"+n+"}":""}function Of(t){var e=Ha(t);return function(n,s,i,a){for(var r="",u=0;u<e;u++)r+=t[u](n,s,i,a)||"";return r}}function Ff(t){return function(e){e.root||(e=e.return)&&t(e)}}function Bf(t,e,n,s){if(t.length>-1&&!t.return)switch(t.type){case ci:t.return=Va(t.value,t.length,n);return;case Oa:return $n([se(t,{value:I(t.value,"@","@"+at)})],s);case Zn:if(t.length)return Tf(n=t.props,function(i){switch(Qt(i,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":we(se(t,{props:[I(i,/:(read-\w+)/,":"+Ue+"$1")]})),we(se(t,{props:[i]})),Hs(t,{props:cr(n,s)});break;case"::placeholder":we(se(t,{props:[I(i,/:(plac\w+)/,":"+at+"input-$1")]})),we(se(t,{props:[I(i,/:(plac\w+)/,":"+Ue+"$1")]})),we(se(t,{props:[I(i,/:(plac\w+)/,mt+"input-$1")]})),we(se(t,{props:[i]})),Hs(t,{props:cr(n,s)});break}return""})}}var Dt={},Me=typeof bs<"u"&&Dt!==void 0&&(Dt.REACT_APP_SC_ATTR||Dt.SC_ATTR)||"data-styled",Ua="active",Wa="data-styled-version",ts="6.1.11",ui=`/*!sc*/
`,di=typeof window<"u"&&"HTMLElement"in window,Hf=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof bs<"u"&&Dt!==void 0&&Dt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Dt.REACT_APP_SC_DISABLE_SPEEDY!==""?Dt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Dt.REACT_APP_SC_DISABLE_SPEEDY:typeof bs<"u"&&Dt!==void 0&&Dt.SC_DISABLE_SPEEDY!==void 0&&Dt.SC_DISABLE_SPEEDY!==""&&Dt.SC_DISABLE_SPEEDY!=="false"&&Dt.SC_DISABLE_SPEEDY),es=Object.freeze([]),Ne=Object.freeze({});function qf(t,e,n){return n===void 0&&(n=Ne),t.theme!==n.theme&&t.theme||e||n.theme}var Pa=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Vf=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Uf=/(^-|-$)/g;function dr(t){return t.replace(Vf,"-").replace(Uf,"")}var Wf=/(a)(d)/gi,dn=52,hr=function(t){return String.fromCharCode(t+(t>25?39:97))};function Us(t){var e,n="";for(e=Math.abs(t);e>dn;e=e/dn|0)n=hr(e%dn)+n;return(hr(e%dn)+n).replace(Wf,"$1-$2")}var ms,Ya=5381,be=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},Ga=function(t){return be(Ya,t)};function Pf(t){return Us(Ga(t)>>>0)}function Yf(t){return t.displayName||t.name||"Component"}function ys(t){return typeof t=="string"&&!0}var Xa=typeof Symbol=="function"&&Symbol.for,Aa=Xa?Symbol.for("react.memo"):60115,Gf=Xa?Symbol.for("react.forward_ref"):60112,Xf={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Af={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ka={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Kf=((ms={})[Gf]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ms[Aa]=Ka,ms);function fr(t){return("type"in(e=t)&&e.type.$$typeof)===Aa?Ka:"$$typeof"in t?Kf[t.$$typeof]:Xf;var e}var Zf=Object.defineProperty,Jf=Object.getOwnPropertyNames,pr=Object.getOwnPropertySymbols,Qf=Object.getOwnPropertyDescriptor,If=Object.getPrototypeOf,xr=Object.prototype;function Za(t,e,n){if(typeof e!="string"){if(xr){var s=If(e);s&&s!==xr&&Za(t,s,n)}var i=Jf(e);pr&&(i=i.concat(pr(e)));for(var a=fr(t),r=fr(e),u=0;u<i.length;++u){var c=i[u];if(!(c in Af||n&&n[c]||r&&c in r||a&&c in a)){var d=Qf(e,c);try{Zf(t,c,d)}catch{}}}}return t}function ze(t){return typeof t=="function"}function hi(t){return typeof t=="object"&&"styledComponentId"in t}function de(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function gr(t,e){if(t.length===0)return"";for(var n=t[0],s=1;s<t.length;s++)n+=t[s];return n}function Ze(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Ws(t,e,n){if(n===void 0&&(n=!1),!n&&!Ze(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var s=0;s<e.length;s++)t[s]=Ws(t[s],e[s]);else if(Ze(e))for(var s in e)t[s]=Ws(t[s],e[s]);return t}function fi(t,e){Object.defineProperty(t,"toString",{value:e})}function tn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var t0=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,s=0;s<e;s++)n+=this.groupSizes[s];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var s=this.groupSizes,i=s.length,a=i;e>=a;)if((a<<=1)<0)throw tn(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(s),this.length=a;for(var r=i;r<a;r++)this.groupSizes[r]=0}for(var u=this.indexOfGroup(e+1),c=(r=0,n.length);r<c;r++)this.tag.insertRule(u,n[r])&&(this.groupSizes[e]++,u++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],s=this.indexOfGroup(e),i=s+n;this.groupSizes[e]=0;for(var a=s;a<i;a++)this.tag.deleteRule(s)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var s=this.groupSizes[e],i=this.indexOfGroup(e),a=i+s,r=i;r<a;r++)n+="".concat(this.tag.getRule(r)).concat(ui);return n},t}(),bn=new Map,On=new Map,Tn=1,hn=function(t){if(bn.has(t))return bn.get(t);for(;On.has(Tn);)Tn++;var e=Tn++;return bn.set(t,e),On.set(e,t),e},e0=function(t,e){Tn=e+1,bn.set(t,e),On.set(e,t)},n0="style[".concat(Me,"][").concat(Wa,'="').concat(ts,'"]'),s0=new RegExp("^".concat(Me,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),i0=function(t,e,n){for(var s,i=n.split(","),a=0,r=i.length;a<r;a++)(s=i[a])&&t.registerName(e,s)},r0=function(t,e){for(var n,s=((n=e.textContent)!==null&&n!==void 0?n:"").split(ui),i=[],a=0,r=s.length;a<r;a++){var u=s[a].trim();if(u){var c=u.match(s0);if(c){var d=0|parseInt(c[1],10),h=c[2];d!==0&&(e0(h,d),i0(t,h,c[3]),t.getTag().insertRules(d,i)),i.length=0}else i.push(u)}}};function a0(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ja=function(t){var e=document.head,n=t||e,s=document.createElement("style"),i=function(u){var c=Array.from(u.querySelectorAll("style[".concat(Me,"]")));return c[c.length-1]}(n),a=i!==void 0?i.nextSibling:null;s.setAttribute(Me,Ua),s.setAttribute(Wa,ts);var r=a0();return r&&s.setAttribute("nonce",r),n.insertBefore(s,a),s},o0=function(){function t(e){this.element=Ja(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var s=document.styleSheets,i=0,a=s.length;i<a;i++){var r=s[i];if(r.ownerNode===n)return r}throw tn(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),c0=function(){function t(e){this.element=Ja(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var s=document.createTextNode(n);return this.element.insertBefore(s,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),l0=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),mr=di,u0={isServer:!di,useCSSOMInjection:!Hf},Qa=function(){function t(e,n,s){e===void 0&&(e=Ne),n===void 0&&(n={});var i=this;this.options=Ft(Ft({},u0),e),this.gs=n,this.names=new Map(s),this.server=!!e.isServer,!this.server&&di&&mr&&(mr=!1,function(a){for(var r=document.querySelectorAll(n0),u=0,c=r.length;u<c;u++){var d=r[u];d&&d.getAttribute(Me)!==Ua&&(r0(a,d),d.parentNode&&d.parentNode.removeChild(d))}}(this)),fi(this,function(){return function(a){for(var r=a.getTag(),u=r.length,c="",d=function(l){var p=function(m){return On.get(m)}(l);if(p===void 0)return"continue";var f=a.names.get(p),w=r.getGroup(l);if(f===void 0||w.length===0)return"continue";var b="".concat(Me,".g").concat(l,'[id="').concat(p,'"]'),x="";f!==void 0&&f.forEach(function(m){m.length>0&&(x+="".concat(m,","))}),c+="".concat(w).concat(b,'{content:"').concat(x,'"}').concat(ui)},h=0;h<u;h++)d(h);return c}(i)})}return t.registerId=function(e){return hn(e)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Ft(Ft({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var s=n.useCSSOMInjection,i=n.target;return n.isServer?new l0(i):s?new o0(i):new c0(i)}(this.options),new t0(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(hn(e),this.names.has(e))this.names.get(e).add(n);else{var s=new Set;s.add(n),this.names.set(e,s)}},t.prototype.insertRules=function(e,n,s){this.registerName(e,n),this.getTag().insertRules(hn(e),s)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(hn(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),d0=/&/g,h0=/^\s*\/\/.*$/gm;function Ia(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(s){return"".concat(e," ").concat(s)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Ia(n.children,e)),n})}function f0(t){var e,n,s,i=Ne,a=i.options,r=a===void 0?Ne:a,u=i.plugins,c=u===void 0?es:u,d=function(p,f,w){return w.startsWith(n)&&w.endsWith(n)&&w.replaceAll(n,"").length>0?".".concat(e):p},h=c.slice();h.push(function(p){p.type===Zn&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(d0,n).replace(s,d))}),r.prefix&&h.push(Bf),h.push($f);var l=function(p,f,w,b){f===void 0&&(f=""),w===void 0&&(w=""),b===void 0&&(b="&"),e=b,n=f,s=new RegExp("\\".concat(n,"\\b"),"g");var x=p.replace(h0,""),m=Lf(w||f?"".concat(w," ").concat(f," { ").concat(x," }"):x);r.namespace&&(m=Ia(m,r.namespace));var S=[];return $n(m,Of(h.concat(Ff(function(T){return S.push(T)})))),S};return l.hash=c.length?c.reduce(function(p,f){return f.name||tn(15),be(p,f.name)},Ya).toString():"",l}var p0=new Qa,Ps=f0(),to=oe.createContext({shouldForwardProp:void 0,styleSheet:p0,stylis:Ps});to.Consumer;oe.createContext(void 0);function yr(){return _.useContext(to)}var x0=function(){function t(e,n){var s=this;this.inject=function(i,a){a===void 0&&(a=Ps);var r=s.name+a.hash;i.hasNameForId(s.id,r)||i.insertRules(s.id,r,a(s.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,fi(this,function(){throw tn(12,String(s.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=Ps),this.name+e.hash},t}(),g0=function(t){return t>="A"&&t<="Z"};function _r(t){for(var e="",n=0;n<t.length;n++){var s=t[n];if(n===1&&s==="-"&&t[0]==="-")return t;g0(s)?e+="-"+s.toLowerCase():e+=s}return e.startsWith("ms-")?"-"+e:e}var eo=function(t){return t==null||t===!1||t===""},no=function(t){var e,n,s=[];for(var i in t){var a=t[i];t.hasOwnProperty(i)&&!eo(a)&&(Array.isArray(a)&&a.isCss||ze(a)?s.push("".concat(_r(i),":"),a,";"):Ze(a)?s.push.apply(s,Rn(Rn(["".concat(i," {")],no(a),!1),["}"],!1)):s.push("".concat(_r(i),": ").concat((e=i,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in Uo||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return s};function pe(t,e,n,s){if(eo(t))return[];if(hi(t))return[".".concat(t.styledComponentId)];if(ze(t)){if(!ze(a=t)||a.prototype&&a.prototype.isReactComponent||!e)return[t];var i=t(e);return pe(i,e,n,s)}var a;return t instanceof x0?n?(t.inject(n,s),[t.getName(s)]):[t]:Ze(t)?no(t):Array.isArray(t)?Array.prototype.concat.apply(es,t.map(function(r){return pe(r,e,n,s)})):[t.toString()]}function m0(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(ze(n)&&!hi(n))return!1}return!0}var y0=Ga(ts),_0=function(){function t(e,n,s){this.rules=e,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&m0(e),this.componentId=n,this.baseHash=be(y0,n),this.baseStyle=s,Qa.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,s){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=de(i,this.staticRulesId);else{var a=gr(pe(this.rules,e,n,s)),r=Us(be(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,r)){var u=s(a,".".concat(r),void 0,this.componentId);n.insertRules(this.componentId,r,u)}i=de(i,r),this.staticRulesId=r}else{for(var c=be(this.baseHash,s.hash),d="",h=0;h<this.rules.length;h++){var l=this.rules[h];if(typeof l=="string")d+=l;else if(l){var p=gr(pe(l,e,n,s));c=be(c,p+h),d+=p}}if(d){var f=Us(c>>>0);n.hasNameForId(this.componentId,f)||n.insertRules(this.componentId,f,s(d,".".concat(f),void 0,this.componentId)),i=de(i,f)}}return i},t}(),so=oe.createContext(void 0);so.Consumer;var _s={};function v0(t,e,n){var s=hi(t),i=t,a=!ys(t),r=e.attrs,u=r===void 0?es:r,c=e.componentId,d=c===void 0?function(j,E){var M=typeof j!="string"?"sc":dr(j);_s[M]=(_s[M]||0)+1;var N="".concat(M,"-").concat(Pf(ts+M+_s[M]));return E?"".concat(E,"-").concat(N):N}(e.displayName,e.parentComponentId):c,h=e.displayName,l=h===void 0?function(j){return ys(j)?"styled.".concat(j):"Styled(".concat(Yf(j),")")}(t):h,p=e.displayName&&e.componentId?"".concat(dr(e.displayName),"-").concat(e.componentId):e.componentId||d,f=s&&i.attrs?i.attrs.concat(u).filter(Boolean):u,w=e.shouldForwardProp;if(s&&i.shouldForwardProp){var b=i.shouldForwardProp;if(e.shouldForwardProp){var x=e.shouldForwardProp;w=function(j,E){return b(j,E)&&x(j,E)}}else w=b}var m=new _0(n,p,s?i.componentStyle:void 0);function S(j,E){return function(M,N,C){var $=M.attrs,H=M.componentStyle,P=M.defaultProps,W=M.foldedComponentIds,L=M.styledComponentId,g=M.target,v=oe.useContext(so),y=yr(),k=M.shouldForwardProp||y.shouldForwardProp,R=qf(N,v,P)||Ne,z=function(Y,K,G){for(var st,rt=Ft(Ft({},K),{className:void 0,theme:G}),pt=0;pt<Y.length;pt+=1){var gt=ze(st=Y[pt])?st(rt):st;for(var X in gt)rt[X]=X==="className"?de(rt[X],gt[X]):X==="style"?Ft(Ft({},rt[X]),gt[X]):gt[X]}return K.className&&(rt.className=de(rt.className,K.className)),rt}($,N,R),D=z.as||g,O={};for(var F in z)z[F]===void 0||F[0]==="$"||F==="as"||F==="theme"&&z.theme===R||(F==="forwardedAs"?O.as=z.forwardedAs:k&&!k(F,D)||(O[F]=z[F]));var ft=function(Y,K){var G=yr(),st=Y.generateAndInjectStyles(K,G.styleSheet,G.stylis);return st}(H,z),et=de(W,L);return ft&&(et+=" "+ft),z.className&&(et+=" "+z.className),O[ys(D)&&!Pa.has(D)?"class":"className"]=et,O.ref=C,_.createElement(D,O)}(T,j,E)}S.displayName=l;var T=oe.forwardRef(S);return T.attrs=f,T.componentStyle=m,T.displayName=l,T.shouldForwardProp=w,T.foldedComponentIds=s?de(i.foldedComponentIds,i.styledComponentId):"",T.styledComponentId=p,T.target=s?i.target:t,Object.defineProperty(T,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(j){this._foldedDefaultProps=s?function(E){for(var M=[],N=1;N<arguments.length;N++)M[N-1]=arguments[N];for(var C=0,$=M;C<$.length;C++)Ws(E,$[C],!0);return E}({},i.defaultProps,j):j}}),fi(T,function(){return".".concat(T.styledComponentId)}),a&&Za(T,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),T}function vr(t,e){for(var n=[t[0]],s=0,i=e.length;s<i;s+=1)n.push(e[s],t[s+1]);return n}var wr=function(t){return Object.assign(t,{isCss:!0})};function w0(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ze(t)||Ze(t))return wr(pe(vr(es,Rn([t],e,!0))));var s=t;return e.length===0&&s.length===1&&typeof s[0]=="string"?pe(s):wr(pe(vr(s,e)))}function Ys(t,e,n){if(n===void 0&&(n=Ne),!e)throw tn(1,e);var s=function(i){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];return t(e,n,w0.apply(void 0,Rn([i],a,!1)))};return s.attrs=function(i){return Ys(t,e,Ft(Ft({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},s.withConfig=function(i){return Ys(t,e,Ft(Ft({},n),i))},s}var io=function(t){return Ys(v0,t)},Ot=io;Pa.forEach(function(t){Ot[t]=io(t)});const k0=Ot.path`
  opacity: ${({opacity:t})=>t||1}};
  stroke: ${({fill:t,theme:e})=>t??e.colors.failure};
  fill: ${({fill:t,theme:e})=>t??e.colors.failure};
`,kr=({series:t,xScale:e,yScale:n,xValue:s,yValue:i,fill:a,opacity:r})=>{const u=_.useMemo(()=>{const c=e.domain(),d=t==null?void 0:t.sort((b,x)=>x.price-b.price),h=[];let l=!1;for(let b=0;b<d.length;b++){const x=d[b];h.push(x),(x==null?void 0:x.price)<(c==null?void 0:c[0])&&!l&&(h.push({price:(c==null?void 0:c[0])+1,depth:x.depth}),l=!0)}const p=h==null?void 0:h.sort((b,x)=>b.price-x.price),f=[];let w=!1;for(let b=0;b<p.length;b++){const x=p[b];f.push(x),(x==null?void 0:x.price)>(c==null?void 0:c[1])&&!w&&(f.push({price:c==null?void 0:c[1],depth:x.depth}),w=!0)}return Vr().curve(uc).x(b=>e(s(b))).y1(b=>n(i(b))).y0(n(0))(f.filter(b=>{const x=e(s(b));return x>0&&x<=window.innerWidth}))??void 0},[a,r,t,e,s,n,i]);return _.useMemo(()=>o.jsx(k0,{opacity:r,fill:a,d:u}),[u])},b0=Ot.g`
  line {
    display: none;
  }
  text {
    transform: translateY(5px);
    font-family: 'NotoSansMono';
  }
`,T0=({axisGenerator:t,isPosition:e})=>{const{colorMode:n}=Or(),s=i=>{i&&yt(i).call(t).call(a=>a.selectAll(".domain").remove())};return o.jsx("g",{ref:s,style:{color:n=="light"?"#000":"#fff",opacity:(n=="light","0.5")}})},S0=({xScale:t,innerHeight:e,offset:n=0,isPosition:s=!1})=>_.useMemo(()=>o.jsx(b0,{transform:`translate(0, ${e+n})`,children:o.jsx(T0,{axisGenerator:da(t).ticks(6),isPosition:s})}),[e,n,t]),j0=t=>{const e=_.useRef();return _.useEffect(()=>{e.current=t},[t]),e.current},br=t=>["M 0 0",`v ${t}`,"m 1 0","V 0","M 0 1","h 10","q 2 0, 2 2","v 22","q 0 2 -2 2","h -10","z"].join(" "),Tr=()=>["m 4 8","v 12","M 0 0","m 8 8","v 12","z"].join(" "),Sr=({color:t,size:e=10,margin:n=10})=>o.jsx("polygon",{points:`0 0, ${e} ${e}, 0 ${e}`,transform:` translate(${e+n}, ${n}) rotate(45) `,fill:t,stroke:t,strokeWidth:"4",strokeLinejoin:"round"}),ee={colors:{background:"var(--chakra-colors-card_bg)",secondary:"#30D4B7",leftHandle:"#30D4B7 ",rightHandle:"#6297EA"}},jr=Ot.path`
  cursor: ew-resize;
  pointer-events: none;

  stroke-width: 3;
  stroke: ${({color:t})=>t};
  fill: ${({color:t})=>t};
`,Cr=Ot.path`
  cursor: ew-resize;
  pointer-events: none;

  stroke-width: 1.5;
  /* stroke: ${ee.colors.background}; */
  // stroke: #22211f;
  stroke: #fff;
  opacity: ${ee.colors.background};
`;Ot.g`
  opacity: ${({visible:t})=>t?"1":"0"};
  transition: opacity 300ms;
`;Ot.rect`
  fill: ${ee.colors.secondary};
`;Ot.rect`
  fill: ${ee.colors.secondary};
`;Ot.rect`
  fill: ${ee.colors.secondary};
`;Ot.text`
  text-anchor: middle;
  font-size: 13px;
  /*  fill: ${ee.colors.background}; */
  fill: #22211f;
`;const Rr=20,Er=2,Mr=(t,e,n)=>{const s=t.map(a=>n(a).toFixed(1)),i=e.map(a=>n(a).toFixed(1));return s.every((a,r)=>a===i[r])},C0=({id:t,xScale:e,interactive:n,brushLabelValue:s,brushExtent:i,setBrushExtent:a,innerWidth:r,innerHeight:u,westHandleColor:c,eastHandleColor:d,hideBrush:h,isSorted:l})=>{const p=_.useRef(null),f=_.useRef(null),[w,b]=_.useState(i),[x,m]=_.useState(!1),[S,T]=_.useState(!1),j=j0(i),E=_.useCallback(W=>{const{type:L,selection:g,mode:v}=W;if(!g){b(null);return}const y=g.map(e.invert);L==="end"&&!Mr(i,y,e)&&a(y,v),b(y)},[e,i,a]);_.useEffect(()=>{b(i)},[i]),_.useEffect(()=>{p.current&&(f.current=Jh().extent([[Math.max(0+Er,e(0)),0],[r-Er,u]]).handleSize(30).filter(()=>n).on("brush end",E),f.current(yt(p.current)),j&&Mr(i,j,e)&&yt(p.current).transition().call(f.current.move,i.map(e)),yt(p.current).selectAll(".selection").attr("stroke","none").attr("fill","var(--chakra-colors-chart_brush_selection)"))},[i,E,t,u,r,n,j,e]),_.useEffect(()=>{!p.current||!f.current||f.current.move(yt(p.current),i.map(e))},[i,e]),_.useEffect(()=>{m(!0);const W=setTimeout(()=>m(!1),1500);return()=>clearTimeout(W)},[w]);const M=w&&e(w[0])>Rr,N=w&&e(w[1])>r-Rr,C=w&&(e(w[0])<0||e(w[1])<0),$=w&&(e(w[0])>r||e(w[1])>r),H=w&&e(w[0])>=0&&e(w[0])<=r,P=w&&e(w[1])>=0&&e(w[1])<=r;return _.useEffect(()=>{console.log("🚀 ~ file: Brush.tsx:195 ~ brushExtent:",i)},[i]),_.useMemo(()=>o.jsxs(o.Fragment,{children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:`${t}-gradient-selection`,x1:"0%",y1:"100%",x2:"100%",y2:"100%",children:[o.jsx("stop",{stopColor:c}),o.jsx("stop",{stopColor:d,offset:"1"})]}),o.jsx("clipPath",{id:`${t}-brush-clip`,children:o.jsx("rect",{x:"0",y:"0",width:r,height:u})})]}),o.jsx("g",{ref:p,clipPath:`url(#${t}-brush-clip)`,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1)}),w&&o.jsxs(o.Fragment,{children:[!h&&H?o.jsx("g",{transform:`translate(${Math.max(0,e(w[0]))}, 0), scale(${M?"-1":"1"}, 1)`,children:o.jsxs("g",{children:[o.jsx(jr,{color:ee.colors.leftHandle,d:br(u)}),o.jsx(Cr,{d:Tr()})]})}):null,!h&&P?o.jsx("g",{transform:`translate(${e(w[1])}, 0), scale(${N?"-1":"1"}, 1)`,children:o.jsxs("g",{children:[o.jsx(jr,{color:ee.colors.rightHandle,d:br(u)}),o.jsx(Cr,{d:Tr()})]})}):null,C&&o.jsx(Sr,{color:c}),$&&o.jsx("g",{transform:`translate(${r}, 0) scale(-1, 1)`,children:o.jsx(Sr,{color:d})})]})]}),[s,d,P,N,M,S,t,ee,u,r,w,$,x,C,c,H,e])},R0=Ot.line`
  opacity: 0.7;
  stroke-width: 2;
  stroke: var(--chakra-colors-text_caption);
  fill: none;
`,E0=({value:t,xScale:e,innerHeight:n})=>_.useMemo(()=>o.jsx(R0,{x1:e(t),y1:"0",x2:e(t),y2:n}),[t,e,n]);Ot.div`
  display: grid;
  grid-template-columns: repeat(${({count:t})=>t.toString()}, 1fr);
  grid-gap: 6px;

  position: absolute;
  top: -18px;
  right: 0;
`;const M0=Ot.rect`
  fill: transparent;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }
`;function N0({svg:t,xScale:e,setZoom:n,width:s,height:i,resetBrush:a,showResetButton:r,zoomLevels:u,isPosition:c,handleClickRefresh:d}){const h=_.useRef(),[l,p,f,w]=_.useMemo(()=>[()=>t&&h.current&&yt(t).transition().call(h.current.scaleBy,1.5),()=>t&&h.current&&yt(t).transition().call(h.current.scaleBy,.5),()=>t&&h.current&&yt(t).transition().call(h.current.scaleTo,1),()=>t&&h.current&&yt(t).call(h.current.transform,Kn.translate(0,0).scale(1)).transition().call(h.current.scaleTo,.5)],[t]),x=Ss(()=>{console.log("这里测试打印")},500),m=Ss(n,300),{isApp:S}=me();return _.useEffect(()=>{t&&(h.current=Da().scaleExtent([0,1/0]).extent([[0,0],[s,i]]).on("zoom",({transform:T})=>{console.log("这里进来了多次吗 on zoom"),x(),m(T)}),yt(t).call(h.current))},[i,s,n,t,h,u.max,u.min]),_.useEffect(()=>{f()},[f,u]),o.jsx(ut,{w:"100%",p:"0px",align:"center",sx:{"@media screen and (max-width: 960px)":{flexDirection:"column",w:"100%",alignItems:c?"flex-start":"flex-end"}},children:o.jsxs(Q,{w:"100%",justify:S?"flex-start":"flex-end",flex:"1",position:"absolute",right:"0px",top:S?"-55px":"-80px",children:[o.jsx(Wn,{handleClickRefresh:d,noBg:!0,isAutoRefresh:!0}),o.jsx(zt,{svgW:"24px",svgH:"24px",boxW:"24px",boxH:"24px",xlinkHref:"#icon-icon_zoomin",onClick:l}),o.jsx(zt,{svgW:"24px",svgH:"24px",boxW:"24px",boxH:"24px",xlinkHref:"#icon-icon_zoomout",onClick:p})]})})}const fn=t=>t.price,vs=t=>t.depth;function z0({id:t="liquidityChartRangeInput",data:{series:e,current:n},ticksAtLimit:s,styles:i,dimensions:{width:a,height:r},margins:u,interactive:c=!0,brushDomain:d,brushLabels:h,onBrushDomainChange:l,handleClickRefresh:p,zoomLevels:f,showZoomButtons:w=!0,isPosition:b=!1,hideBrush:x=!1,isReverse:m=!1,isSorted:S=!0}){const T=_.useRef(null),[j,E]=_.useState(null),[M,N]=_.useMemo(()=>[r-u.top-u.bottom,a-u.left-u.right],[a,r,u]),{xScale:C,yScale:$}=_.useMemo(()=>{const W=[n*f.initialMin,n*f.initialMax];let L=W;console.log("🚀 ~ file: Chart.tsx:56 ~ const{xScale,yScale}=useMemo ~ xInitialRange:",W),console.log("🚀 ~ file: Chart.tsx:56 ~ const{xScale,yScale}=useMemo ~ brushDomain:",d),d&&String(d==null?void 0:d[0])!=="∞"&&String(d==null?void 0:d[1])!=="∞"&&(L=[Math.min(W[0],V(d[0]).mul(.9).toNumber()),Math.max(W[1],V(d[1]).mul(1.1).toNumber())]),console.log("🚀 ~ file: Chart.tsx:56 ~ const{xScale,yScale}=useMemo ~ xRange:",L);const g={xScale:Ts().domain(L).range([0,N]),yScale:Ts().domain([0,Ur(e,vs)]).range([M,0])};if(j){const v=j.rescaleX(g.xScale);g.xScale.domain(v.domain())}return g},[n,f.initialMin,f.initialMax,N,e,M,j,d]);_.useEffect(()=>{console.log("Chart.tsx xScale useEffect: ",C)},[C]),_.useEffect(()=>{console.log("Chart.tsx zoom useEffect: ",j)},[j]),_.useEffect(()=>{E(null)},[f]),_.useEffect(()=>{d||l(C.domain(),void 0)},[d,l,C]);const[H,P]=_.useMemo(()=>{var v,y;const W=((v=e[0])==null?void 0:v.price)>((y=e[e.length-1])==null?void 0:y.price);let[L,g]=vf(e,k=>W?+fn(k)<n:+fn(k)>n);return g.length&&g[g.length-1]&&(g[g.length-1].price!==n&&(g=[...g,{depth:g[g.length-1].depth,price:n}]),L=[{depth:g[g.length-1].depth,price:n},...L]),[L,g]},[n,e]);return o.jsxs(J,{w:"100%",h:"100%",sx:{"@media screen and (max-width: 1000px)":{display:"block"}},children:[w&&o.jsx(N0,{svg:T.current,xScale:C,setZoom:E,width:N,height:r,resetBrush:()=>{l([n*f.initialMin,n*f.initialMax],"reset")},showResetButton:!!(s[_t.LOWER]||s[_t.UPPER]),zoomLevels:f,isPosition:b,handleClickRefresh:p}),o.jsxs("svg",{width:"100%",height:"100%",style:{overflow:"visible"},children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"green-gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1}),o.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1})]}),o.jsxs("linearGradient",{id:"red-gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1}),o.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1})]})]}),o.jsxs("defs",{children:[o.jsx("clipPath",{id:`${t}-chart-clip`,children:o.jsx("rect",{x:"0",y:"0",width:N,height:r})}),d&&o.jsx("mask",{id:`${t}-chart-area-mask`,children:o.jsx("rect",{fill:"red",x:C(d[0]),y:"0",width:C(d[1])-C(d[0]),height:M})})]}),o.jsxs("g",{transform:`translate(${u.left},${u.top})`,children:[o.jsxs("g",{clipPath:`url(#${t}-chart-clip)`,children:[o.jsx(kr,{series:H,xScale:C,yScale:$,xValue:fn,yValue:vs,opacity:1,fill:"var(--chakra-colors-range_chart_bg)"}),o.jsx(kr,{series:P,xScale:C,yScale:$,xValue:fn,yValue:vs,opacity:1,fill:"url(#green-gradient)"}),o.jsx(E0,{value:n,xScale:C,innerHeight:M}),o.jsx(S0,{xScale:C,innerHeight:M,isPosition:b})]}),o.jsx(M0,{width:N,height:r,ref:T}),o.jsx(C0,{id:t,xScale:C,interactive:c,brushLabelValue:h,brushExtent:d??C.domain(),innerWidth:N,innerHeight:M,setBrushExtent:l,westHandleColor:i.brush.handle.west,eastHandleColor:i.brush.handle.east,hideBrush:x,isSorted:S})]})]})]})}const L0=_.forwardRef(function({isSorted:e,contractPoolInfo:n,currencyA:s,currencyB:i,feeAmount:a,ticksAtLimit:r,price:u,priceLower:c,priceUpper:d,onLeftRangeInput:h,onRightRangeInput:l,onBothRangeInput:p,handleClickRefresh:f,interactive:w,zoomLevel:b,isPosition:x,hideBrush:m,isReverse:S},T){var g;const{isLoading:j,error:E,formattedData:M,handleRefresh:N}=Ul({contractPoolInfo:n,currencyA:s,currencyB:i,feeAmount:a});_.useEffect(()=>{N()},[]);const C=_.useMemo(()=>{let v;return e?v=M:v=M==null?void 0:M.map(y=>{var k;return{...y,price:(k=V(1).div(y==null?void 0:y.price))==null?void 0:k.toNumber()}}),console.log("seriesData useMemo result: ",v),v},[e,M]),$=_.useCallback((v,y)=>{if(!y)return;let k=Number(v[0]);const R=Number(v[1]);k<=0&&(k=1/10**6);const z=(!r[e?_t.LOWER:_t.UPPER]||y==="handle"||y==="reset")&&k>0,D=(!r[e?_t.UPPER:_t.LOWER]||y==="reset")&&R>0&&R<1e35;if(z&&D){const O=parseFloat(k.toFixed(16)),F=parseFloat(R.toFixed(16));O>0&&F>0&&O<F&&p({leftTypedValue:V(k).toString(),rightTypedValue:V(R).toString()})}else z?h(V(k).toString()):D&&l(V(R).toString())},[e,p,h,l,r]),H=_.useMemo(()=>{const v=c==null?void 0:c.fixsUiPrice,y=d==null?void 0:d.fixsUiPrice;if(y!=="∞")return v&&y?[v,y]:void 0},[e,c==null?void 0:c.fixsUiPrice,d==null?void 0:d.fixsUiPrice]),P=_.useCallback((v,y)=>{if(!u)return"";if(v==="w"&&r[e?_t.LOWER:_t.UPPER])return"0";if(v==="e"&&r[e?_t.UPPER:_t.LOWER])return"∞";const k=(y<u?-1:1)*((Math.max(y,u)-Math.min(y,u))/u)*100;return u?`${dc(Math.abs(k)>1?".2~s":".2~f")(k)}%`:""},[e,u,r]),W=!s||!i||C===void 0&&!j,L=_.useRef(null);return _.useImperativeHandle(T,()=>({depthChartRefreshData:N})),o.jsx(J,{flex:1,gap:"14px",w:"100%",position:"relative",children:W?o.jsx(ut,{direction:"column",h:"150px",justify:"flex-end",children:o.jsx(B,{children:"Your position will appear here."})}):j||!C||!u?o.jsx(tt,{h:"100%",pt:"100px",children:o.jsx(Je,{})}):E?o.jsx(ut,{direction:"column",h:"150px",justify:"flex-end",children:o.jsx(B,{children:"Liquidity data not available."})}):C.length===0?o.jsxs(ut,{direction:"column",h:"210px",justify:"flex-end",children:[o.jsx(Q,{position:"absolute",right:"0px",top:"-80px",children:o.jsx(Wn,{handleClickRefresh:f,noBg:!0,isAutoRefresh:!0})}),o.jsx(B,{mt:"20px",children:"There is no liquidity data."})]}):o.jsx(ut,{w:"100%",h:"100%",position:"relative",justify:"center",align:"center",ref:L,children:o.jsx(z0,{data:{series:C,current:u},dimensions:{width:((g=L==null?void 0:L.current)==null?void 0:g.clientWidth)||660,height:280},margins:{top:10,right:20,bottom:20,left:10},styles:{area:{selection:"var(--chakra-colors-text_caption)"},brush:{handle:{west:"#30D4B7",east:"#6297EA"}}},interactive:w&&!!(C!=null&&C.length),brushLabels:P,brushDomain:H,onBrushDomainChange:$,zoomLevels:b??Dn[a??lt.MEDIUM],ticksAtLimit:r,isPosition:x,hideBrush:m,isReverse:S,isSorted:e,handleClickRefresh:f},`${a??lt.MEDIUM}`)})})}),D0=_.forwardRef(function(e,n){const{handleClickRefresh:s}=e,{currentApiPoolInfo:i,currentContractPoolInfo:a,currentFeeTier:r,setBaseCoin:u,baseCoin:c,addToken0:d,addToken1:h,minPriceData:l,maxPriceData:p,currentPrice:f,inversePrice:w,defaultPriceRangePercentage:b,saveMinPriceData:x,saveMaxPriceData:m,setIsShowMinMaxDist:S}=Rt(),T=_.useMemo(()=>a==null?void 0:a.tick_spacing,[a]),j=_.useMemo(()=>r&&Number(r)&&(i!=null&&i.tickSpacing)?{[_t.LOWER]:r?Nt.getInitializableTickIndex(Vn,i==null?void 0:i.tickSpacing):void 0,[_t.UPPER]:r?Nt.getInitializableTickIndex(qn,i==null?void 0:i.tickSpacing):void 0}:{[_t.LOWER]:void 0,[_t.UPPER]:void 0},[r]),E=_.useMemo(()=>{var R;const v=c===((R=i==null?void 0:i.token0)==null?void 0:R.metadata),y=v?l:p==null?void 0:p.getInverseTickPrice(),k=v?p:l==null?void 0:l.getInverseTickPrice();return{[_t.LOWER]:r&&(y==null?void 0:y.tick)===j.LOWER,[_t.UPPER]:r&&(k==null?void 0:k.tick)===j.UPPER}},[i,j,l,p,r,c]),M=!0,N=_.useMemo(()=>{if(b){const v=V(1).minus(V(b).div(100)).toNumber(),y=V(1).add(V(b).div(100)).toNumber();return{initialMin:v,initialMax:y,min:1e-5,max:1.5}}},[b]),C=v=>{var y;if(T&&v!=="∞"){const k=c===((y=i==null?void 0:i.token0)==null?void 0:y.metadata),R=k?i==null?void 0:i.token0:i==null?void 0:i.token1,z=k?i==null?void 0:i.token1:i==null?void 0:i.token0;R&&z&&x(re.buildTickPriceData(v,T,R,z))}},$=v=>{var y;if(T&&v!=="∞"){const k=c===((y=i==null?void 0:i.token0)==null?void 0:y.metadata),R=k?i==null?void 0:i.token0:i==null?void 0:i.token1,z=k?i==null?void 0:i.token1:i==null?void 0:i.token0;R&&z&&m(re.buildTickPriceData(v,T,R,z))}},H=({leftTypedValue:v,rightTypedValue:y})=>{v!==(l==null?void 0:l.fixsUiPrice)&&(S(!0),C(v)),y!==(p==null?void 0:p.fixsUiPrice)&&(S(!0),$(y))},P=v=>{v!==(l==null?void 0:l.fixsUiPrice)&&(S(!0),C(v))},W=v=>{v!==(p==null?void 0:p.fixsUiPrice)&&(S(!0),$(v))},L=_.useMemo(()=>{var v;return c===((v=i==null?void 0:i.token0)==null?void 0:v.metadata)},[c,i]),g=_.useRef(null);return _.useImperativeHandle(n,()=>{var v;return{depthChartRefreshData:(v=g.current)==null?void 0:v.depthChartRefreshData}}),o.jsx(J,{w:"100%",h:"100%",children:o.jsx(L0,{ref:g,isSorted:L,contractPoolInfo:a,currencyA:i==null?void 0:i.token0,currencyB:i==null?void 0:i.token1,feeAmount:r,ticksAtLimit:E,price:Number(L?f:w),priceLower:l,priceUpper:p,interactive:M,zoomLevel:N,isReverse:i==null?void 0:i.isReverse,onBothRangeInput:H,onLeftRangeInput:P,onRightRangeInput:W,handleClickRefresh:s})})}),$0=({xScale:t,innerHeight:e,svg:n})=>{const{colorMode:s}=Or();return _.useEffect(()=>{console.log("没走到这里吗AxisBottom svg: ",n);const i=da(t).ticks(4).tickSizeOuter(0);n.select(".price-historical-x-axis").attr("transform",`translate(0, ${e})`).call(i)},[n,t]),o.jsx("g",{className:"price-historical-x-axis",style:{color:s=="light"?"#000":"#fff",opacity:(s=="light","0.5")}})},O0=({yScale:t,innerWidth:e,svg:n})=>(_.useEffect(()=>{const s=Kl(t).ticks(5).tickSizeOuter(0);n.select(".price-historical-y-axis").attr("transform",`translate(${e}, 0)`).call(s)},[n,t]),o.jsx("g",{className:"price-historical-y-axis"})),F0=({series:t,xScale:e,yScale:n,svg:s,innerHeight:i})=>(_.useEffect(()=>{const a=Vr().x(r=>e(r.time)).y0(i).y1(r=>n(r.price)).curve(Gr.alpha(.5));s.select(".area").datum(t).attr("d",a).attr("fill","url(#historical-gradient)").attr("z-index",-1)},[s,n,t]),o.jsx("path",{className:"area"})),B0=({series:t,xScale:e,yScale:n,svg:s})=>(_.useEffect(()=>{const i=hc().x(a=>e(a.time)).y(a=>n(a.price)).curve(Gr.alpha(.5));s.select(".line").datum(t).attr("d",i).attr("fill","none").attr("stroke","var(--chakra-colors-historical_line)").attr("stroke-width",2)},[s,n,t]),o.jsx("path",{className:"line"})),ro=zr(t=>({hoverX:null,hoverY:null,hoverTime:null,hoverPrice:null,tooltipData:null,dateType:"1D",tooltipTextXPos:null,setHoverX:e=>{t(()=>({hoverX:e}))},setHoverY:e=>{t(()=>({hoverY:e}))},setHoverTime:e=>{t(()=>({hoverTime:e}))},setHoverPrice:e=>{t(()=>({hoverPrice:e}))},setTooltipData:e=>{t(()=>({tooltipData:e}))},setDateType:e=>{t(()=>({dateType:e}))},setTooltipTextXPos:e=>{t(()=>({tooltipTextXPos:e}))}})),H0=({series:t,xScale:e,yScale:n,svg:s,setHoverX:i,setHoverY:a,setTooltipData:r,setTooltipTextXPos:u})=>(_.useEffect(()=>{s.selectAll(".dot").remove(),s.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("cx",c=>e(c.time)).attr("cy",c=>n(c.price)).attr("r",3).attr("fill","rgba(255, 255, 255, 0)").attr("z-index","2").on("mouseover",(c,d)=>{const h=Pt(c),l=e(d.time),p=n(d.price);console.log("circle hover circlePosX: ",l),console.log("circle hover circlePosY: ",p),console.log("circle hover pos: ",h),u(h[0]>580?580:h[0]<100?100:h[0]),i(h[0]),a(h[1]),r(d)}).on("mouseout",()=>{console.log("circle hover mouseout: "),r(null),i(null),a(null)})},[s,n,t]),o.jsx("g",{className:"tooptip-text"})),q0=({series:t,yScale:e,svg:n,innerWidth:s,innerHeight:i,brushExtent:a,setBrushExtent:r,isSorted:u})=>{const[c,d]=_.useState([30,50]);_.useEffect(()=>{console.log("Brush useEffect brushExtent: ",a),console.log("Brush useEffect isSorted: ",u),console.log("Brush useEffect [yScale(brushExtent[0]), yScale(brushExtent[1])]: ",[e(a[0]),e(a[1])]),d([e(a[0]),e(a[1])])},[a]),_.useEffect(()=>{const p=Qh().extent([[0,0],[s+50,i]]).on("end",({selection:f,mode:w})=>{if(!f){d(null);return}const[b,x]=f==null?void 0:f.map(e.invert);console.log("Selected mode: ",w),console.log("Selected y0:",b),console.log("Selected y1:",x),r([b,x],w);const m=f.map(e.invert);console.log("Selected scaled: ",m);const S=t.filter(E=>E.price>=b&&E.price<=x);console.log("Selected data:",S);const T=e(b),j=e(x);console.log("Selected posy0:",T),console.log("Selected posy1:",j),d([T,j])});n.select(".brush").call(p).call(p.move,a.map(e)),n.selectAll(".selection").attr("stroke","none").attr("fill-opacity","0.2").attr("fill","red").attr("width",500).attr("class","selection price-historical-selection")},[n,e,s,i]);const h=_.useMemo(()=>!(!c||c[0]<0),[c]),l=_.useMemo(()=>!(!c||c[1]<0),[c]);return o.jsxs(o.Fragment,{children:[h&&o.jsxs("g",{className:"custom-top-handle",transform:`translate(0, ${c[0]})`,children:[o.jsx("line",{x1:"0",y1:"0",x2:s,y2:"0",stroke:"var(--chakra-colors-chart_handle_left)",strokeWidth:1}),o.jsxs("g",{transform:`translate(${s}, -10)`,children:[o.jsx("polygon",{points:"0,10 6,20 40,20 40,0 6,0",fill:"var(--chakra-colors-chart_handle_left)"}),o.jsxs("text",{x:"22",y:"15",fill:"#0C0B1E",fontSize:"12px",textAnchor:"middle",children:["MIN ",u]})]})]}),l&&o.jsxs("g",{className:"custom-bottom-handle",transform:`translate(0, ${c[1]})`,children:[o.jsx("line",{x1:"0",y1:"0",x2:s,y2:"0",stroke:"var(--chakra-colors-chart_handle_right)",strokeWidth:1}),o.jsxs("g",{transform:`translate(${s}, -10)`,children:[o.jsx("polygon",{points:"0,10 6,20 40,20 40,0 6,0",fill:"var(--chakra-colors-chart_handle_right)"}),o.jsx("text",{x:"22",y:"15",fill:"#0C0B1E",fontSize:"12px",textAnchor:"middle",children:"MAX"})]})]}),c&&o.jsx("rect",{width:s,height:Math.abs((c[0]<0?0:c[0])-(c[1]<0?0:c[1])),transform:`translate(0, ${c[1]<0?0:c[1]})`,fill:"var(--chakra-colors-chart_brush_selection)"}),o.jsx("g",{className:"brush"})]})},V0=({svg:t,hoverX:e,hoverY:n,innerWidth:s,innerHeight:i,tooltipData:a})=>(_.useState(null),_.useRef(),o.jsx(o.Fragment,{children:o.jsxs("g",{transform:`translate(${e}, 0)`,children:[o.jsx("line",{y1:0,y2:i,stroke:"#fff",strokeDasharray:"5, 5"}),o.jsx("line",{x1:-e,x2:s-e,y1:n,y2:n,stroke:"#fff",strokeDasharray:"5, 5"}),o.jsx("circle",{r:"4",fill:"#fff",cy:n})]})})),U0=({price:t,yScale:e,svg:n,innerWidth:s})=>o.jsxs("g",{className:"historical-currentprice-line",children:[o.jsx("line",{x1:0,y1:e(t),x2:s+30,y2:e(t),stroke:"#fff",strokeWidth:"1"}),o.jsx("circle",{cx:s-4+30,cy:e(t),r:"4",fill:"#A6DEEB"})]});function W0({svg:t,yScale:e,setZoom:n,width:s,height:i,zoomLevels:a,handleClickRefresh:r,dateType:u,setDateType:c,isApp:d}){const h=_.useRef(),[l,p,f,w]=_.useMemo(()=>[()=>t&&h.current&&t.transition().call(h.current.scaleBy,2),()=>t&&h.current&&t.transition().call(h.current.scaleBy,.5),()=>t&&h.current&&t.transition().call(h.current.scaleTo,.5),()=>t&&h.current&&t.call(h.current.transform,Kn.translate(0,0).scale(1)).transition().call(h.current.scaleTo,.5)],[t]);return _.useEffect(()=>{t&&(h.current=Da().scaleExtent([a.min,a.max]).extent([[0,0],[s,i]]).on("zoom",({transform:b})=>n(b)).filter(()=>!(void 0).button&&!(void 0).touches),t.call(h.current))},[i,s,n,t,e,h,a,a.max,a.min]),_.useEffect(()=>{f()},[f,a]),o.jsx(ut,{children:o.jsxs(Q,{w:"100%",flex:"1",justify:d?"flex-start":"flex-end",position:"absolute",right:"0px",top:d?"-55px":"-80px",children:[o.jsx(Qe,{options:["1H","1D","7D","30D"],size:"s",value:u,onChange:c}),o.jsx(Wn,{handleClickRefresh:r,noBg:!0,isAutoRefresh:!0}),o.jsx(zt,{svgW:"24px",svgH:"24px",boxW:"24px",boxH:"24px",xlinkHref:"#icon-icon_zoomin",onClick:l}),o.jsx(zt,{svgW:"24px",svgH:"24px",boxW:"24px",boxH:"24px",xlinkHref:"#icon-icon_zoomout",onClick:p})]})})}function P0({id:t="historicalChart",data:{series:e,current:n},dimensions:{width:s,height:i},margins:a,brushDomain:r,onBrushDomainChange:u,interactive:c=!0,zoomLevels:d,isSorted:h,handleClickRefresh:l,isApp:p}){const{hoverX:f,hoverY:w,hoverTime:b,hoverPrice:x,tooltipData:m,dateType:S,tooltipTextXPos:T,setHoverX:j,setHoverY:E,setHoverTime:M,setHoverPrice:N,setTooltipData:C,setDateType:$,setTooltipTextXPos:H}=ro();_.useRef(null);const[P,W]=_.useState(null),[L,g]=_.useMemo(()=>[i-a.top-a.bottom,s-a.left-a.right],[s,i,a]),[v,y]=_.useState(null);_.useEffect(()=>{if(yt){const z=yt("#price-historical-chart");y(z)}},[yt]),_.useEffect(()=>{console.log("走到这里了吗svg: ",v)},[v]);const{xScale:k,yScale:R}=_.useMemo(()=>{const z=[n*.5,n*1.5];let D=z;console.log("🚀 ~ file: Chart.tsx:56 ~ const{xScale,yScale}=useMemo ~ xInitialRange:",z),console.log("🚀 ~ file: Chart.tsx:56 ~ const{xScale,yScale}=useMemo ~ brushDomain:",r),r&&String(r==null?void 0:r[0])!=="∞"&&String(r==null?void 0:r[1])!=="∞"&&(D=[n*.5,n*1.5]),console.log("🚀 ~ file: Chart.tsx:56 ~ const{xScale,yScale}=useMemo ~ yRange:",D);const O={xScale:fc().domain(Mc(e,F=>F.time)).range([0,g]),yScale:Ts().domain([Math.min(pc(e,F=>F.price)*.94,D[0]),Math.max(Ur(e,F=>F.price)*1.06,D[1])]).nice().range([L,0])};if(P){const F=P.rescaleY(O.yScale);O.yScale.domain(F.domain())}return O},[n,g,L,P,e]);return o.jsxs(J,{w:"100%",h:"100%",sx:{"@media screen and (max-width: 1000px)":{display:"block"}},position:"relative",children:[o.jsx(W0,{svg:v,yScale:R,setZoom:W,width:g,height:i,zoomLevels:d,handleClickRefresh:l,dateType:S,setDateType:$,isApp:p}),o.jsxs("svg",{id:"price-historical-chart",width:"100%",height:"100%",style:{overflow:"visible"},children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"historical-gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--chakra-colors-historical_area_start)"}),o.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-historical_area_end)"})]})}),v&&o.jsxs(o.Fragment,{children:[o.jsx($0,{xScale:k,svg:v,innerHeight:L}),o.jsx(O0,{yScale:R,svg:v,innerWidth:g}),o.jsx(B0,{svg:v,series:e,xScale:k,yScale:R}),o.jsx(F0,{svg:v,series:e,xScale:k,yScale:R,innerHeight:L}),m&&o.jsx(V0,{innerWidth:g,innerHeight:L,hoverX:f,hoverY:w,tooltipData:m,svg:v}),o.jsx(H0,{svg:v,series:e,xScale:k,yScale:R,setHoverX:j,setHoverY:E,setTooltipData:C,setTooltipTextXPos:H}),o.jsx(U0,{svg:v,yScale:R,innerWidth:g,price:n}),o.jsx(q0,{svg:v,series:e,yScale:R,innerWidth:g,innerHeight:L,brushExtent:r??R.domain(),setBrushExtent:u,isSorted:h})]})]}),m&&o.jsxs(J,{position:"absolute",left:T-100+"px",top:w-65+"px",bg:"bg_secondary",padding:"8px",alignItems:"flex-start",zIndex:"99999",gap:"4px",borderRadius:"8px",children:[o.jsxs(B,{fontSize:"xs",children:["Date: ",Wo(m==null?void 0:m.time)]}),o.jsxs(B,{fontSize:"xs",children:["Price: ",m==null?void 0:m.price]})]})]})}function Y0(t,e){console.log("🚀 ~ file: useHistoricalChartData.ts:8 ~ useHistoricalChartData ~ contractPoolInfo:",t);const n=_.useMemo(()=>Po[e],[e]),{historicalPriceData:s,handleRefresh:i}=G0(t==null?void 0:t.pool_address,n);_.useEffect(()=>{console.log("useHistoricalChartData historicalPriceData: ",s)},[s]);const a=_.useMemo(()=>{if(s&&s.length>0)return[s[s.length-1].time,s[0].time]},[s]);return{historicalData:s,xRange:a,isLoading:!1,error:void 0,handleRefresh:i}}function G0(t,e="day"){const n=Fn(Yo),[s,i]=_.useState([]),a=async(u,c)=>{var f,w,b;const d=Se(V(new Date().getTime()).div(1e3).toString(),0),h={hour:{dateType:"5min",startTime:V(d).minus(60*60).toNumber(),endTime:d},day:{dateType:"hour",startTime:V(d).minus(60*60*24).toNumber(),endTime:d},week:{dateType:"4hour",startTime:V(d).minus(60*60*24*7).toNumber(),endTime:d},month:{dateType:"day",startTime:V(d).minus(60*60*24*30).toNumber(),endTime:d}},l=await $r(n,{id:u,date_type:(f=h==null?void 0:h[c])==null?void 0:f.dateType,start_timestamp:(w=h==null?void 0:h[c])==null?void 0:w.startTime,end_timestamp:(b=h==null?void 0:h[c])==null?void 0:b.endTime});console.log("useHistoricalPrice getHisTorical res: ",l);const p=l==null?void 0:l.list.map(x=>({time:V(x.timestamp).mul(1e3).toNumber(),price:Number(x.price)}));if(console.log("useHistoricalPrice list: ",p),p.length===1){const x={hour:36e5,day:864e5,week:6048e5,month:2592e6};p.push({time:V(p[0].time).minus(x[c]).toNumber(),price:p[0].price})}console.log("useHistoricalPrice list后: ",p),i(p||[])};return _.useEffect(()=>{t&&e&&a(t,e)},[t,e]),{historicalPriceData:s,handleRefresh:()=>{t&&e&&a(t,e)}}}var Ve=(t=>(t.LOWER="LOWER",t.UPPER="UPPER",t))(Ve||{});const X0=_.forwardRef(function({isSorted:e,price:n,contractPoolInfo:s,currencyA:i,currencyB:a,feeAmount:r,interactive:u,ticksAtLimit:c,priceLower:d,priceUpper:h,onLeftRangeInput:l,onRightRangeInput:p,onBothRangeInput:f,handleClickRefresh:w,zoomLevel:b},x){var g;const{isApp:m}=me(),{dateType:S,setDateType:T}=ro(),{historicalData:j,xRange:E,isLoading:M,error:N,handleRefresh:C}=Y0(s,S),$=_.useRef(null);_.useState("1D");const H=_.useMemo(()=>e?j:j==null?void 0:j.map(v=>{var y;return{...v,price:(y=V(1).div(v==null?void 0:v.price))==null?void 0:y.toNumber()}}),[e,j]);_.useEffect(()=>{console.log("PriceChart index seriesData: ",H)},[H]);const P=!i||!a||H===void 0&&!M,W=_.useCallback((v,y)=>{if(console.log("onBrushDomainChangeEnded domain: ",v),console.log("onBrushDomainChangeEnded mode: ",y),!y)return;let k=Number(v[1]);const R=Number(v[0]);k<=0&&(k=1/10**6);const z=(!c[e?Ve.LOWER:Ve.UPPER]||y==="handle"||y==="reset")&&k>0,D=(!c[e?Ve.UPPER:Ve.LOWER]||y==="reset")&&R>0&&R<1e35;if(console.log("onBrushDomainChangeEnded updateBottom: ",z),console.log("onBrushDomainChangeEnded updateTop: ",D),z&&D){const O=parseFloat(k.toFixed(16)),F=parseFloat(R.toFixed(16));console.log("onBrushDomainChangeEnded parsedLeftRangeValue: ",O),console.log("onBrushDomainChangeEnded parsedRightRangeValue: ",F),O>0&&F>0&&O<F&&f({leftTypedValue:V(k).toString(),rightTypedValue:V(R).toString()})}else z?l(V(k).toString()):D&&p(V(R).toString())},[e,f,l,p,c]),L=_.useMemo(()=>{const v=d==null?void 0:d.fixsUiPrice,y=h==null?void 0:h.fixsUiPrice;if(y!=="∞")return v&&y?[v,y]:void 0},[e,d==null?void 0:d.fixsUiPrice,h==null?void 0:h.fixsUiPrice]);return _.useImperativeHandle(x,()=>({depthChartRefreshData:C})),o.jsx(J,{w:"100%",h:"100%",position:"relative",children:P?o.jsx(ut,{direction:"column",h:"150px",justify:"flex-end",children:o.jsx(B,{children:"Your position will appear here."})}):M?o.jsx(tt,{h:"100%",pt:"100px",children:o.jsx(Je,{})}):N?o.jsx(ut,{direction:"column",h:"150px",justify:"flex-end",children:o.jsx(B,{children:"Liquidity data not available."})}):!H||H.length===0||!n||!E?o.jsxs(ut,{direction:"column",h:"210px",justify:"flex-end",children:[o.jsxs(Q,{position:"absolute",top:m?"-55px":"-80px",right:m?"auto":"0px",left:m?"0px":"auto",children:[o.jsx(Qe,{options:["1H","1D","7D","30D"],size:"s",value:S,onChange:T}),o.jsx(Wn,{handleClickRefresh:w,noBg:!0,isAutoRefresh:!0})]}),o.jsx(B,{mt:"20px",children:"There is no historical data."})]}):o.jsx(o.Fragment,{children:o.jsx(ut,{w:"100%",h:"100%",ref:$,children:o.jsx(P0,{handleClickRefresh:w,data:{series:H,current:n},dimensions:{width:((g=$==null?void 0:$.current)==null?void 0:g.clientWidth)||660,height:320},brushDomain:L,margins:{top:10,right:20,bottom:20,left:10},onBrushDomainChange:W,interactive:u&&!!(H!=null&&H.length),zoomLevels:b??Dn[r??lt.MEDIUM],isSorted:e,isApp:m})})})})}),A0=_.forwardRef(function(e,n){const{handleClickRefresh:s}=e,{currentApiPoolInfo:i,currentContractPoolInfo:a,currentFeeTier:r,setBaseCoin:u,baseCoin:c,addToken0:d,addToken1:h,minPriceData:l,maxPriceData:p,currentPrice:f,inversePrice:w,defaultPriceRangePercentage:b,saveMinPriceData:x,saveMaxPriceData:m,setIsShowMinMaxDist:S}=Rt(),T=_.useMemo(()=>a==null?void 0:a.tick_spacing,[a]),j=_.useMemo(()=>r&&Number(r)&&(i!=null&&i.tickSpacing)?{[_t.LOWER]:r?Nt.getInitializableTickIndex(Vn,i==null?void 0:i.tickSpacing):void 0,[_t.UPPER]:r?Nt.getInitializableTickIndex(qn,i==null?void 0:i.tickSpacing):void 0}:{[_t.LOWER]:void 0,[_t.UPPER]:void 0},[r]),E=_.useMemo(()=>{var R;const v=c===((R=i==null?void 0:i.token0)==null?void 0:R.metadata),y=v?l:p==null?void 0:p.getInverseTickPrice(),k=v?p:l==null?void 0:l.getInverseTickPrice();return{[_t.LOWER]:r&&(y==null?void 0:y.tick)===j.LOWER,[_t.UPPER]:r&&(k==null?void 0:k.tick)===j.UPPER}},[i,j,l,p,r,c]),M=!0,N=_.useMemo(()=>{if(b){const v=V(1).minus(V(b).div(100)).toNumber(),y=V(1).add(V(b).div(100)).toNumber();return{initialMin:v,initialMax:y,min:1e-5,max:1.5}}},[b]),C=v=>{var y;if(T&&v!=="∞"){const k=c===((y=i==null?void 0:i.token0)==null?void 0:y.symbol),R=k?i==null?void 0:i.token0:i==null?void 0:i.token1,z=k?i==null?void 0:i.token1:i==null?void 0:i.token0;R&&z&&x(re.buildTickPriceData(v,T,R,z))}},$=v=>{var y;if(T&&v!=="∞"){const k=c===((y=i==null?void 0:i.token0)==null?void 0:y.metadata),R=k?i==null?void 0:i.token0:i==null?void 0:i.token1,z=k?i==null?void 0:i.token1:i==null?void 0:i.token0;R&&z&&m(re.buildTickPriceData(v,T,R,z))}},H=({leftTypedValue:v,rightTypedValue:y})=>{console.log("PriceHistoricalChart onBothRangeInput leftTypedValue: ",v),console.log("PriceHistoricalChart onBothRangeInput rightTypedValue: ",y),v!==(l==null?void 0:l.fixsUiPrice)&&(S(!0),C(v)),y!==(p==null?void 0:p.fixsUiPrice)&&(S(!0),$(y))},P=v=>{v!==(l==null?void 0:l.fixsUiPrice)&&(S(!0),C(v))},W=v=>{v!==(p==null?void 0:p.fixsUiPrice)&&(S(!0),$(v))},L=_.useMemo(()=>{var v;return c===((v=i==null?void 0:i.token0)==null?void 0:v.metadata)},[c,i]),g=_.useRef(null);return _.useImperativeHandle(n,()=>{var v;return{priceChartRefreshData:(v=g.current)==null?void 0:v.priceChartRefreshData}}),o.jsx(J,{w:"100%",h:"100%",children:o.jsx(X0,{ref:g,isSorted:L,contractPoolInfo:a,currencyA:d,currencyB:h,feeAmount:r,ticksAtLimit:E,price:Number(L?f:w),priceLower:l,priceUpper:p,interactive:M,zoomLevel:N,onBothRangeInput:H,onLeftRangeInput:P,onRightRangeInput:W,handleClickRefresh:s})})}),K0=_.forwardRef(function({handleClickRefresh:e},n){const[s,i]=_.useState("Liquidity"),{isApp:a}=me(),r=d=>{i(d)},u=_.useRef(null),c=_.useRef(null);return _.useImperativeHandle(n,()=>{var d,h;return{depthChartMethod:(d=u==null?void 0:u.current)==null?void 0:d.depthChartRefreshData,priceChartMethod:(h=c==null?void 0:c.current)==null?void 0:h.priceChartRefreshData}}),o.jsxs(tt,{w:"100%",h:"100%",children:[o.jsxs(Go,{w:"100%",direction:a?"column":"row",justify:"space-between",mb:"10px",children:[o.jsx(tt,{children:o.jsx(Qe,{options:["Liquidity","Price"],size:"s",value:s,onChange:r})}),a&&o.jsx(tt,{h:"20px"}),o.jsxs(Q,{gap:"24px",children:[o.jsxs(Q,{gap:"4px",children:[o.jsx(tt,{w:"16px",h:"2px",bg:"chart_handle_left"}),o.jsx(B,{fontSize:"xs",whiteSpace:"nowrap",children:"Min price"})]}),o.jsxs(Q,{gap:"4px",children:[o.jsx(tt,{w:"16px",h:"2px",bg:"chart_handle_right"}),o.jsx(B,{fontSize:"xs",whiteSpace:"nowrap",children:"Max price"})]}),o.jsxs(Q,{gap:"4px",children:[o.jsx(tt,{w:"16px",h:"2px",bg:"text_caption_opacity_70"}),o.jsx(B,{fontSize:"xs",whiteSpace:"nowrap",children:"Current price"})]})]})]}),s==="Liquidity"&&o.jsx(D0,{handleClickRefresh:e,ref:u}),s==="Price"&&o.jsx(A0,{handleClickRefresh:e,ref:c})]})}),Z0=K0;function J0(t,e,n,s){const{setMinDistPercentange:i,setMaxDistPercentange:a}=Rt();_.useEffect(()=>{if(t!=null&&t.fixsUiPrice&&n&&(t==null?void 0:t.fixsUiPrice)!=="∞"&&(e==null?void 0:e.fixsUiPrice)!=="∞"){const r=V(t==null?void 0:t.fixsUiPrice).minus(n),u=V(e==null?void 0:e.fixsUiPrice).minus(n),c=r.equals(0)?"0":Se(r.div(n).mul(100).toString(),1),d=u.equals(0)?"0":Se(u.div(n).mul(100).toString(),1);i(String(c)),a(String(d))}},[t==null?void 0:t.fixsUiPrice,e==null?void 0:e.fixsUiPrice,n,s])}function pp(){var Ut,ye,pi,xi,gi,mi,yi,_i,vi,wi,ki,bi,Ti;const t=Ks(),{windowWidth:e}=me(),{id:n,token0:s,token1:i,fee:a}=Xo(),{address:r}=Un(),{addToken0:u,addToken1:c,setAddToken0:d,setAddToken1:h,currentApiPoolInfo:l,setCurrentApiPoolInfo:p,currentContractPoolInfo:f,setCurrentContractPoolInfo:w,currentPoolPositions:b,setCurrentPrice:x,setBaseCoin:m,baseCoin:S,setCurrentApiPoolInfoIsLoading:T,setCurrentContractPoolInfoIsLoading:j,resetLiquidityState:E,currentFeeTier:M,setCurrentFeeTier:N,minPriceData:C,maxPriceData:$,saveMaxPriceData:H,saveMinPriceData:P,priceRangePercentage:W,ratio:L,setRatio:g,currentApiPoolInfoIsLoading:v,currentContractPoolInfoIsLoading:y,currentPrice:k,inversePrice:R}=Rt(),{getApiPoolInfo:z}=Io(),{getContractPool:D}=nl(),{feeTierDistribution:O,feeTierDistributionLoading:F}=yc(u,c),{handleChangeRange:ft}=Is();_.useMemo(()=>{var Kt,en,Si;const U=S===((Kt=l==null?void 0:l.token0)==null?void 0:Kt.metadata),ct=U?C:$==null?void 0:$.getInverseTickPrice(),dt=U?$:C==null?void 0:C.getInverseTickPrice(),St=f==null?void 0:f.current_tick_index,Wt=ct==null?void 0:ct.tick,le=dt==null?void 0:dt.tick;return{currentTick:St,lower:Wt,upper:le,metadata0:(en=l==null?void 0:l.token0)==null?void 0:en.metadata,metadata1:(Si=l==null?void 0:l.token1)==null?void 0:Si.metadata}},[l,f,C,$]);const{isImportToken:et}=Hn(),Y=_.useMemo(()=>{var U;return S===((U=l==null?void 0:l.token0)==null?void 0:U.metadata)},[S,l]);J0(C,$,Y?k:R,Y);const[K,G]=_.useState(!1),st=_.useMemo(()=>{const U=[];if(l){const{displayToken0:ct,displayToken1:dt}=l;ct&&et(ct.metadata)&&localStorage.getItem(ct.metadata)!=="true"&&U.push(ct),dt&&et(dt.metadata)&&localStorage.getItem(dt.metadata)!=="true"&&U.push(dt)}return G(U.length>0),U},[l]),rt=_.useRef();_.useRef(),rt.current=_.useMemo(()=>{if(n)return n;if(l!=null&&l.id)return l==null?void 0:l.id},[n,l]);const pt=U=>{j(!0),D(U||rt.current).then(ct=>{console.log("fetchContractPoolInfo getContractPool res:",ct),w(ct),j(!1)})},gt=_.useRef();gt.current=_.useCallback(U=>{const ct={id:n,token0:s,token1:i,fee:a};(n||s&&i&&a)&&(T(!0),U&&(ct.id=rt.current||n||(l==null?void 0:l.id)),z(ct,U).then(dt=>{const St=rt.current||n||(l==null?void 0:l.id);(St===void 0||dt&&dt.id===St)&&(p(dt),pt(dt==null?void 0:dt.id)),T(!1)}))},[n,s,i,a]),_.useEffect(()=>{gt.current()},[n,s,i,a]),_.useEffect(()=>{l&&(d((l==null?void 0:l.displayToken0)||void 0),h((l==null?void 0:l.displayToken1)||void 0))},[l]),_.useEffect(()=>{var U,ct,dt,St,Wt,le;if((l==null?void 0:l.id)===(f==null?void 0:f.pool_address)&&((U=l==null?void 0:l.token0)==null?void 0:U.decimals)!==void 0&&((ct=l==null?void 0:l.token1)==null?void 0:ct.decimals)!==void 0&&(f!=null&&f.current_sqrt_price)){console.log("🚀 ~ useEffect ~ currentContractPoolInfo:",f);const Kt=Nt.sqrtPriceX64ToPrice(new Pe(f==null?void 0:f.current_sqrt_price),(dt=l==null?void 0:l.token0)==null?void 0:dt.decimals,(St=l==null?void 0:l.token1)==null?void 0:St.decimals);console.log("🚀 ~ useEffect ~ price:",Kt.toString());const en=V(1).div(Kt);console.log("🚀 ~ useEffect ~ inversePrice:",en.toString()),x(Kt.toString()),(Wt=l==null?void 0:l.displayToken0)!=null&&Wt.symbol&&!S&&m((le=l==null?void 0:l.displayToken0)==null?void 0:le.metadata)}},[l,f==null?void 0:f.pool_address]),_.useEffect(()=>{if(!(C&&$)&&f&&l){const U=Lr(String(f==null?void 0:f.fee_rate));l!=null&&l.isReverse?ft(U,l==null?void 0:l.token1,l==null?void 0:l.token0,Number(f==null?void 0:f.tick_spacing),R.toString()):ft(U,l==null?void 0:l.token0,l==null?void 0:l.token1,Number(f==null?void 0:f.tick_spacing),k.toString())}},[k,R]),_.useEffect(()=>{a&&N(a)},[a]);const[X,Z]=_.useState(!1),xt=U=>{var ct,dt,St,Wt,le,Kt;s===((ct=U.displayToken0)==null?void 0:ct.metadata)&&i===((dt=U.displayToken1)==null?void 0:dt.metadata)&&a===(U==null?void 0:U.feeTier)||i===((St=U.displayToken0)==null?void 0:St.metadata)&&s===((Wt=U.displayToken1)==null?void 0:Wt.metadata)&&a===(U==null?void 0:U.feeTier)||(E(),t(`/pools/liquidity/${(le=U==null?void 0:U.displayToken0)==null?void 0:le.metadata}/${(Kt=U==null?void 0:U.displayToken1)==null?void 0:Kt.metadata}/${U==null?void 0:U.feeTier}`,{replace:!0}),N(U==null?void 0:U.feeTier))},[nt,vt]=_.useState("Your Positions");_.useState("1D"),_.useEffect(()=>{window.scrollTo(0,0)},[]),_.useEffect(()=>{setTimeout(()=>{window.scrollTo(0,0)},50)},[window.innerHeight]);const q=_.useRef(null),A=()=>{var U;console.log("handleClickRefresh Force refresh",{id:n,token0:s,token1:i,fee:a,currentApiPoolInfo:l}),gt.current(!0),(U=q==null?void 0:q.current)==null||U.depthChartMethod()},{displayCurrentPrice:ot,displayPerText:ht}=ti(),Ht=_.useMemo(()=>{var St;const U=S===((St=l==null?void 0:l.token0)==null?void 0:St.metadata),ct=U?C:$==null?void 0:$.getInverseTickPrice(),dt=U?$:C==null?void 0:C.getInverseTickPrice();return{token0:l==null?void 0:l.token0,token1:l==null?void 0:l.token1,lowerTick:ct==null?void 0:ct.tick,upperTick:dt==null?void 0:dt.tick,sqrtPriceX96:f==null?void 0:f.current_sqrt_price,isFullRange:W===100}},[l,C==null?void 0:C.tick,$==null?void 0:$.tick,f==null?void 0:f.current_sqrt_price,W]),Et=jc(Ht);_.useEffect(()=>{g(Et)},[Et]);const Lt=Cc(C==null?void 0:C.price,$==null?void 0:$.price),{getCurrentPoolPositions:wt}=ta();_.useEffect(()=>{r&&l&&f&&(l==null?void 0:l.id)===(f==null?void 0:f.pool_address)&&nt=="Your Positions"&&(console.log("Liquidity Page getCurrentPoolPositions start"),nt==="Your Positions"&&wt(l,f,r))},[l,f,r,nt]);const bt=_.useMemo(()=>!l&&!v||!n&&(!s||!i||!a),[l,v,n,s,i,a]);_.useEffect(()=>()=>{E()},[]);const At=U=>o.jsx(J,{w:"100%",gap:"16px",children:o.jsxs(J,{w:"100%",children:[o.jsx(Zs,{currentTab:nt,positionsNum:(b==null?void 0:b.length)||0,textList:["Your Positions","Transactions","Info"],onClick:ct=>{vt(ct)}}),nt=="Your Positions"?o.jsx(tl,{}):nt=="Transactions"?o.jsx(Ic,{windowWidth:U}):o.jsx(Gc,{})]})});return o.jsxs(tt,{w:"100%",children:[o.jsxs(ut,{align:"center",cursor:"pointer",onClick:()=>Z(!X),sx:{"@media screen and (max-width: 810px)":{alignItems:"flex-start",flexDirection:"column"}},children:[o.jsxs(ut,{align:"center",children:[o.jsx(As,{w:"40px",coinAIconUrl:(Ut=l==null?void 0:l.displayToken0)==null?void 0:Ut.image,coinBIconUrl:(ye=l==null?void 0:l.displayToken1)==null?void 0:ye.image,variant:"border",showATag:bt?!1:et(((pi=l==null?void 0:l.displayToken0)==null?void 0:pi.metadata)||""),showBTag:bt?!1:et(((xi=l==null?void 0:l.displayToken1)==null?void 0:xi.metadata)||"")}),o.jsxs(B,{fontSize:"xl",color:"text_caption",ml:"4px",children:[(gi=l==null?void 0:l.displayToken0)==null?void 0:gi.symbol,"-",(mi=l==null?void 0:l.displayToken1)==null?void 0:mi.symbol]})]}),o.jsxs(ut,{w:"160px",h:"28px",border:"1px solid ",borderColor:"border",align:"center",ml:"20px",justify:"center",alignItems:"center",borderRadius:"8px",_hover:{bg:"bg_secondary",svg:{fill:"var(--chakra-colors-primary)"}},sx:{"@media screen and (max-width: 810px)":{w:"100%",ml:"0",mt:"12px"}},children:[o.jsx(B,{color:"primary",mr:"4px",children:"Change Pool"}),o.jsx(zt,{xlinkHref:"#icon-icon_open",variant:"gray"})]})]}),!bt&&o.jsxs(o.Fragment,{children:[o.jsxs(Q,{mt:"12px",align:"flex-start",sx:{"@media screen and (max-width: 810px)":{display:"flex",flexDirection:"column"}},children:[o.jsx(tt,{sx:{"@media screen and (max-width: 810px)":{w:"100%"}},children:o.jsx(Xc,{w:"100%",feeTierDistribution:O,feeTierDistributionLoading:F,current:M,onClick:U=>{var ct,dt,St,Wt;U&&(U==null?void 0:U.value)===M||(U.title=="Not created"?t(`/pools/create/${(ct=l==null?void 0:l.displayToken0)==null?void 0:ct.metadata}/${(dt=l==null?void 0:l.displayToken1)==null?void 0:dt.metadata}/${U==null?void 0:U.value}`):(E(),t(`/pools/liquidity/${(St=l==null?void 0:l.displayToken0)==null?void 0:St.metadata}/${(Wt=l==null?void 0:l.displayToken1)==null?void 0:Wt.metadata}/${U.value}`)))}})}),o.jsxs(Q,{align:"center",sx:{"@media screen and (max-width: 810px)":{w:"100%",mt:"-4px"}},children:[o.jsx(Nr,{name:(yi=l==null?void 0:l.displayToken0)==null?void 0:yi.symbol,address:(_i=l==null?void 0:l.displayToken0)==null?void 0:_i.metadata}),o.jsx(Nr,{name:(vi=l==null?void 0:l.displayToken1)==null?void 0:vi.symbol,address:(wi=l==null?void 0:l.displayToken1)==null?void 0:wi.metadata})]})]}),o.jsxs(Q,{gap:"60px",mt:"16px",sx:{"@media screen and (max-width: 810px)":{w:"100%",display:"flex",gap:"8px",mt:"12px",flexDirection:"column"}},children:[o.jsxs(J,{gap:"4px",align:"flex-start",sx:{"@media screen and (max-width: 810px)":{w:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},children:[o.jsx(B,{fontSize:"xs",children:"APR(24h)"}),o.jsx(Rc,{info:l,h5FontSize:"12px",children:o.jsx(B,{fontSize:"md",color:"text_caption",sx:{"@media screen and (max-width: 810px)":{fontSize:"xs"}},children:Ao(V(l==null?void 0:l.totalApr).mul(100).toString())})})]}),o.jsx(ws,{text:"TVL(Total Value Locked)",value:he((ki=l==null?void 0:l.pureTvlUSD)==null?void 0:ki.now,2)}),o.jsx(ws,{text:"Volume(24h)",value:he((bi=l==null?void 0:l.volUSD)==null?void 0:bi.day,2)}),o.jsx(ws,{text:"Fees(24h)",value:he((Ti=l==null?void 0:l.feesUSD)==null?void 0:Ti.day,2)})]}),o.jsxs(Q,{w:"100%",gap:"16px",mt:"40px",align:"flex-start",sx:{"@media screen and (max-width: 810px)":{display:"flex",flexDirection:"column"}},children:[o.jsxs(J,{w:"60%",gap:"16px",minW:"580px",sx:{"@media screen and (max-width: 810px)":{minW:"unset",w:"100%"}},children:[o.jsxs(Q,{w:"100%",sx:{"@media screen and (max-width: 810px)":{display:"flex",alignItems:"flex-start",flexDirection:"column"}},children:[o.jsxs(J,{w:"100%",align:"flex-start",gap:"4px",children:[o.jsx(B,{fontSize:"xs",children:"Current Price"}),o.jsxs(ut,{children:[o.jsx(B,{fontSize:"md",color:"text_caption",children:ot}),o.jsx(B,{fontSize:"md",ml:"8px",children:ht})]})]}),o.jsx(Q,{sx:{"@media screen and (max-width: 810px)":{w:"100%",justifyContent:"space-between"}}})]}),o.jsx(tt,{h:"332px",w:"100%",mt:"0px",userSelect:"none",children:o.jsx(Z0,{handleClickRefresh:A,ref:q})}),o.jsxs(J,{w:"100%",m:"12px 0",children:[o.jsxs(Q,{w:"100%",justifyContent:"space-between",sx:{"@media screen and (max-width: 810px)":{mt:"60px",display:"flex",alignItems:"flex-start",flexDirection:"column"}},children:[o.jsxs(ut,{align:"center",children:[o.jsx(B,{children:"Deposit Ratio"}),o.jsx(Cn,{label:"The Deposit Ratio indicates the proportion of token1 and token2 required to be deposited for the selected range.","aria-label":"Ratio",placement:e>810?"right":"bottom",children:o.jsx("button",{children:o.jsx(zt,{xlinkHref:"#icon-icon_tips",variant:"grayprimary"})})})]}),o.jsxs(Q,{align:"center",gap:"12px",children:[o.jsxs(B,{color:"text_caption",children:[u==null?void 0:u.symbol," ",(u==null?void 0:u.metadata)&&(L==null?void 0:L[u==null?void 0:u.metadata]),"%"]}),o.jsx(tt,{w:"100px",children:o.jsx(Ko,{value:u!=null&&u.metadata&&(L==null?void 0:L[u==null?void 0:u.metadata])!=="--"?Number(L==null?void 0:L[u==null?void 0:u.metadata]):0})}),o.jsxs(B,{color:"text_caption",children:[c==null?void 0:c.symbol," ",(c==null?void 0:c.metadata)&&(L==null?void 0:L[c==null?void 0:c.metadata]),"%"]})]})]}),o.jsxs(Q,{w:"100%",justifyContent:"space-between",sx:{"@media screen and (max-width: 810px)":{mt:"12px",display:"flex",alignItems:"flex-start",flexDirection:"column"}},children:[o.jsxs(ut,{align:"center",children:[o.jsx(B,{children:"Concentrated Liquidity Multiplier"}),o.jsx(Cn,{label:"Provide liquidity within a fixed price range, maximizing the efficiency of the capital locked.The Concentrated Liquidity Multiplier calculates the capital efficiency gains of a concentrated liquidity position relative to allocating capital across the entire price curve.","aria-label":"Multiplier",placement:e>810?"right":"bottom",children:o.jsx("button",{children:o.jsx(zt,{xlinkHref:"#icon-icon_tips",variant:"grayprimary"})})})]}),o.jsx(Q,{align:"center",gap:"12px",children:o.jsx(B,{color:"text_caption",children:Lt})})]})]}),e>810&&At(e)]}),o.jsxs(J,{w:"40%",minW:"380px",maxW:"440px",gap:"16px",sx:{"@media screen and (max-width: 810px)":{w:"100%",maxW:"unset",minW:"unset"}},children:[o.jsx(Jc,{}),o.jsx(sl,{handleClickRefresh:A}),e<=810&&At(e)]})]}),o.jsx(Zo,{isOpen:K,onClose:()=>{G(!1),t("/pools/pool")},onContinue:function(){G(!1)},tokens:st})]}),bt&&o.jsx(tt,{mt:"20px",children:o.jsx(xe,{type:"nodata",text:"Pool not found",h:"330px"})}),o.jsx(Ac,{isOpen:X,onChange:xt,onClose:()=>Z(!1)})]})}function Nr(t){const{getExplorerUrl:e}=Bn(),{name:n,address:s}=t;return o.jsxs(ut,{w:"100%",bg:"bg_secondary",align:"center",p:"8px 12px",borderRadius:"8px",justifyContent:"center",children:[o.jsx(B,{fontSize:"xs",color:"text_caption",children:n}),o.jsx(Sn,{href:e(s),target:"_blank",variant:"link",fontSize:"xs",color:"primary",ml:"8px",children:We(s)})]})}function ws(t){const{text:e,value:n}=t;return o.jsxs(J,{gap:"4px",align:"flex-start",sx:{"@media screen and (max-width: 810px)":{w:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},children:[o.jsx(B,{fontSize:"xs",children:e}),o.jsx(B,{fontSize:"md",color:"text_caption",sx:{"@media screen and (max-width: 810px)":{fontSize:"xs"}},children:n})]})}export{pp as default};
