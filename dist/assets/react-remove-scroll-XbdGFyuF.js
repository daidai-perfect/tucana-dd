import{r as n}from"./react-CxzTU07i.js";import{f as V,z as Z,R as F}from"./react-remove-scroll-bar-B8WFODEn.js";import{a as z,e as _}from"./use-sidecar-Mnt-C9DP.js";import{u as Q}from"./use-callback-ref-BUZizod5.js";import{s as q}from"./react-style-singleton-BMjn4bnO.js";var w=function(){return w=Object.assign||function(r){for(var o,t=1,c=arguments.length;t<c;t++){o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r},w.apply(this,arguments)};function G(e,r){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,t=Object.getOwnPropertySymbols(e);c<t.length;c++)r.indexOf(t[c])<0&&Object.prototype.propertyIsEnumerable.call(e,t[c])&&(o[t[c]]=e[t[c]]);return o}function J(e,r,o){if(o||arguments.length===2)for(var t=0,c=r.length,i;t<c;t++)(i||!(t in r))&&(i||(i=Array.prototype.slice.call(r,0,t)),i[t]=r[t]);return e.concat(i||Array.prototype.slice.call(r))}var I=z(),T=function(){},N=n.forwardRef(function(e,r){var o=n.useRef(null),t=n.useState({onScrollCapture:T,onWheelCapture:T,onTouchMoveCapture:T}),c=t[0],i=t[1],d=e.forwardProps,u=e.children,m=e.className,S=e.removeScrollBar,b=e.enabled,y=e.shards,R=e.sideCar,C=e.noIsolation,E=e.inert,a=e.allowPinchZoom,l=e.as,f=l===void 0?"div":l,h=e.gapMode,v=G(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),g=R,s=Q([o,r]),P=w(w({},v),c);return n.createElement(n.Fragment,null,b&&n.createElement(g,{sideCar:I,removeScrollBar:S,shards:y,noIsolation:C,inert:E,setCallbacks:i,allowPinchZoom:!!a,lockRef:o,gapMode:h}),d?n.cloneElement(n.Children.only(u),w(w({},P),{ref:s})):n.createElement(f,w({},P,{className:m,ref:s}),u))});N.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};N.classNames={fullWidth:V,zeroRight:Z};var X=!1;if(typeof window<"u")try{var L=Object.defineProperty({},"passive",{get:function(){return X=!0,!0}});window.addEventListener("test",L,L),window.removeEventListener("test",L,L)}catch{X=!1}var p=X?{passive:!1}:!1,K=function(e){return e.tagName==="TEXTAREA"},j=function(e,r){if(!(e instanceof Element))return!1;var o=window.getComputedStyle(e);return o[r]!=="hidden"&&!(o.overflowY===o.overflowX&&!K(e)&&o[r]==="visible")},U=function(e){return j(e,"overflowY")},$=function(e){return j(e,"overflowX")},D=function(e,r){var o=r.ownerDocument,t=r;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var c=H(e,t);if(c){var i=x(e,t),d=i[1],u=i[2];if(d>u)return!0}t=t.parentNode}while(t&&t!==o.body);return!1},ee=function(e){var r=e.scrollTop,o=e.scrollHeight,t=e.clientHeight;return[r,o,t]},re=function(e){var r=e.scrollLeft,o=e.scrollWidth,t=e.clientWidth;return[r,o,t]},H=function(e,r){return e==="v"?U(r):$(r)},x=function(e,r){return e==="v"?ee(r):re(r)},te=function(e,r){return e==="h"&&r==="rtl"?-1:1},ae=function(e,r,o,t,c){var i=te(e,window.getComputedStyle(r).direction),d=i*t,u=o.target,m=r.contains(u),S=!1,b=d>0,y=0,R=0;do{var C=x(e,u),E=C[0],a=C[1],l=C[2],f=a-l-i*E;(E||f)&&H(e,u)&&(y+=f,R+=E),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!m&&u!==document.body||m&&(r.contains(u)||r===u));return(b&&(Math.abs(y)<1||!c)||!b&&(Math.abs(R)<1||!c))&&(S=!0),S},O=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},W=function(e){return[e.deltaX,e.deltaY]},A=function(e){return e&&"current"in e?e.current:e},ne=function(e,r){return e[0]===r[0]&&e[1]===r[1]},oe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},le=0,k=[];function ce(e){var r=n.useRef([]),o=n.useRef([0,0]),t=n.useRef(),c=n.useState(le++)[0],i=n.useState(q)[0],d=n.useRef(e);n.useEffect(function(){d.current=e},[e]),n.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(c));var a=J([e.lockRef.current],(e.shards||[]).map(A),!0).filter(Boolean);return a.forEach(function(l){return l.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),a.forEach(function(l){return l.classList.remove("allow-interactivity-".concat(c))})}}},[e.inert,e.lockRef.current,e.shards]);var u=n.useCallback(function(a,l){if("touches"in a&&a.touches.length===2)return!d.current.allowPinchZoom;var f=O(a),h=o.current,v="deltaX"in a?a.deltaX:h[0]-f[0],g="deltaY"in a?a.deltaY:h[1]-f[1],s,P=a.target,B=Math.abs(v)>Math.abs(g)?"h":"v";if("touches"in a&&B==="h"&&P.type==="range")return!1;var M=D(B,P);if(!M)return!0;if(M?s=B:(s=B==="v"?"h":"v",M=D(B,P)),!M)return!1;if(!t.current&&"changedTouches"in a&&(v||g)&&(t.current=s),!s)return!0;var Y=t.current||s;return ae(Y,l,a,Y==="h"?v:g,!0)},[]),m=n.useCallback(function(a){var l=a;if(!(!k.length||k[k.length-1]!==i)){var f="deltaY"in l?W(l):O(l),h=r.current.filter(function(s){return s.name===l.type&&(s.target===l.target||l.target===s.shadowParent)&&ne(s.delta,f)})[0];if(h&&h.should){l.cancelable&&l.preventDefault();return}if(!h){var v=(d.current.shards||[]).map(A).filter(Boolean).filter(function(s){return s.contains(l.target)}),g=v.length>0?u(l,v[0]):!d.current.noIsolation;g&&l.cancelable&&l.preventDefault()}}},[]),S=n.useCallback(function(a,l,f,h){var v={name:a,delta:l,target:f,should:h,shadowParent:ie(f)};r.current.push(v),setTimeout(function(){r.current=r.current.filter(function(g){return g!==v})},1)},[]),b=n.useCallback(function(a){o.current=O(a),t.current=void 0},[]),y=n.useCallback(function(a){S(a.type,W(a),a.target,u(a,e.lockRef.current))},[]),R=n.useCallback(function(a){S(a.type,O(a),a.target,u(a,e.lockRef.current))},[]);n.useEffect(function(){return k.push(i),e.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:R}),document.addEventListener("wheel",m,p),document.addEventListener("touchmove",m,p),document.addEventListener("touchstart",b,p),function(){k=k.filter(function(a){return a!==i}),document.removeEventListener("wheel",m,p),document.removeEventListener("touchmove",m,p),document.removeEventListener("touchstart",b,p)}},[]);var C=e.removeScrollBar,E=e.inert;return n.createElement(n.Fragment,null,E?n.createElement(i,{styles:oe(c)}):null,C?n.createElement(F,{gapMode:e.gapMode}):null)}function ie(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const ue=_(I,ce);var se=n.forwardRef(function(e,r){return n.createElement(N,w({},e,{ref:r,sideCar:ue}))});se.classNames=N.classNames;export{se as R};
