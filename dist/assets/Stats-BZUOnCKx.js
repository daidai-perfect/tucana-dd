import{l as P,aA as B,r as d,ax as z,o as R,j as e,V as k,F as f,T as g,ak as S,a1 as _,R as F,v as W,q as p,w as b}from"./index-Dgqs041M.js";import{R as G,A as N,X as L,Y as M,a as O}from"./AreaChart-BuxusYmj.js";import{T as U,B as H,R as K}from"./generateCategoricalChart-DZY6LdP9.js";import{B as I}from"./BarChart-DDU5zPbZ.js";import{T as J}from"./TopPools-DMOils8C.js";import{T as Y}from"./TopTokens-B2ib969X.js";import{u as X}from"./useStatsData-DDZUcDXZ.js";import"./BackButton-B2kdNoCL.js";import"./TableCardH5-BG9IhJuQ.js";import"./apiDataProcessing-C4BEK6So.js";import"./AprTooltip-DoWY42DS.js";function q(){const r=P(B),[t,a]=d.useState([]),[s,i]=d.useState(!0);return{loading:s,lineDataList:t,getLineDate:async(h,u,m)=>{i(!0);try{const x=await(await fetch(`${r}?date_type=${h}&histogram_type=${u}&limit=${m}`)).json();console.log("0911##getLineDatejson",x,x.data.list),a(x&&x.data&&x.data.list),i(!1)}catch(o){console.log(o,"errorgetLineDate")}}}}function V(r){const{type:t}=r,{analyticsDate:a}=z(),[s,i]=d.useState("1D"),[c,h]=d.useState(T(new Date)),[u,m]=d.useState("--"),o=l=>{console.log("handleRadioChange value: ",l),i(l)};d.useEffect(()=>{var l,v;a&&m(t=="totalValue"?(l=a==null?void 0:a.pureTvlUSD)==null?void 0:l.now:(v=a==null?void 0:a.volUSD)==null?void 0:v.day)},[a]);const x=()=>e.jsx(f,{h:"20px",children:e.jsx(F,{options:["1D","7D","30D"],size:"s",value:s,onChange:o})}),{windowWidth:y}=R();return e.jsxs(k,{w:"100%",bg:"card_bg",p:"16px",backdropFilter:"blur(10px)",gap:"0",borderRadius:"12px",children:[e.jsxs(f,{w:"100%",justify:"space-between",children:[e.jsxs(k,{gap:"0",align:"flex-start",children:[e.jsx(g,{fontSize:"sm",children:t=="totalValue"?"Total Value Locked":"Trading Volume (24H)"}),a?e.jsx(g,{fontSize:"2xl",color:"text_caption",children:S(u,2)}):e.jsx(f,{h:"36px",align:"center",children:e.jsx(_,{})})]}),y>810&&x()]}),e.jsx(g,{w:"100%",mb:"20px",fontSize:"xs",sx:{"@media screen and (max-width: 810px)":{mb:"8px"}},children:c}),y<=810&&e.jsx(f,{sx:{"@media screen and (max-width: 810px)":{w:"100%",mb:"20px",justifyContent:"flex-start"}},children:x()}),e.jsx(Q,{type:t,dateType:s,analyticsDate:a,timeChange:l=>{h(l)},valueChange:l=>{m(l)}})]})}function Q(r){const{analyticsDate:t,type:a,dateType:s,timeChange:i,valueChange:c}=r,{loading:h,lineDataList:u,getLineDate:m}=q(),o=d.useMemo(()=>u.reverse(),[u]);d.useEffect(()=>{const n=s=="1D"?"day":s=="7D"?"week":"month",j=s=="1D"?40:s=="7D"?30:20,E=a=="totalValue"?"pure_tvl":"vol";m(n,E,j)},[s]);const x=(o==null?void 0:o.length)>0?Math.floor(Math.min(...o.map(n=>n.num))):0,y=Math.ceil(Math.max(...o.map(n=>n.num))),[l,v]=d.useState(null),w=n=>{if(n&&n.activePayload&&n.activePayload.length){i(T(new Date(Date.parse(n.activePayload[0].payload.date)))),c(n.activePayload[0].payload.num);const j=n.activePayload[0];v(j)}},D=()=>{var n,j;i(T(new Date)),c(a=="totalValue"?(n=t==null?void 0:t.pureTvlUSD)==null?void 0:n.now:(j=t==null?void 0:t.volUSD)==null?void 0:j.day),v(null)};return e.jsx(e.Fragment,{children:h?e.jsx(k,{p:"20px 0px 70px",children:e.jsx(W,{})}):e.jsx(G,{width:"100%",height:180,children:a=="totalValue"?e.jsxs(N,{data:o,syncId:a,onMouseEnter:w,onMouseMove:w,onMouseLeave:D,margin:{top:8,right:8,left:8,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--chakra-colors-primary)",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-primary)",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--chakra-colors-primary)",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-primary)",stopOpacity:0})]})]}),e.jsx(L,{dataKey:"date",tickLine:!1,reversed:!0,tick:e.jsx(A,{type:a}),interval:(o==null?void 0:o.length)<10?0:parseInt(String((o==null?void 0:o.length)/6))}),e.jsx(M,{domain:[x,y],hide:!0,axisLine:!1,tickLine:!1}),e.jsx(U,{cursor:{stroke:"var(--chakra-colors-primary)",strokeWidth:1,strokeDasharray:"3 2"},content:e.jsx($,{})}),e.jsx(O,{type:"monotone",dataKey:"num",stroke:"var(--chakra-colors-primary)",fill:"url(#colorUv)"})]}):e.jsxs(I,{data:o,barSize:5,barCategoryGap:120,onMouseEnter:w,onMouseMove:w,onMouseLeave:D,margin:{top:8,right:8,left:8,bottom:0},children:[e.jsx(U,{cursor:{stroke:"var(--chakra-colors-primary)",strokeWidth:10,strokeDasharray:"3 2"},content:e.jsx($,{})}),e.jsx(H,{dataKey:"num",fill:"var(--chakra-colors-primary)",className:"custom-bar"}),e.jsx(M,{domain:[x,y],hide:!0,axisLine:!1,tickLine:!1}),e.jsx(L,{scale:"point",dataKey:"date",reversed:!0,tickLine:!1,tick:A,interval:(o==null?void 0:o.length)<10?0:parseInt(String((o==null?void 0:o.length)/6))}),l&&e.jsx(K,{x:l.payload.date,stroke:"var(--chakra-colors-chart_tooltip_line)",strokeDasharray:"3 3"})]})})})}const A=r=>{const{x:t,y:a,payload:s,type:i}=r,c=new Date(s.value);["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][c.getUTCDay()];const u=Number(c.getUTCDate())>=10?`${c.getUTCDate()}`:`0${c.getUTCDate()}`;return e.jsx("g",{transform:`translate(${t},${a})`,children:e.jsx("text",{x:0,y:0,dy:i=="totalValue"?12:18,textAnchor:"middle",fill:"var(--chakra-colors-text_paragraph)",fontSize:12,children:u})})},$=r=>e.jsx(p,{}),T=r=>{const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=r.getUTCFullYear(),s=t[r.getUTCMonth()],i=r.getUTCDate();return`${s} ${i}, ${a} (UTC)`};function xe(){var s,i;const{getAnalyticsData:r}=X(),{analyticsDate:t}=z(),{windowWidth:a}=R();return d.useEffect(()=>{window.scrollTo(0,0),r()},[]),e.jsxs(p,{w:"100%",children:[e.jsx(g,{color:"text_caption",fontSize:"xl",mb:"20px",children:"Stats"}),e.jsxs(f,{w:"100%",sx:{"@media screen and (max-width: 810px)":{flexDirection:"column"}},children:[e.jsx(V,{type:"totalValue"}),e.jsx(p,{w:"20px",sx:{"@media screen and (max-width: 810px)":{h:"8px"}}}),e.jsx(V,{type:"tradingVolume"})]}),e.jsxs(f,{w:"100%",justifyContent:"space-between",align:"center",mt:"40px",sx:{"@media screen and (max-width: 810px)":{justifyContent:"space-between",flexDirection:"column"}},children:[e.jsx(C,{text:"Cumulative Volume",value:S((s=t==null?void 0:t.volUSD)==null?void 0:s.total,2),isLoading:!t}),a<=810&&e.jsx(p,{h:"8px"}),e.jsx(C,{text:"Total Value Locked",value:S((i=t==null?void 0:t.pureTvlUSD)==null?void 0:i.now,2),isLoading:!t}),a<=810&&e.jsx(p,{h:"8px"}),e.jsx(C,{text:"Cumulative Transactions",value:b((t==null?void 0:t.totalTxCount)||"0"),isLoading:!t}),a<=810&&e.jsx(p,{h:"8px"}),e.jsx(C,{text:"Total Accounts",value:b((t==null?void 0:t.userCount)||"0"),isLoading:!t})]}),e.jsx(p,{w:"100%",mt:"40px",children:e.jsx(Y,{})}),e.jsx(p,{w:"100%",mt:"40px",children:e.jsx(J,{})})]})}function C(r){const{text:t,value:a,isLoading:s}=r;return e.jsxs(k,{justifyContent:"center",gap:"4px",sx:{"@media screen and (max-width: 810px)":{w:"100%",display:"flex",justifyContent:"space-between",flexDirection:"row"}},children:[e.jsx(g,{fontSize:"xs",children:t}),!a||s?e.jsx(p,{h:"30px",children:e.jsx(_,{w:"60px",h:"21px"})}):e.jsx(g,{color:"text_caption",fontSize:"xl",sx:{"@media screen and (max-width: 810px)":{fontSize:"md"}},children:a})]})}export{xe as default};
