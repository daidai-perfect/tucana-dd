import{O as ss,be as ns,r as u,ax as es,a8 as rs,o as os,j as n,V as j,F as x,bN as as,T as o,I as ls,a9 as ts,q as N,aa as is,ab as cs,ac as U,ad as p,ah as C,ae as xs,af as ds,ag as h,aZ as us,H as P,p as ps,ak as A,L as hs,t as js,B as gs,bA as q,a1 as E}from"./index-CZ9BtG6K.js";import{B as Ts}from"./BackButton-kWb8EKEC.js";import{u as fs,H as ks}from"./useStatsData-1Zdr_-lD.js";import{T as M}from"./TableCardH5-n0g93OwG.js";import{g as Ss}from"./apiDataProcessing-BAM4zGSR.js";import{A as bs}from"./AprTooltip-xeBNZxDD.js";function Ps(O){const{isViewAll:l}=O,v=ss(),{tokenList:g}=ns(),[f,Z]=u.useState(1),[c,ys]=u.useState(10),{getPairsData:_,poolsLoading:k}=fs(),{poolsListLength:S,poolsList:T}=es(),{isImportToken:b}=rs(),d=u.useMemo(()=>l?T:(T==null?void 0:T.filter(e=>{var r,i;return!b(((r=e==null?void 0:e.token0)==null?void 0:r.metadata)||"")&&!b(((i=e==null?void 0:e.token1)==null?void 0:i.metadata)||"")})).slice(0,c),[T]);u.useEffect(()=>{if(g&&(g==null?void 0:g.length)>0){const s={limit:l?c:1e3,offset:Number((f-1)*c),orderBy:t==="asc"?a:"-"+a};_(s)}},[f,g]);const G=[{label:"TVL",value:"pure_tvl"},{label:"Volume (24H)",value:"vol"},{label:"Volume (7D)",value:"vol_week"},{label:"APR",value:"apr"}],[t,I]=u.useState("desc"),[a,J]=u.useState("vol"),y=(s,e)=>{I(e),J(s);const r={limit:l?c:1e3,offset:Number((f-1)*c),orderBy:e==="asc"?s:"-"+s};_(r)},w=s=>{a==s?y(s,t=="desc"?"asc":"desc"):y(s,"desc")},K=s=>{Z(s)},Q=s=>{a!=s&&y(s,"desc")},X=s=>{y(s,t=="desc"?"asc":"desc")},V=s=>{var e,r,i,R,W,$;return n.jsxs(P,{gap:"0px",children:[n.jsx(ps,{w:"40px",variant:"border",coinAIconUrl:(e=s==null?void 0:s.displayToken0)==null?void 0:e.image,coinBIconUrl:(r=s==null?void 0:s.displayToken1)==null?void 0:r.image,showATag:b(((i=s==null?void 0:s.displayToken0)==null?void 0:i.metadata)||""),showBTag:b(((R=s==null?void 0:s.displayToken1)==null?void 0:R.metadata)||"")}),n.jsxs(j,{gap:"0px",ml:"8px",align:"flex-start",children:[n.jsxs(o,{color:"text_caption",children:[(W=s==null?void 0:s.displayToken0)==null?void 0:W.symbol," - ",($=s==null?void 0:s.displayToken1)==null?void 0:$.symbol]}),n.jsx(o,{mt:"4px",p:"0px 8px",color:"primary",fontSize:"xs",minW:"52px",textAlign:"center",h:"16px",lineHeight:"16px",borderRadius:"8px",bg:"bg_secondary",children:Ss(s==null?void 0:s.feeTier)})]})]})},z=s=>{var e;return n.jsxs(o,{color:"text_caption",children:[" ",A((e=s==null?void 0:s.pureTvlUSD)==null?void 0:e.now,2)]})},F=s=>{var e;return n.jsxs(o,{color:"text_caption",children:[" ",A((e=s==null?void 0:s.volUSD)==null?void 0:e.day,2)]})},H=s=>{var e;return n.jsxs(o,{color:"text_caption",children:[" ",A((e=s==null?void 0:s.volUSD)==null?void 0:e.week,2)]})},B=s=>n.jsx(P,{w:"100%",justifyContent:"flex-end",children:n.jsx(bs,{info:s,children:n.jsx(o,{color:"text_caption",fontSize:"sm",children:hs(s.totalApr?js(s.totalApr).mul(100).toString():void 0)})})}),D=s=>n.jsx(gs,{w:"80px",h:"32px",fontSize:"sm",variant:"ghost",onClick:()=>{var e,r;return v(`/pools/liquidity/${(e=s==null?void 0:s.displayToken0)==null?void 0:e.metadata}/${(r=s==null?void 0:s.displayToken1)==null?void 0:r.metadata}/${s==null?void 0:s.feeTier}`)},sx:{"@media screen and (max-width: 810px)":{w:"100%"}},children:"Deposit"}),Y=s=>[{leftText:"TVL",right:z(s)},{leftText:"Volume (24H)",right:F(s)},{leftText:"Volume (7D)",right:H(s)},{leftText:"APR",right:B(s)}],{windowWidth:m}=os();return n.jsxs(j,{borderRadius:"12px",children:[n.jsxs(x,{w:"100%",align:"center",justifyContent:"space-between",children:[n.jsxs(x,{align:"center",mb:"8px",children:[l?n.jsx(Ts,{}):null,n.jsx(as,{color:"text_caption",fontSize:"md",ml:l?"4px":"",children:"Top Pools"})]}),l?null:n.jsxs(x,{align:"center",cursor:"pointer",onClick:()=>v("/stats/pool"),children:[n.jsx(o,{color:"text_caption",sx:{_hover:{color:"primary"}},children:"View All"}),n.jsx(ls,{xlinkHref:"#icon-icon_arrow",cursor:"pointer"})]})]}),n.jsx(ts,{w:"100%",children:m<=810?n.jsxs(j,{w:"100%",children:[n.jsx(N,{mt:"8px",w:"100%",children:n.jsx(ks,{sortingRule:t,sortingField:a,onSortingFieldClick:s=>Q(s),onSortClick:s=>X(s),list:G,isPool:!0})}),k?[{},{},{}].map((s,e)=>n.jsx(j,{w:"100%",children:n.jsx(M,{LoadingFirstTd:L(),isLoading:k})},e)):d==null?void 0:d.map((s,e)=>n.jsx(j,{w:"100%",children:n.jsx(M,{LoadingFirstTd:L(),isLoading:k,tokensSymbol:V(s),rowList:Y(s),btntNode:D(s)})},s==null?void 0:s.id))]}):n.jsxs(is,{size:"sm",children:[n.jsx(cs,{children:n.jsxs(U,{children:[n.jsx(p,{children:"Pool"}),n.jsx(p,{isNumeric:!0,children:n.jsxs(x,{align:"center",justifyContent:"flex-end",onClick:()=>w("pure_tvl"),children:[n.jsx(o,{fontSize:"xs",children:"TVL"}),n.jsx(C,{value:a=="pure_tvl"?t:void 0})]})}),n.jsx(p,{isNumeric:!0,textAlign:"right",children:n.jsxs(x,{align:"center",justifyContent:"flex-end",onClick:()=>w("vol"),children:[n.jsx(o,{fontSize:"xs",children:"Volume (24H)"}),n.jsx(C,{value:a=="vol"?t:void 0})]})}),n.jsx(p,{isNumeric:!0,textAlign:"right",children:n.jsxs(x,{align:"center",justifyContent:"flex-end",onClick:()=>w("vol_week"),children:[n.jsx(o,{fontSize:"xs",children:"Volume (7D)"}),n.jsx(C,{value:a=="vol_week"?t:void 0})]})}),n.jsx(p,{isNumeric:!0,textAlign:"right",children:n.jsxs(x,{align:"center",justifyContent:"flex-end",onClick:()=>w("apr"),children:[n.jsx(o,{fontSize:"xs",children:"APR"}),n.jsx(C,{value:a=="apr"?t:void 0})]})}),n.jsx(p,{})]})}),k?n.jsx(xs,{tableList:[{},{},{},{},{},{},{},{},{},{}],tdList:[{},{},{},{},{}],firstTd:L()}):n.jsx(ds,{children:d==null?void 0:d.map((s,e)=>n.jsxs(U,{h:"72px",cursor:"pointer",onClick:()=>{var r,i;return v(`/pools/liquidity/${(r=s==null?void 0:s.displayToken0)==null?void 0:r.metadata}/${(i=s==null?void 0:s.displayToken1)==null?void 0:i.metadata}/${s==null?void 0:s.feeTier}`)},children:[n.jsx(h,{minW:"250px",children:V(s)}),n.jsx(h,{isNumeric:!0,textAlign:"right",children:z(s)}),n.jsx(h,{isNumeric:!0,textAlign:"right",children:F(s)}),n.jsx(h,{isNumeric:!0,textAlign:"right",children:H(s)}),n.jsx(h,{isNumeric:!0,textAlign:"right",children:B(s)}),n.jsx(h,{isNumeric:!0,children:D(s)})]},e))})]})}),!l||Number(S)<c?null:n.jsx(N,{m:"20px 0",children:n.jsx(us,{total:Number(S)<20||l?S:20,size:c,currentPage:f,onChange:K})})]})}function L(){return n.jsxs(P,{gap:"4px",align:"center",children:[n.jsx(q,{size:"9"}),n.jsx(N,{ml:"-20px",children:n.jsx(q,{size:"9"})}),n.jsxs(j,{gap:"4px",align:"flex-start",children:[n.jsx(E,{}),n.jsx(E,{w:"60px"})]})]})}export{L,Ps as T};
