import{r as i,j as s}from"./react-CxzTU07i.js";import{i as ne,I as re,_ as b,Z as te,ad as oe,ai as ae,S as ie,m,$ as N,K as le}from"./App-Cb960mne.js";import{B as ce}from"./BackButton-CQFe92gG.js";import"./bn.js-CjHYPH1W.js";import{u as xe,H as de}from"./useStatsData-OWdT72AP.js";import{T as D}from"./TableCardH5-CxOqm6xI.js";import{a as ue}from"./usePoolList-D7LBbYQN.js";import{u as he}from"./useApiUrl-BWcjgV84.js";import{u as ge}from"./useWindowWidth-DaYijioX.js";import{c as pe}from"./react-router-COZMEyo_.js";import{V as h,F as c,m as je,T as t,a9 as fe,f as E,aa as Te,ab as Ce,j as U,ac as d,i as Se,k as u,H as K,B as ke,ao as we,l as M}from"./@chakra-ui-F3U2dpjw.js";function Re(O){const{isViewAll:o}=O,f=pe(),{tokenList:g}=ne(),[T,Z]=i.useState(1),[l,ve]=i.useState(10),{tokenLoading:C,getStatsTokenData:z}=xe(),{tokensList:p,tokensListLength:S}=ue(),{isImportToken:P}=he(),F=e=>P(e.metadata)&&localStorage.getItem(e.metadata)!=="true",x=i.useMemo(()=>o?p:(p==null?void 0:p.filter(n=>!P((n==null?void 0:n.metadata)||""))).slice(0,l),[p]);i.useEffect(()=>{g&&(g==null?void 0:g.length)>0&&z(a==="asc"?r:"-"+r,o?l:1e3,(T-1)*l)},[T,g]);const q=[{label:"Price",value:"price"},{label:"Price Change",value:"priceChange"},{label:"Volume (24H)",value:"vol"},{label:"TVL",value:"pure_tvl"}],[a,G]=i.useState("desc"),[r,I]=i.useState("vol"),k=(e,n)=>{G(n),I(e),z(n==="asc"?e:"-"+e,o?l:1e3,(T-1)*l)},w=e=>{r==e?k(e,a=="desc"?"asc":"desc"):k(e,"desc")},J=e=>{Z(e)},Q=e=>{r!=e&&k(e,"desc")},X=e=>{k(e,a=="desc"?"asc":"desc")},_=e=>s.jsxs(K,{gap:"0px",children:[s.jsx(ie,{imageUrl:e==null?void 0:e.image,showTag:P((e==null?void 0:e.metadata)||"")}),s.jsxs(h,{gap:"0px",ml:"8px",align:"flex-start",children:[s.jsx(m,{color:"text_caption",children:e==null?void 0:e.symbol}),s.jsx(m,{fontSize:"xs",textMaxNum:24,children:e==null?void 0:e.name})]})]}),y=e=>{var n;return s.jsx(t,{color:"text_caption",children:N((n=e==null?void 0:e.price)==null?void 0:n.Price,2)})},H=e=>{var n,B,W;return s.jsx(t,{color:Number((n=e==null?void 0:e.price)==null?void 0:n.PriceChange.split("%")[0])>0?"success":"error",children:`${Number((B=e==null?void 0:e.price)==null?void 0:B.PriceChange.split("%")[0])>0?"+":""}${le(Number((W=e==null?void 0:e.price)==null?void 0:W.PriceChange.split("%")[0]).toFixed(2))}%`})},V=e=>{var n;return s.jsx(t,{color:"text_caption",children:N((n=e==null?void 0:e.volUSD)==null?void 0:n.day,2)})},A=e=>s.jsxs(t,{color:"text_caption",children:[" ",N(e==null?void 0:e.pureTvlUSD,2)]}),R=e=>s.jsx(ke,{w:"80px",h:"32px",fontSize:"sm",variant:"ghost",onClick:()=>{F(e)?($(e),v(!0)):f(`/swap/undefined/${e==null?void 0:e.metadata}`)},sx:{"@media screen and (max-width: 810px)":{w:"100%"}},children:"Swap"}),Y=e=>[{leftText:"Price",right:y(e)},{leftText:"Price Change",right:H(e)},{leftText:"Volume (24H)",right:V(e)},{leftText:"TVL",right:A(e)}],{windowWidth:ee}=ge(),[se,v]=i.useState(!1),[j,$]=i.useState(void 0);return s.jsxs(h,{borderRadius:"12px",children:[s.jsxs(c,{w:"100%",align:"center",justifyContent:"space-between",children:[s.jsxs(c,{align:"center",mb:"8px",children:[o?s.jsx(ce,{}):null,s.jsx(je,{color:"text_caption",fontSize:"md",ml:o?"4px":"",children:"Top Tokens"})]}),o?null:s.jsxs(c,{align:"center",cursor:"pointer",onClick:()=>f("/stats/token"),children:[s.jsx(t,{color:"text_caption",sx:{_hover:{color:"primary"}},children:"View All"}),s.jsx(re,{xlinkHref:"#icon-icon_arrow",cursor:"pointer"})]})]}),s.jsx(fe,{w:"100%",children:ee<=810?s.jsxs(h,{w:"100%",children:[s.jsx(E,{mt:"8px",w:"100%",children:s.jsx(de,{sortingRule:a,sortingField:r,onSortingFieldClick:e=>Q(e),onSortClick:e=>X(e),list:q,isPool:!0})}),C?[{},{},{}].map((e,n)=>s.jsx(h,{w:"100%",children:s.jsx(D,{LoadingFirstTd:L(),isLoading:C})},n)):x==null?void 0:x.map((e,n)=>s.jsx(h,{w:"100%",children:s.jsx(D,{LoadingFirstTd:L(),isLoading:C,tokensSymbol:_(e),rowList:Y(e),btntNode:R(e)})},e==null?void 0:e.metadata))]}):s.jsxs(Te,{size:"sm",children:[s.jsx(Ce,{children:s.jsxs(U,{children:[s.jsx(d,{children:"Token"}),s.jsx(d,{isNumeric:!0,textAlign:"right",children:s.jsxs(c,{align:"center",justifyContent:"flex-end",onClick:()=>w("price"),children:[s.jsx(t,{fontSize:"xs",children:"Price"}),s.jsx(b,{value:r=="price"?a:void 0})]})}),s.jsx(d,{isNumeric:!0,children:s.jsxs(c,{align:"center",justifyContent:"flex-end",onClick:()=>w("priceChange"),children:[s.jsx(t,{fontSize:"xs",children:"Price Change"}),s.jsx(b,{value:r=="priceChange"?a:void 0})]})}),s.jsx(d,{isNumeric:!0,textAlign:"right",children:s.jsxs(c,{align:"center",justifyContent:"flex-end",onClick:()=>w("vol"),children:[s.jsx(t,{fontSize:"xs",children:"Volume (24H)"}),s.jsx(b,{value:r=="vol"?a:void 0})]})}),s.jsx(d,{isNumeric:!0,textAlign:"right",children:s.jsxs(c,{align:"center",justifyContent:"flex-end",onClick:()=>w("pure_tvl"),children:[s.jsx(t,{fontSize:"xs",children:"TVL"}),s.jsx(b,{value:r=="pure_tvl"?a:void 0})]})}),s.jsx(d,{})]})}),C?s.jsx(te,{tableList:[{},{},{},{},{},{},{},{},{},{}],tdList:[{},{},{},{},{}],firstTd:L(),minW:"200px"}):s.jsx(Se,{children:x==null?void 0:x.map((e,n)=>s.jsxs(U,{h:"72px",cursor:"pointer",onClick:()=>{F(e)?($(e),v(!0)):f(`/swap/undefined/${e==null?void 0:e.metadata}`)},children:[s.jsx(u,{minW:"200px",children:_(e)}),s.jsx(u,{isNumeric:!0,textAlign:"right",children:y(e)}),s.jsx(u,{isNumeric:!0,textAlign:"right",children:H(e)}),s.jsx(u,{isNumeric:!0,textAlign:"right",children:V(e)}),s.jsx(u,{isNumeric:!0,textAlign:"right",children:A(e)}),s.jsx(u,{isNumeric:!0,children:R(e)})]},n))})]})}),!o||Number(S)<l?null:s.jsx(E,{m:"20px 0",children:s.jsx(oe,{total:Number(S)<20||o?S:20,size:l,currentPage:T,onChange:J})}),s.jsx(ae,{isOpen:se,onClose:()=>{v(!1)},onContinue:function(){v(!1),f(`/swap/undefined/${j==null?void 0:j.metadata}`)},tokens:j?[j]:[]})]})}function L(){return s.jsxs(K,{gap:"4px",align:"center",children:[s.jsx(we,{size:"9"}),s.jsxs(h,{gap:"4px",align:"flex-start",children:[s.jsx(M,{}),s.jsx(M,{w:"60px"})]})]})}export{Re as T};
