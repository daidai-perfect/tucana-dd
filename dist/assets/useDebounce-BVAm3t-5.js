import{r as h,a8 as M,j as e,C as k,k as N,F as i,T as l,i as z,B as y,$ as I,t as w,au as R,ar as E,bH as H,W as A,M as B,a as $,b as F,c as O,d as W,e as D,q as f,y as V,as as q,bp as G,I as v,bq as Y,bI as L}from"./index-CZ9BtG6K.js";import{u as U}from"./useRate-Dv8umWLB.js";function X(r,o,a,c){const{getRate:x}=U();return h.useMemo(()=>r!=null&&r.metadata&&o?x(o,r==null?void 0:r.metadata,a,c):"",[r,o])}function P(r){const{amount:o,balance:a,title:c,noMax:x,noArrow:g,currentCoin:n,textIsAvailable:s,onTokenChange:u,onAmountChange:m}=r,j=X(n,o),{isImportToken:b}=M(),S=p=>{u&&u(p)},C=p=>{const t=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(n==null?void 0:n.decimals)&&(n==null?void 0:n.decimals)}})?).*$`),T=p.target.value.replace(t,"$1");m(T||"")};return e.jsx(k,{width:"100%",p:"12px 16px",backgroundColor:"input_bg",border:"1px solid",borderColor:"border",children:e.jsx(N,{children:e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",gap:"4px",direction:"column",children:[e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[e.jsx(l,{fontSize:"xs",children:c||""}),e.jsxs(i,{align:"center",children:[e.jsxs(l,{fontSize:"xs",children:[s?"Available":"Balance",": ",z(a)]}),x?null:e.jsx(y,{variant:"outline",w:"38px",h:"20px",lineHeight:"20px",borderRadius:"4px",fontSize:"xs",ml:"8px",onClick:()=>{var t;console.log("Click Max balance: ",a),console.log("Click Max currentCoin: ",n),console.log("Click Max currentConfig: ",I);const p=(n==null?void 0:n.metadata)===((t=I)==null?void 0:t.nativeToken)&&!s?w(a).minus(.5).toString():a;m(p&&w(p).gt(0)?p:"0")},children:"MAX"})]})]}),e.jsxs(i,{align:"center",width:"100%",children:[e.jsx(R,{placeholder:"0.0",value:o,onChange:C,w:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),e.jsx(i,{gap:"8px",alignItems:"center",children:g?e.jsx(H,{symbol:n==null?void 0:n.symbol,icon:n==null?void 0:n.image,haveArrow:!g,showTag:b(n==null?void 0:n.metadata),showTagWidth:"16px",showTagHeight:"16px"}):e.jsx(E,{h:"32px",current:n,onChange:S,noArrow:g,showTagWidth:"16px",showTagHeight:"16px"})})]}),e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[e.jsx(l,{fontSize:"xs",children:j&&`$${j}`}),e.jsx(l,{fontSize:"xs",children:n==null?void 0:n.name})]})]})})})}function Q(r){const{isOpen:o,onClose:a,showRouter:c=!1}=r,{slippage:x,setSlippage:g}=A(),n=["0.1","0.5","1"],[s,u]=h.useState(""),[m,j]=h.useState(!0);h.useEffect(()=>{console.log("showRouter: ",c)},[c]),h.useEffect(()=>{const t=Number(localStorage.getItem("tucana-slippage"))*100||w(x).mul(100).toString();u(String(t))},[o]);const b=t=>{const d=t.target.value.replace(/[^\d^.]+/g,""),_=d&&d[d.length-1]!="."&&d.length>3&&(d!=null&&d.includes("."))?L(d,2):d;u(_)},S=t=>{u(t)};h.useEffect(()=>{x&&u(String(x))},[x]);const C=t=>{j(t)},p=()=>{if(s){const t=w(s).div(100).toNumber();g(t),localStorage.setItem("tucana-slippage",String(t))}a()};return e.jsxs(B,{isOpen:o,onClose:a,isCentered:!0,children:[e.jsx($,{}),e.jsxs(F,{children:[e.jsx(O,{fontWeight:"400 !important",children:"Settings"}),e.jsx(W,{}),e.jsxs(D,{pb:"16px",children:[e.jsxs(f,{children:[e.jsx(l,{children:"Slippage Tolerance"}),e.jsxs(i,{align:"center",w:"100%",justifyContent:"space-between",mt:"8px",children:[e.jsx(i,{justifyContent:"center",alignItems:"center",p:"4px",sx:{"@media screen and (max-width: 810px)":{w:"70%"}},children:n.map(t=>e.jsx(V,{cursor:"pointer",w:"80px",h:"40px",bg:t===String(s)?"primary":"bg_secondary",mr:"8px",borderRadius:"8px",onClick:()=>S(t),sx:{"@media screen and (max-width: 810px)":{w:"33%"}},children:e.jsxs(l,{color:t===String(s)?"highlight_content_text":"text_paragraph",children:[t,"%"]})},t))}),e.jsxs(q,{alignItems:"center",justifyContent:"center",sx:{"@media screen and (max-width: 810px)":{w:"30%"}},children:[e.jsx(R,{borderRadius:"8px",w:"132px",h:"40px",mr:"2px",variant:"outline",value:s,onChange:b,textAlign:"right",fontSize:"sm",pr:"52px",pl:"32px",placeholder:"0.5",sx:{"@media screen and (max-width: 810px)":{w:"100%",pr:"28px",pl:"12px"}}}),e.jsx(G,{width:"20px",height:"20px",right:"34px",top:"0px",sx:{"@media screen and (max-width: 810px)":{right:"12px"}},children:e.jsx(l,{fontSize:"sm",color:"text_caption",children:"%"})})]})]}),s&&(Number(s)>1||Number(s)<.05)?e.jsxs(f,{w:"100%",h:"20px",borderRadius:"20px",mt:"8px",children:[Number(s)<.05?e.jsxs(i,{align:"center",children:[e.jsx(v,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"warning"}),e.jsx(l,{fontSize:"xs",color:"warning",ml:"4px",children:"Slippage is low. Your transaction may fail."})]}):null,Number(s)<=50&&Number(s)>1?e.jsxs(i,{align:"center",children:[e.jsx(v,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"warning"}),e.jsx(l,{fontSize:"xs",color:"warning",ml:"4px",children:"Your transaction may be frontrun."})]}):null,Number(s)>50?e.jsxs(i,{align:"center",children:[e.jsx(v,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"error"}),e.jsx(l,{fontSize:"xs",color:"error",ml:"4px",children:"Enter a valid slippage percentage"})]}):null]}):null]}),c&&e.jsxs(f,{children:[e.jsx(f,{w:"100%",h:"1px",bg:"bg_secondary",m:"20px 0"}),e.jsx(l,{children:"Router"}),e.jsxs(i,{align:"center",justifyContent:"space-between",mt:"8px",children:[e.jsx(l,{color:"text_caption",children:"Support order split"}),e.jsx(Y,{ml:"4px",isChecked:m,onChange:t=>C(t.target.checked)})]})]}),e.jsxs(i,{align:"center",justifyContent:"space-between",mt:"20px",children:[e.jsx(y,{w:"48%",h:"48px",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(y,{w:"48%",h:"48px",onClick:p,isDisabled:Number(s)>50||Number(s)<.05,children:"Confirm"})]})]})]})]})}function Z(r,o){const a=h.useRef(),c=h.useCallback((...x)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{r(...x)},o)},[r,o]);return h.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),c}export{Q as S,P as T,X as a,Z as u};
