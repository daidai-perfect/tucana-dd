import{r as Pe,p as N}from"./vite-plugin-node-polyfills-2b3IylRN.js";import{s as ot}from"./safe-buffer-B7h8REzA.js";import{c as le}from"./@improbable-eng-BU3rlaSz.js";import{e as Ye}from"./events-BYvclee5.js";import{u as Ke}from"./util-mxsps8Rg.js";import{i as Q}from"./inherits-BlmhoU4v.js";import{b as lt}from"./util-deprecate-DPVjTvyT.js";import{s as Ce}from"./string_decoder-0MzJkBYb.js";var Ae={exports:{}},ze=Ye.EventEmitter,Re,Ie;function ut(){if(Ie)return Re;Ie=1;function r(_,y){var h=Object.keys(_);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(_);y&&(p=p.filter(function(T){return Object.getOwnPropertyDescriptor(_,T).enumerable})),h.push.apply(h,p)}return h}function i(_){for(var y=1;y<arguments.length;y++){var h=arguments[y]!=null?arguments[y]:{};y%2?r(Object(h),!0).forEach(function(p){f(_,p,h[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(h)):r(Object(h)).forEach(function(p){Object.defineProperty(_,p,Object.getOwnPropertyDescriptor(h,p))})}return _}function f(_,y,h){return y=w(y),y in _?Object.defineProperty(_,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):_[y]=h,_}function d(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function u(_,y){for(var h=0;h<y.length;h++){var p=y[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,w(p.key),p)}}function g(_,y,h){return y&&u(_.prototype,y),Object.defineProperty(_,"prototype",{writable:!1}),_}function w(_){var y=P(_,"string");return typeof y=="symbol"?y:String(y)}function P(_,y){if(typeof _!="object"||_===null)return _;var h=_[Symbol.toPrimitive];if(h!==void 0){var p=h.call(_,y||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(_)}var c=Pe(),m=c.Buffer,C=Ke,D=C.inspect,B=D&&D.custom||"inspect";function W(_,y,h){m.prototype.copy.call(_,y,h)}return Re=function(){function _(){d(this,_),this.head=null,this.tail=null,this.length=0}return g(_,[{key:"push",value:function(h){var p={data:h,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}},{key:"unshift",value:function(h){var p={data:h,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}},{key:"shift",value:function(){if(this.length!==0){var h=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,h}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(h){if(this.length===0)return"";for(var p=this.head,T=""+p.data;p=p.next;)T+=h+p.data;return T}},{key:"concat",value:function(h){if(this.length===0)return m.alloc(0);for(var p=m.allocUnsafe(h>>>0),T=this.head,R=0;T;)W(T.data,p,R),R+=T.data.length,T=T.next;return p}},{key:"consume",value:function(h,p){var T;return h<this.head.data.length?(T=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):h===this.head.data.length?T=this.shift():T=p?this._getString(h):this._getBuffer(h),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var p=this.head,T=1,R=p.data;for(h-=R.length;p=p.next;){var b=p.data,E=h>b.length?b.length:h;if(E===b.length?R+=b:R+=b.slice(0,h),h-=E,h===0){E===b.length?(++T,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=b.slice(E));break}++T}return this.length-=T,R}},{key:"_getBuffer",value:function(h){var p=m.allocUnsafe(h),T=this.head,R=1;for(T.data.copy(p),h-=T.data.length;T=T.next;){var b=T.data,E=h>b.length?b.length:h;if(b.copy(p,p.length-h,0,E),h-=E,h===0){E===b.length?(++R,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=b.slice(E));break}++R}return this.length-=R,p}},{key:B,value:function(h,p){return D(this,i(i({},p),{},{depth:0,customInspect:!1}))}}]),_}(),Re}function st(r,i){var f=this,d=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return d||u?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,N.nextTick(Le,this,r)):N.nextTick(Le,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(g){!i&&g?f._writableState?f._writableState.errorEmitted?N.nextTick(oe,f):(f._writableState.errorEmitted=!0,N.nextTick(je,f,g)):N.nextTick(je,f,g):i?(N.nextTick(oe,f),i(g)):N.nextTick(oe,f)}),this)}function je(r,i){Le(r,i),oe(r)}function oe(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function dt(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Le(r,i){r.emit("error",i)}function ht(r,i){var f=r._readableState,d=r._writableState;f&&f.autoDestroy||d&&d.autoDestroy?r.destroy(i):r.emit("error",i)}var Xe={destroy:st,undestroy:dt,errorOrDestroy:ht},V={};function ct(r,i){r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i}var Je={};function q(r,i,f){f||(f=Error);function d(g,w,P){return typeof i=="string"?i:i(g,w,P)}var u=function(g){ct(w,g);function w(P,c,m){return g.call(this,d(P,c,m))||this}return w}(f);u.prototype.name=f.name,u.prototype.code=r,Je[r]=u}function Be(r,i){if(Array.isArray(r)){var f=r.length;return r=r.map(function(d){return String(d)}),f>2?"one of ".concat(i," ").concat(r.slice(0,f-1).join(", "),", or ")+r[f-1]:f===2?"one of ".concat(i," ").concat(r[0]," or ").concat(r[1]):"of ".concat(i," ").concat(r[0])}else return"of ".concat(i," ").concat(String(r))}function pt(r,i,f){return r.substr(0,i.length)===i}function bt(r,i,f){return(f===void 0||f>r.length)&&(f=r.length),r.substring(f-i.length,f)===i}function _t(r,i,f){return typeof f!="number"&&(f=0),f+i.length>r.length?!1:r.indexOf(i,f)!==-1}q("ERR_INVALID_OPT_VALUE",function(r,i){return'The value "'+i+'" is invalid for option "'+r+'"'},TypeError);q("ERR_INVALID_ARG_TYPE",function(r,i,f){var d;typeof i=="string"&&pt(i,"not ")?(d="must not be",i=i.replace(/^not /,"")):d="must be";var u;if(bt(r," argument"))u="The ".concat(r," ").concat(d," ").concat(Be(i,"type"));else{var g=_t(r,".")?"property":"argument";u='The "'.concat(r,'" ').concat(g," ").concat(d," ").concat(Be(i,"type"))}return u+=". Received type ".concat(typeof f),u},TypeError);q("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");q("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});q("ERR_STREAM_PREMATURE_CLOSE","Premature close");q("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});q("ERR_MULTIPLE_CALLBACK","Callback called multiple times");q("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");q("ERR_STREAM_WRITE_AFTER_END","write after end");q("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);q("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);q("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");V.codes=Je;var gt=V.codes.ERR_INVALID_OPT_VALUE;function yt(r,i,f){return r.highWaterMark!=null?r.highWaterMark:i?r[f]:null}function vt(r,i,f,d){var u=yt(i,d,f);if(u!=null){if(!(isFinite(u)&&Math.floor(u)===u)||u<0){var g=d?f:"highWaterMark";throw new gt(g,u)}return Math.floor(u)}return r.objectMode?16:16*1024}var Qe={getHighWaterMark:vt},Ee,We;function Ze(){if(We)return Ee;We=1,Ee=L;function r(a){var n=this;this.next=null,this.entry=null,this.finish=function(){ge(n,a)}}var i;L.WritableState=M;var f={deprecate:lt},d=ze,u=Pe().Buffer,g=(typeof le<"u"?le:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function w(a){return u.from(a)}function P(a){return u.isBuffer(a)||a instanceof g}var c=Xe,m=Qe,C=m.getHighWaterMark,D=V.codes,B=D.ERR_INVALID_ARG_TYPE,W=D.ERR_METHOD_NOT_IMPLEMENTED,_=D.ERR_MULTIPLE_CALLBACK,y=D.ERR_STREAM_CANNOT_PIPE,h=D.ERR_STREAM_DESTROYED,p=D.ERR_STREAM_NULL_VALUES,T=D.ERR_STREAM_WRITE_AFTER_END,R=D.ERR_UNKNOWN_ENCODING,b=c.errorOrDestroy;Q(L,d);function E(){}function M(a,n,l){i=i||J(),a=a||{},typeof l!="boolean"&&(l=n instanceof i),this.objectMode=!!a.objectMode,l&&(this.objectMode=this.objectMode||!!a.writableObjectMode),this.highWaterMark=C(this,a,"writableHighWaterMark",l),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var v=a.decodeStrings===!1;this.decodeStrings=!v,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){pe(n,A)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=a.emitClose!==!1,this.autoDestroy=!!a.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var n=this.bufferedRequest,l=[];n;)l.push(n),n=n.next;return l},function(){try{Object.defineProperty(M.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var j;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(L,Symbol.hasInstance,{value:function(n){return j.call(this,n)?!0:this!==L?!1:n&&n._writableState instanceof M}})):j=function(n){return n instanceof this};function L(a){i=i||J();var n=this instanceof i;if(!n&&!j.call(L,this))return new L(a);this._writableState=new M(a,this,n),this.writable=!0,a&&(typeof a.write=="function"&&(this._write=a.write),typeof a.writev=="function"&&(this._writev=a.writev),typeof a.destroy=="function"&&(this._destroy=a.destroy),typeof a.final=="function"&&(this._final=a.final)),d.call(this)}L.prototype.pipe=function(){b(this,new y)};function S(a,n){var l=new T;b(a,l),N.nextTick(n,l)}function x(a,n,l,v){var A;return l===null?A=new p:typeof l!="string"&&!n.objectMode&&(A=new B("chunk",["string","Buffer"],l)),A?(b(a,A),N.nextTick(v,A),!1):!0}L.prototype.write=function(a,n,l){var v=this._writableState,A=!1,e=!v.objectMode&&P(a);return e&&!u.isBuffer(a)&&(a=w(a)),typeof n=="function"&&(l=n,n=null),e?n="buffer":n||(n=v.defaultEncoding),typeof l!="function"&&(l=E),v.ending?S(this,l):(e||x(this,v,a,l))&&(v.pendingcb++,A=he(this,v,e,a,n,l)),A},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.bufferProcessing&&a.bufferedRequest&&Y(this,a))},L.prototype.setDefaultEncoding=function(n){if(typeof n=="string"&&(n=n.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((n+"").toLowerCase())>-1))throw new R(n);return this._writableState.defaultEncoding=n,this},Object.defineProperty(L.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Z(a,n,l){return!a.objectMode&&a.decodeStrings!==!1&&typeof n=="string"&&(n=u.from(n,l)),n}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function he(a,n,l,v,A,e){if(!l){var t=Z(n,v,A);v!==t&&(l=!0,A="buffer",v=t)}var o=n.objectMode?1:v.length;n.length+=o;var s=n.length<n.highWaterMark;if(s||(n.needDrain=!0),n.writing||n.corked){var I=n.lastBufferedRequest;n.lastBufferedRequest={chunk:v,encoding:A,isBuf:l,callback:e,next:null},I?I.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else $(a,n,!1,o,v,A,e);return s}function $(a,n,l,v,A,e,t){n.writelen=v,n.writecb=t,n.writing=!0,n.sync=!0,n.destroyed?n.onwrite(new h("write")):l?a._writev(A,n.onwrite):a._write(A,e,n.onwrite),n.sync=!1}function ce(a,n,l,v,A){--n.pendingcb,l?(N.nextTick(A,v),N.nextTick(G,a,n),a._writableState.errorEmitted=!0,b(a,v)):(A(v),a._writableState.errorEmitted=!0,b(a,v),G(a,n))}function re(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function pe(a,n){var l=a._writableState,v=l.sync,A=l.writecb;if(typeof A!="function")throw new _;if(re(l),n)ce(a,l,v,n,A);else{var e=ne(l)||a.destroyed;!e&&!l.corked&&!l.bufferProcessing&&l.bufferedRequest&&Y(a,l),v?N.nextTick(H,a,l,e,A):H(a,l,e,A)}}function H(a,n,l,v){l||ie(a,n),n.pendingcb--,v(),G(a,n)}function ie(a,n){n.length===0&&n.needDrain&&(n.needDrain=!1,a.emit("drain"))}function Y(a,n){n.bufferProcessing=!0;var l=n.bufferedRequest;if(a._writev&&l&&l.next){var v=n.bufferedRequestCount,A=new Array(v),e=n.corkedRequestsFree;e.entry=l;for(var t=0,o=!0;l;)A[t]=l,l.isBuf||(o=!1),l=l.next,t+=1;A.allBuffers=o,$(a,n,!0,n.length,A,"",e.finish),n.pendingcb++,n.lastBufferedRequest=null,e.next?(n.corkedRequestsFree=e.next,e.next=null):n.corkedRequestsFree=new r(n),n.bufferedRequestCount=0}else{for(;l;){var s=l.chunk,I=l.encoding,O=l.callback,k=n.objectMode?1:s.length;if($(a,n,!1,k,s,I,O),l=l.next,n.bufferedRequestCount--,n.writing)break}l===null&&(n.lastBufferedRequest=null)}n.bufferedRequest=l,n.bufferProcessing=!1}L.prototype._write=function(a,n,l){l(new W("_write()"))},L.prototype._writev=null,L.prototype.end=function(a,n,l){var v=this._writableState;return typeof a=="function"?(l=a,a=null,n=null):typeof n=="function"&&(l=n,n=null),a!=null&&this.write(a,n),v.corked&&(v.corked=1,this.uncork()),v.ending||_e(this,v,l),this},Object.defineProperty(L.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ne(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function be(a,n){a._final(function(l){n.pendingcb--,l&&b(a,l),n.prefinished=!0,a.emit("prefinish"),G(a,n)})}function ae(a,n){!n.prefinished&&!n.finalCalled&&(typeof a._final=="function"&&!n.destroyed?(n.pendingcb++,n.finalCalled=!0,N.nextTick(be,a,n)):(n.prefinished=!0,a.emit("prefinish")))}function G(a,n){var l=ne(n);if(l&&(ae(a,n),n.pendingcb===0&&(n.finished=!0,a.emit("finish"),n.autoDestroy))){var v=a._readableState;(!v||v.autoDestroy&&v.endEmitted)&&a.destroy()}return l}function _e(a,n,l){n.ending=!0,G(a,n),l&&(n.finished?N.nextTick(l):a.once("finish",l)),n.ended=!0,a.writable=!1}function ge(a,n,l){var v=a.entry;for(a.entry=null;v;){var A=v.callback;n.pendingcb--,A(l),v=v.next}n.corkedRequestsFree.next=a}return Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(n){this._writableState&&(this._writableState.destroyed=n)}}),L.prototype.destroy=c.destroy,L.prototype._undestroy=c.undestroy,L.prototype._destroy=function(a,n){n(a)},Ee}var Se,qe;function J(){if(qe)return Se;qe=1;var r=Object.keys||function(m){var C=[];for(var D in m)C.push(D);return C};Se=w;var i=tt(),f=Ze();Q(w,i);for(var d=r(f.prototype),u=0;u<d.length;u++){var g=d[u];w.prototype[g]||(w.prototype[g]=f.prototype[g])}function w(m){if(!(this instanceof w))return new w(m);i.call(this,m),f.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",P)))}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function P(){this._writableState.ended||N.nextTick(c,this)}function c(m){m.end()}return Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(C){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=C,this._writableState.destroyed=C)}}),Se}var xe=V.codes.ERR_STREAM_PREMATURE_CLOSE;function wt(r){var i=!1;return function(){if(!i){i=!0;for(var f=arguments.length,d=new Array(f),u=0;u<f;u++)d[u]=arguments[u];r.apply(this,d)}}}function Rt(){}function Et(r){return r.setHeader&&typeof r.abort=="function"}function et(r,i,f){if(typeof i=="function")return et(r,null,i);i||(i={}),f=wt(f||Rt);var d=i.readable||i.readable!==!1&&r.readable,u=i.writable||i.writable!==!1&&r.writable,g=function(){r.writable||P()},w=r._writableState&&r._writableState.finished,P=function(){u=!1,w=!0,d||f.call(r)},c=r._readableState&&r._readableState.endEmitted,m=function(){d=!1,c=!0,u||f.call(r)},C=function(_){f.call(r,_)},D=function(){var _;if(d&&!c)return(!r._readableState||!r._readableState.ended)&&(_=new xe),f.call(r,_);if(u&&!w)return(!r._writableState||!r._writableState.ended)&&(_=new xe),f.call(r,_)},B=function(){r.req.on("finish",P)};return Et(r)?(r.on("complete",P),r.on("abort",D),r.req?B():r.on("request",B)):u&&!r._writableState&&(r.on("end",g),r.on("close",g)),r.on("end",m),r.on("finish",P),i.error!==!1&&r.on("error",C),r.on("close",D),function(){r.removeListener("complete",P),r.removeListener("abort",D),r.removeListener("request",B),r.req&&r.req.removeListener("finish",P),r.removeListener("end",g),r.removeListener("close",g),r.removeListener("finish",P),r.removeListener("end",m),r.removeListener("error",C),r.removeListener("close",D)}}var De=et,me,Ue;function St(){if(Ue)return me;Ue=1;var r;function i(R,b,E){return b=f(b),b in R?Object.defineProperty(R,b,{value:E,enumerable:!0,configurable:!0,writable:!0}):R[b]=E,R}function f(R){var b=d(R,"string");return typeof b=="symbol"?b:String(b)}function d(R,b){if(typeof R!="object"||R===null)return R;var E=R[Symbol.toPrimitive];if(E!==void 0){var M=E.call(R,b||"default");if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(R)}var u=De,g=Symbol("lastResolve"),w=Symbol("lastReject"),P=Symbol("error"),c=Symbol("ended"),m=Symbol("lastPromise"),C=Symbol("handlePromise"),D=Symbol("stream");function B(R,b){return{value:R,done:b}}function W(R){var b=R[g];if(b!==null){var E=R[D].read();E!==null&&(R[m]=null,R[g]=null,R[w]=null,b(B(E,!1)))}}function _(R){N.nextTick(W,R)}function y(R,b){return function(E,M){R.then(function(){if(b[c]){E(B(void 0,!0));return}b[C](E,M)},M)}}var h=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((r={get stream(){return this[D]},next:function(){var b=this,E=this[P];if(E!==null)return Promise.reject(E);if(this[c])return Promise.resolve(B(void 0,!0));if(this[D].destroyed)return new Promise(function(S,x){N.nextTick(function(){b[P]?x(b[P]):S(B(void 0,!0))})});var M=this[m],j;if(M)j=new Promise(y(M,this));else{var L=this[D].read();if(L!==null)return Promise.resolve(B(L,!1));j=new Promise(this[C])}return this[m]=j,j}},i(r,Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var b=this;return new Promise(function(E,M){b[D].destroy(null,function(j){if(j){M(j);return}E(B(void 0,!0))})})}),r),h),T=function(b){var E,M=Object.create(p,(E={},i(E,D,{value:b,writable:!0}),i(E,g,{value:null,writable:!0}),i(E,w,{value:null,writable:!0}),i(E,P,{value:null,writable:!0}),i(E,c,{value:b._readableState.endEmitted,writable:!0}),i(E,C,{value:function(L,S){var x=M[D].read();x?(M[m]=null,M[g]=null,M[w]=null,L(B(x,!1))):(M[g]=L,M[w]=S)},writable:!0}),E));return M[m]=null,u(b,function(j){if(j&&j.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=M[w];L!==null&&(M[m]=null,M[g]=null,M[w]=null,L(j)),M[P]=j;return}var S=M[g];S!==null&&(M[m]=null,M[g]=null,M[w]=null,S(B(void 0,!0))),M[c]=!0}),b.on("readable",_.bind(null,M)),M};return me=T,me}var Te,Fe;function mt(){return Fe||(Fe=1,Te=function(){throw new Error("Readable.from is not available in the browser")}),Te}var Me,He;function tt(){if(He)return Me;He=1,Me=S;var r;S.ReadableState=L,Ye.EventEmitter;var i=function(t,o){return t.listeners(o).length},f=ze,d=Pe().Buffer,u=(typeof le<"u"?le:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function g(e){return d.from(e)}function w(e){return d.isBuffer(e)||e instanceof u}var P=Ke,c;P&&P.debuglog?c=P.debuglog("stream"):c=function(){};var m=ut(),C=Xe,D=Qe,B=D.getHighWaterMark,W=V.codes,_=W.ERR_INVALID_ARG_TYPE,y=W.ERR_STREAM_PUSH_AFTER_EOF,h=W.ERR_METHOD_NOT_IMPLEMENTED,p=W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,T,R,b;Q(S,f);var E=C.errorOrDestroy,M=["error","close","destroy","pause","resume"];function j(e,t,o){if(typeof e.prependListener=="function")return e.prependListener(t,o);!e._events||!e._events[t]?e.on(t,o):Array.isArray(e._events[t])?e._events[t].unshift(o):e._events[t]=[o,e._events[t]]}function L(e,t,o){r=r||J(),e=e||{},typeof o!="boolean"&&(o=t instanceof r),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=B(this,e,"readableHighWaterMark",o),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(T||(T=Ce.StringDecoder),this.decoder=new T(e.encoding),this.encoding=e.encoding)}function S(e){if(r=r||J(),!(this instanceof S))return new S(e);var t=this instanceof r;this._readableState=new L(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),f.call(this)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=C.destroy,S.prototype._undestroy=C.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var o=this._readableState,s;return o.objectMode?s=!0:typeof e=="string"&&(t=t||o.defaultEncoding,t!==o.encoding&&(e=d.from(e,t),t=""),s=!0),x(this,e,t,!1,s)},S.prototype.unshift=function(e){return x(this,e,null,!0,!1)};function x(e,t,o,s,I){c("readableAddChunk",t);var O=e._readableState;if(t===null)O.reading=!1,pe(e,O);else{var k;if(I||(k=he(O,t)),k)E(e,k);else if(O.objectMode||t&&t.length>0)if(typeof t!="string"&&!O.objectMode&&Object.getPrototypeOf(t)!==d.prototype&&(t=g(t)),s)O.endEmitted?E(e,new p):Z(e,O,t,!0);else if(O.ended)E(e,new y);else{if(O.destroyed)return!1;O.reading=!1,O.decoder&&!o?(t=O.decoder.write(t),O.objectMode||t.length!==0?Z(e,O,t,!1):Y(e,O)):Z(e,O,t,!1)}else s||(O.reading=!1,Y(e,O))}return!O.ended&&(O.length<O.highWaterMark||O.length===0)}function Z(e,t,o,s){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",o)):(t.length+=t.objectMode?1:o.length,s?t.buffer.unshift(o):t.buffer.push(o),t.needReadable&&H(e)),Y(e,t)}function he(e,t){var o;return!w(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(o=new _("chunk",["string","Buffer","Uint8Array"],t)),o}S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(e){T||(T=Ce.StringDecoder);var t=new T(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var o=this._readableState.buffer.head,s="";o!==null;)s+=t.write(o.data),o=o.next;return this._readableState.buffer.clear(),s!==""&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var $=1073741824;function ce(e){return e>=$?e=$:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function re(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=ce(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}S.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,o=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?l(this):H(this),null;if(e=re(e,t),e===0&&t.ended)return t.length===0&&l(this),null;var s=t.needReadable;c("need readable",s),(t.length===0||t.length-e<t.highWaterMark)&&(s=!0,c("length less than watermark",s)),t.ended||t.reading?(s=!1,c("reading or ended",s)):s&&(c("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=re(o,t)));var I;return e>0?I=n(e,t):I=null,I===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),o!==e&&t.ended&&l(this)),I!==null&&this.emit("data",I),I};function pe(e,t){if(c("onEofChunk"),!t.ended){if(t.decoder){var o=t.decoder.end();o&&o.length&&(t.buffer.push(o),t.length+=t.objectMode?1:o.length)}t.ended=!0,t.sync?H(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,ie(e)))}}function H(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,N.nextTick(ie,e))}function ie(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,a(e)}function Y(e,t){t.readingMore||(t.readingMore=!0,N.nextTick(ne,e,t))}function ne(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var o=t.length;if(c("maybeReadMore read 0"),e.read(0),o===t.length)break}t.readingMore=!1}S.prototype._read=function(e){E(this,new h("_read()"))},S.prototype.pipe=function(e,t){var o=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e);break}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var I=(!t||t.end!==!1)&&e!==N.stdout&&e!==N.stderr,O=I?K:ee;s.endEmitted?N.nextTick(O):o.once("end",O),e.on("unpipe",k);function k(z,X){c("onunpipe"),z===o&&X&&X.hasUnpiped===!1&&(X.hasUnpiped=!0,ft())}function K(){c("onend"),e.end()}var fe=be(o);e.on("drain",fe);var Ne=!1;function ft(){c("cleanup"),e.removeListener("close",ve),e.removeListener("finish",we),e.removeListener("drain",fe),e.removeListener("error",ye),e.removeListener("unpipe",k),o.removeListener("end",K),o.removeListener("end",ee),o.removeListener("data",ke),Ne=!0,s.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&fe()}o.on("data",ke);function ke(z){c("ondata");var X=e.write(z);c("dest.write",X),X===!1&&((s.pipesCount===1&&s.pipes===e||s.pipesCount>1&&A(s.pipes,e)!==-1)&&!Ne&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),o.pause())}function ye(z){c("onerror",z),ee(),e.removeListener("error",ye),i(e,"error")===0&&E(e,z)}j(e,"error",ye);function ve(){e.removeListener("finish",we),ee()}e.once("close",ve);function we(){c("onfinish"),e.removeListener("close",ve),ee()}e.once("finish",we);function ee(){c("unpipe"),o.unpipe(e)}return e.emit("pipe",o),s.flowing||(c("pipe resume"),o.resume()),e};function be(e){return function(){var o=e._readableState;c("pipeOnDrain",o.awaitDrain),o.awaitDrain&&o.awaitDrain--,o.awaitDrain===0&&i(e,"data")&&(o.flowing=!0,a(e))}}S.prototype.unpipe=function(e){var t=this._readableState,o={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,o),this);if(!e){var s=t.pipes,I=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var O=0;O<I;O++)s[O].emit("unpipe",this,{hasUnpiped:!1});return this}var k=A(t.pipes,e);return k===-1?this:(t.pipes.splice(k,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,o),this)},S.prototype.on=function(e,t){var o=f.prototype.on.call(this,e,t),s=this._readableState;return e==="data"?(s.readableListening=this.listenerCount("readable")>0,s.flowing!==!1&&this.resume()):e==="readable"&&!s.endEmitted&&!s.readableListening&&(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,c("on readable",s.length,s.reading),s.length?H(this):s.reading||N.nextTick(G,this)),o},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var o=f.prototype.removeListener.call(this,e,t);return e==="readable"&&N.nextTick(ae,this),o},S.prototype.removeAllListeners=function(e){var t=f.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&N.nextTick(ae,this),t};function ae(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function G(e){c("readable nexttick read 0"),e.read(0)}S.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,_e(this,e)),e.paused=!1,this};function _e(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N.nextTick(ge,e,t))}function ge(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),a(e),t.flowing&&!t.reading&&e.read(0)}S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function a(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&e.read()!==null;);}S.prototype.wrap=function(e){var t=this,o=this._readableState,s=!1;e.on("end",function(){if(c("wrapped end"),o.decoder&&!o.ended){var k=o.decoder.end();k&&k.length&&t.push(k)}t.push(null)}),e.on("data",function(k){if(c("wrapped data"),o.decoder&&(k=o.decoder.write(k)),!(o.objectMode&&k==null)&&!(!o.objectMode&&(!k||!k.length))){var K=t.push(k);K||(s=!0,e.pause())}});for(var I in e)this[I]===void 0&&typeof e[I]=="function"&&(this[I]=function(K){return function(){return e[K].apply(e,arguments)}}(I));for(var O=0;O<M.length;O++)e.on(M[O],this.emit.bind(this,M[O]));return this._read=function(k){c("wrapped _read",k),s&&(s=!1,e.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return R===void 0&&(R=St()),R(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),S._fromList=n,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function n(e,t){if(t.length===0)return null;var o;return t.objectMode?o=t.buffer.shift():!e||e>=t.length?(t.decoder?o=t.buffer.join(""):t.buffer.length===1?o=t.buffer.first():o=t.buffer.concat(t.length),t.buffer.clear()):o=t.buffer.consume(e,t.decoder),o}function l(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,N.nextTick(v,t,e))}function v(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var o=t._writableState;(!o||o.autoDestroy&&o.finished)&&t.destroy()}}typeof Symbol=="function"&&(S.from=function(e,t){return b===void 0&&(b=mt()),b(S,e,t)});function A(e,t){for(var o=0,s=e.length;o<s;o++)if(e[o]===t)return o;return-1}return Me}var rt=U,se=V.codes,Tt=se.ERR_METHOD_NOT_IMPLEMENTED,Mt=se.ERR_MULTIPLE_CALLBACK,Ot=se.ERR_TRANSFORM_ALREADY_TRANSFORMING,At=se.ERR_TRANSFORM_WITH_LENGTH_0,de=J();Q(U,de);function Lt(r,i){var f=this._transformState;f.transforming=!1;var d=f.writecb;if(d===null)return this.emit("error",new Mt);f.writechunk=null,f.writecb=null,i!=null&&this.push(i),d(r);var u=this._readableState;u.reading=!1,(u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}function U(r){if(!(this instanceof U))return new U(r);de.call(this,r),this._transformState={afterTransform:Lt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",Pt)}function Pt(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(i,f){Ge(r,i,f)}):Ge(this,null,null)}U.prototype.push=function(r,i){return this._transformState.needTransform=!1,de.prototype.push.call(this,r,i)};U.prototype._transform=function(r,i,f){f(new Tt("_transform()"))};U.prototype._write=function(r,i,f){var d=this._transformState;if(d.writecb=f,d.writechunk=r,d.writeencoding=i,!d.transforming){var u=this._readableState;(d.needTransform||u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}};U.prototype._read=function(r){var i=this._transformState;i.writechunk!==null&&!i.transforming?(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform)):i.needTransform=!0};U.prototype._destroy=function(r,i){de.prototype._destroy.call(this,r,function(f){i(f)})};function Ge(r,i,f){if(i)return r.emit("error",i);if(f!=null&&r.push(f),r._writableState.length)throw new At;if(r._transformState.transforming)throw new Ot;return r.push(null)}var Dt=te,it=rt;Q(te,it);function te(r){if(!(this instanceof te))return new te(r);it.call(this,r)}te.prototype._transform=function(r,i,f){f(null,r)};var Oe;function Nt(r){var i=!1;return function(){i||(i=!0,r.apply(void 0,arguments))}}var nt=V.codes,kt=nt.ERR_MISSING_ARGS,Ct=nt.ERR_STREAM_DESTROYED;function Ve(r){if(r)throw r}function It(r){return r.setHeader&&typeof r.abort=="function"}function jt(r,i,f,d){d=Nt(d);var u=!1;r.on("close",function(){u=!0}),Oe===void 0&&(Oe=De),Oe(r,{readable:i,writable:f},function(w){if(w)return d(w);u=!0,d()});var g=!1;return function(w){if(!u&&!g){if(g=!0,It(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();d(w||new Ct("pipe"))}}}function $e(r){r()}function Bt(r,i){return r.pipe(i)}function Wt(r){return!r.length||typeof r[r.length-1]!="function"?Ve:r.pop()}function qt(){for(var r=arguments.length,i=new Array(r),f=0;f<r;f++)i[f]=arguments[f];var d=Wt(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new kt("streams");var u,g=i.map(function(w,P){var c=P<i.length-1,m=P>0;return jt(w,c,m,function(C){u||(u=C),C&&g.forEach($e),!c&&(g.forEach($e),d(u))})});return i.reduce(Bt)}var xt=qt;(function(r,i){i=r.exports=tt(),i.Stream=i,i.Readable=i,i.Writable=Ze(),i.Duplex=J(),i.Transform=rt,i.PassThrough=Dt,i.finished=De,i.pipeline=xt})(Ae,Ae.exports);var Ut=Ae.exports,ue=ot.Buffer,at=Ut.Transform,Ft=Q;function Ht(r,i){if(!ue.isBuffer(r)&&typeof r!="string")throw new TypeError(i+" must be a string or a buffer")}function F(r){at.call(this),this._block=ue.allocUnsafe(r),this._blockSize=r,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Ft(F,at);F.prototype._transform=function(r,i,f){var d=null;try{this.update(r,i)}catch(u){d=u}f(d)};F.prototype._flush=function(r){var i=null;try{this.push(this.digest())}catch(f){i=f}r(i)};F.prototype.update=function(r,i){if(Ht(r,"Data"),this._finalized)throw new Error("Digest already called");ue.isBuffer(r)||(r=ue.from(r,i));for(var f=this._block,d=0;this._blockOffset+r.length-d>=this._blockSize;){for(var u=this._blockOffset;u<this._blockSize;)f[u++]=r[d++];this._update(),this._blockOffset=0}for(;d<r.length;)f[this._blockOffset++]=r[d++];for(var g=0,w=r.length*8;w>0;++g)this._length[g]+=w,w=this._length[g]/4294967296|0,w>0&&(this._length[g]-=4294967296*w);return this};F.prototype._update=function(){throw new Error("_update is not implemented")};F.prototype.digest=function(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var i=this._digest();r!==void 0&&(i=i.toString(r)),this._block.fill(0),this._blockOffset=0;for(var f=0;f<4;++f)this._length[f]=0;return i};F.prototype._digest=function(){throw new Error("_digest is not implemented")};var Qt=F;export{Qt as h};
