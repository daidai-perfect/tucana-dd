import{r as T,t as d,j as x,F as b,a3 as F,aj as V,q as E,ak as D,T as q,B as W,am as N,V as z,H as S,S as H,w as Y,E as B,aJ as p,i as A,a8 as U,av as _}from"./index-CZ9BtG6K.js";const G="/assets/icon_mining@2x-Ct_NWB26.png";function J(s,a){if(s==="--"||a==="--")return"--";const o=s?d(s):d(0),h=a?d(a):d(0);return D(o.add(h).toString(),2)}function Z(s){const{feeObj:a,rewardsObj:o,handleClaimClick:h,claimLoading:w,showFarming:f,isReverse:g}=s,C=J(a==null?void 0:a.total,o==null?void 0:o.total),[v,M]=T.useState(d(0)),[t,m]=T.useState(d(0)),u=T.useMemo(()=>{var l,i,c,L;let e=[];e.push({icon:(l=a==null?void 0:a.token0)==null?void 0:l.image,amount:(a==null?void 0:a.fee0)||"--",amountValue:(a==null?void 0:a.fee0Rate)||"--",symbol:(i=a==null?void 0:a.token0)==null?void 0:i.symbol}),e.push({icon:(c=a==null?void 0:a.token1)==null?void 0:c.image,amount:(a==null?void 0:a.fee1)||"--",amountValue:(a==null?void 0:a.fee1Rate)||"--",symbol:(L=a==null?void 0:a.token1)==null?void 0:L.symbol}),g&&(e=e.slice().reverse());try{M(d(a==null?void 0:a.fee0).add(a==null?void 0:a.fee1))}catch{M(d(0))}return e},[a]),n=T.useMemo(()=>{const e=[];o!=null&&o.rewards&&o.rewards.length>0&&o.rewards.forEach(i=>{var c,L;e.push({icon:(c=i.token)==null?void 0:c.image,amount:i.amount||"--",amountValue:i.amountRate||"--",symbol:(L=i.token)==null?void 0:L.symbol})});let l=d(0);return e.forEach(i=>{try{l=d(l).add(i.amount)}catch{}}),m(l),e},[o]),r=f&&n.length>0||!f&&d((o==null?void 0:o.total)||"0").gt(0);return x.jsxs(b,{align:"center",justifyContent:"flex-end",children:[f&&x.jsx(F,{src:G,w:"20px",h:"20px",mr:"8px"}),x.jsx(V,{label:x.jsxs(E,{gap:"16px",pb:"4px",minW:"240px",children:[x.jsx(R,{lable:"Fees",totoalValue:D(a==null?void 0:a.total,2),yieldItems:u}),r&&x.jsx(E,{h:"1px",bg:"border",mt:"15px",mb:"15px"}),r&&x.jsx(R,{lable:"Rewards",totoalValue:D(o==null?void 0:o.total,2),yieldItems:n})]}),"aria-label":"Yield",children:x.jsx("button",{children:x.jsx(q,{textDecoration:"underline dotted",color:"text_caption",children:C})})}),v.add(t).gt(0)&&x.jsx(W,{w:"58px",h:"26px",ml:"4px",bg:"transparent",fontSize:"xs",variant:"ghost",onClick:e=>{N(e),h()},children:"Claim"})]})}function R(s){const{lable:a,totoalValue:o,yieldItems:h}=s;return x.jsxs(z,{gap:"8px",children:[x.jsxs(S,{w:"100%",justifyContent:"space-between",children:[x.jsx(q,{fontSize:"xs",children:a}),x.jsx(q,{color:"text_highlight",fontSize:"xs",children:o})]}),h.map((w,f)=>x.jsx(K,{icon:w.icon,amount:w.amount,amountValue:w.amountValue,symbol:w.symbol},f))]})}function K(s){const{icon:a,amount:o,amountValue:h,symbol:w}=s;return x.jsxs(S,{w:"100%",minW:"160px",align:"center",justifyContent:"space-between",children:[x.jsxs(b,{align:"center",gap:"8px",children:[x.jsx(H,{w:"16px",h:"16px",imageUrl:a}),x.jsx(q,{fontSize:"xs",children:Y(o)}),x.jsx(q,{fontSize:"xs",children:w})]}),x.jsx(q,{fontSize:"xs",children:D(h,2)})]},w)}function $(s,a){const{poolList:o}=B(),h=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,L,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.LOWEST||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((L=s==null?void 0:s.metadata)==null?void 0:L.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.LOWEST}),[o,s,a]),w=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,L,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.LOW||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((L=s==null?void 0:s.metadata)==null?void 0:L.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.LOW}),[o,s,a]),f=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,L,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.MEDIUM||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((L=s==null?void 0:s.metadata)==null?void 0:L.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.MEDIUM}),[o,s,a]),g=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,L,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.HIGH||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((L=s==null?void 0:s.metadata)==null?void 0:L.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.HIGH}),[o,s,a]),C=T.useMemo(()=>{var e,l,i,c;const t=((e=h==null?void 0:h[0])==null?void 0:e.liquidity)||0,m=((l=w==null?void 0:w[0])==null?void 0:l.liquidity)||0,u=((i=f==null?void 0:f[0])==null?void 0:i.liquidity)||0,n=((c=g==null?void 0:g[0])==null?void 0:c.liquidity)||0,r=d(t).add(m).add(u).add(n);return[{id:p.LOWEST,value:(h==null?void 0:h.length)>0?r.eq(d(0))?"0":A(d(t).div(r).mul(100).toString(),2):"-1"},{id:p.LOW,value:(w==null?void 0:w.length)>0?r.eq(d(0))?"0":A(d(m).div(r).mul(100).toString(),2):"-1"},{id:p.MEDIUM,value:(f==null?void 0:f.length)>0?r.eq(d(0))?"0":A(d(u).div(r).mul(100).toString(),2):"-1"},{id:p.HIGH,value:(g==null?void 0:g.length)>0?r.eq(d(0))?"0":A(d(n).div(r).mul(100).toString(),2):"-1"}]},[h,w,f,g]),v=T.useMemo(()=>{const t={},m=[];let u=d(0);C.forEach(e=>{var i;u=d(e==null?void 0:e.value).gt(0)?u.plus(e==null?void 0:e.value):u;const l=(i=e==null?void 0:e.value)==null?void 0:i.split(".");m.push({value:e==null?void 0:e.value,int:l[0],decimal:l[1]||"0",fee:e==null?void 0:e.id})});let n=d(100).minus(u).toNumber();console.log("ðŸš€ ~ file: useFeeTierDistribution.ts:102 ~ feeTierDistribution ~ remaining:",n);const r=m.sort((e,l)=>Number(l.decimal)-Number(e.decimal));if(console.log("ðŸš€ ~ file: useFeeTierDistribution.ts:104 ~ feeTierDistribution ~ sortByDecimalPart:",r),n>=.01)for(let e=0;e<r.length&&n;e++)r[e].value!="-1"&&(r[e].value=d(r[e].value).plus(.01).toString(),n=d(n).minus(.01).toNumber());return C.forEach(e=>{var i;const l=(i=r.find(c=>e.id==c.fee))==null?void 0:i.value;t[e.id]=Number(l)}),t},[C]),M=T.useMemo(()=>{for(const t in v)if(v[t]!=0)return!1;return!0},[v]);return{feeTierDistribution:v,feeTierDistributionLoading:M}}var Q=(s=>(s.OnlyRewards="OnlyRewards",s.OfficialPools="OfficialPools",s.AllPools="AllPools",s))(Q||{});function j(s,a){const{poolList:o}=B(),{isImportToken:h}=U();return{filterPoolList:T.useMemo(()=>{const f=s.trim().toLowerCase();if(f.length===0&&a===void 0&&a==="AllPools")return o;const g=o.filter(C=>{const v=C.token0.symbol.toLowerCase(),M=C.token1.symbol.toLowerCase(),t=C.id.toLowerCase(),m=v.includes(f)||M.includes(f)||f.length>10&&t.includes(f);if(m)return m;const u=_(f);let n,r;return u.length>0&&(n=u[0]),u.length===2&&(r=u[1]),n&&r?v.includes(n)&&M.includes(r)||v.includes(r)&&M.includes(n):n?v.includes(n)||M.includes(n):!1});return a==="AllPools"?g:a==="OnlyRewards"?g.filter(C=>C.showFarming):a==="OfficialPools"?g.filter(C=>!h(C.token0.metadata)&&!h(C.token1.metadata)):g},[o,s,a])}}export{Z as P,K as T,Q as a,j as b,$ as u};
