import{r as T,j as f}from"./react-CxzTU07i.js";import{d,$ as D,c as F,S as W,K as V,m as N,q as b,a6 as y,E as A,a2 as z}from"./App-Cb960mne.js";import{F as S,I as H,a2 as Y,f as E,T as q,B as U,V as _,H as B}from"./@chakra-ui-F3U2dpjw.js";import"./bn.js-CjHYPH1W.js";import"./numbro-DbF9-lIv.js";import{u as G}from"./useApiUrl-BWcjgV84.js";const K="/assets/icon_mining@2x-Ct_NWB26.png";function $(s,a){if(s==="--"||a==="--")return"--";const o=s?d(s):d(0),h=a?d(a):d(0);return D(o.add(h).toString(),2)}function ea(s){const{feeObj:a,rewardsObj:o,handleClaimClick:h,claimLoading:L,showFarming:x,isReverse:w}=s,C=$(a==null?void 0:a.total,o==null?void 0:o.total),[v,M]=T.useState(d(0)),[t,m]=T.useState(d(0)),u=T.useMemo(()=>{var l,n,c,g;let e=[];e.push({icon:(l=a==null?void 0:a.token0)==null?void 0:l.image,amount:(a==null?void 0:a.fee0)||"--",amountValue:(a==null?void 0:a.fee0Rate)||"--",symbol:(n=a==null?void 0:a.token0)==null?void 0:n.symbol}),e.push({icon:(c=a==null?void 0:a.token1)==null?void 0:c.image,amount:(a==null?void 0:a.fee1)||"--",amountValue:(a==null?void 0:a.fee1Rate)||"--",symbol:(g=a==null?void 0:a.token1)==null?void 0:g.symbol}),w&&(e=e.slice().reverse());try{M(d(a==null?void 0:a.fee0).add(a==null?void 0:a.fee1))}catch{M(d(0))}return e},[a]),i=T.useMemo(()=>{const e=[];o!=null&&o.rewards&&o.rewards.length>0&&o.rewards.forEach(n=>{var c,g;e.push({icon:(c=n.token)==null?void 0:c.image,amount:n.amount||"--",amountValue:n.amountRate||"--",symbol:(g=n.token)==null?void 0:g.symbol})});let l=d(0);return e.forEach(n=>{try{l=d(l).add(n.amount)}catch{}}),m(l),e},[o]),r=x&&i.length>0||!x&&d((o==null?void 0:o.total)||"0").gt(0);return f.jsxs(S,{align:"center",justifyContent:"flex-end",children:[x&&f.jsx(H,{src:K,w:"20px",h:"20px",mr:"8px"}),f.jsx(Y,{label:f.jsxs(E,{gap:"16px",pb:"4px",minW:"240px",children:[f.jsx(R,{lable:"Fees",totoalValue:D(a==null?void 0:a.total,2),yieldItems:u}),r&&f.jsx(E,{h:"1px",bg:"border",mt:"15px",mb:"15px"}),r&&f.jsx(R,{lable:"Rewards",totoalValue:D(o==null?void 0:o.total,2),yieldItems:i})]}),"aria-label":"Yield",children:f.jsx("button",{children:f.jsx(q,{textDecoration:"underline dotted",color:"text_caption",children:C})})}),v.add(t).gt(0)&&f.jsx(U,{w:"58px",h:"26px",ml:"4px",bg:"transparent",fontSize:"xs",variant:"ghost",onClick:e=>{F(e),h()},children:"Claim"})]})}function R(s){const{lable:a,totoalValue:o,yieldItems:h}=s;return f.jsxs(_,{gap:"8px",children:[f.jsxs(B,{w:"100%",justifyContent:"space-between",children:[f.jsx(q,{fontSize:"xs",children:a}),f.jsx(q,{color:"text_highlight",fontSize:"xs",children:o})]}),h.map((L,x)=>f.jsx(J,{icon:L.icon,amount:L.amount,amountValue:L.amountValue,symbol:L.symbol},x))]})}function J(s){const{icon:a,amount:o,amountValue:h,symbol:L}=s;return f.jsxs(B,{w:"100%",minW:"160px",align:"center",justifyContent:"space-between",children:[f.jsxs(S,{align:"center",gap:"8px",children:[f.jsx(W,{w:"16px",h:"16px",imageUrl:a}),f.jsx(q,{fontSize:"xs",children:V(o)}),f.jsx(N,{fontSize:"xs",children:L})]}),f.jsx(q,{fontSize:"xs",children:D(h,2)})]},L)}function sa(s,a){const{poolList:o}=b(),h=T.useMemo(()=>o.filter(t=>{var m,u,i,r,e,l,n,c,g,p,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((i=s==null?void 0:s.metadata)==null?void 0:i.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===y.LOWEST||((c=(n=t.token1)==null?void 0:n.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(p=t.token0)==null?void 0:p.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===y.LOWEST}),[o,s,a]),L=T.useMemo(()=>o.filter(t=>{var m,u,i,r,e,l,n,c,g,p,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((i=s==null?void 0:s.metadata)==null?void 0:i.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===y.LOW||((c=(n=t.token1)==null?void 0:n.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(p=t.token0)==null?void 0:p.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===y.LOW}),[o,s,a]),x=T.useMemo(()=>o.filter(t=>{var m,u,i,r,e,l,n,c,g,p,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((i=s==null?void 0:s.metadata)==null?void 0:i.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===y.MEDIUM||((c=(n=t.token1)==null?void 0:n.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(p=t.token0)==null?void 0:p.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===y.MEDIUM}),[o,s,a]),w=T.useMemo(()=>o.filter(t=>{var m,u,i,r,e,l,n,c,g,p,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((i=s==null?void 0:s.metadata)==null?void 0:i.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===y.HIGH||((c=(n=t.token1)==null?void 0:n.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(p=t.token0)==null?void 0:p.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===y.HIGH}),[o,s,a]),C=T.useMemo(()=>{var e,l,n,c;const t=((e=h==null?void 0:h[0])==null?void 0:e.liquidity)||0,m=((l=L==null?void 0:L[0])==null?void 0:l.liquidity)||0,u=((n=x==null?void 0:x[0])==null?void 0:n.liquidity)||0,i=((c=w==null?void 0:w[0])==null?void 0:c.liquidity)||0,r=d(t).add(m).add(u).add(i);return[{id:y.LOWEST,value:(h==null?void 0:h.length)>0?r.eq(d(0))?"0":A(d(t).div(r).mul(100).toString(),2):"-1"},{id:y.LOW,value:(L==null?void 0:L.length)>0?r.eq(d(0))?"0":A(d(m).div(r).mul(100).toString(),2):"-1"},{id:y.MEDIUM,value:(x==null?void 0:x.length)>0?r.eq(d(0))?"0":A(d(u).div(r).mul(100).toString(),2):"-1"},{id:y.HIGH,value:(w==null?void 0:w.length)>0?r.eq(d(0))?"0":A(d(i).div(r).mul(100).toString(),2):"-1"}]},[h,L,x,w]),v=T.useMemo(()=>{const t={},m=[];let u=d(0);C.forEach(e=>{var n;u=d(e==null?void 0:e.value).gt(0)?u.plus(e==null?void 0:e.value):u;const l=(n=e==null?void 0:e.value)==null?void 0:n.split(".");m.push({value:e==null?void 0:e.value,int:l[0],decimal:l[1]||"0",fee:e==null?void 0:e.id})});let i=d(100).minus(u).toNumber();console.log("ðŸš€ ~ file: useFeeTierDistribution.ts:102 ~ feeTierDistribution ~ remaining:",i);const r=m.sort((e,l)=>Number(l.decimal)-Number(e.decimal));if(console.log("ðŸš€ ~ file: useFeeTierDistribution.ts:104 ~ feeTierDistribution ~ sortByDecimalPart:",r),i>=.01)for(let e=0;e<r.length&&i;e++)r[e].value!="-1"&&(r[e].value=d(r[e].value).plus(.01).toString(),i=d(i).minus(.01).toNumber());return C.forEach(e=>{var n;const l=(n=r.find(c=>e.id==c.fee))==null?void 0:n.value;t[e.id]=Number(l)}),t},[C]),M=T.useMemo(()=>{for(const t in v)if(v[t]!=0)return!1;return!0},[v]);return{feeTierDistribution:v,feeTierDistributionLoading:M}}var Q=(s=>(s.OnlyRewards="OnlyRewards",s.OfficialPools="OfficialPools",s.AllPools="AllPools",s))(Q||{});function ta(s,a){const{poolList:o}=b(),{isImportToken:h}=G();return{filterPoolList:T.useMemo(()=>{const x=s.trim().toLowerCase();if(x.length===0&&a===void 0&&a==="AllPools")return o;const w=o.filter(C=>{const v=C.token0.symbol.toLowerCase(),M=C.token1.symbol.toLowerCase(),t=C.id.toLowerCase(),m=v.includes(x)||M.includes(x)||x.length>10&&t.includes(x);if(m)return m;const u=z(x);let i,r;return u.length>0&&(i=u[0]),u.length===2&&(r=u[1]),i&&r?v.includes(i)&&M.includes(r)||v.includes(r)&&M.includes(i):i?v.includes(i)||M.includes(i):!1});return a==="AllPools"?w:a==="OnlyRewards"?w.filter(C=>C.showFarming):a==="OfficialPools"?w.filter(C=>!h(C.token0.metadata)&&!h(C.token1.metadata)):w},[o,s,a])}}export{ea as P,J as T,Q as a,ta as b,sa as u};
