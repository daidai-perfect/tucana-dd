import{aQ as R,r as h,af as z,j as e,k as N,l as A,F as i,T as o,i as B,B as I,a5 as T,v as b,aB as M,a8 as _,ay as E,c7 as H,$ as O,M as $,a as V,b as F,c as W,d as D,e as G,t as f,E as L,az as P,bO as Y,I as y,bP as Q,c8 as U}from"./index-BAe5U5I_.js";function q(S){const{amount:x,balance:l,title:p,noMax:d,noArrow:g,currentCoin:n,textIsAvailable:s,onTokenChange:c,onAmountChange:u,isLoading:m}=S,{getCointAmountValue:C}=R(),j=h.useMemo(()=>C(x,n==null?void 0:n.metadata),[x]),{isImportToken:k}=z(),v=r=>{c&&c(r)},t=r=>{const a=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(n==null?void 0:n.decimals)&&(n==null?void 0:n.decimals)}})?).*$`),w=r.target.value.replace(a,"$1");u(w||"")};return e.jsx(N,{width:"100%",p:"12px 16px",backgroundColor:"input_bg",border:"1px solid",borderColor:"border",children:e.jsx(A,{children:e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",gap:"4px",direction:"column",children:[e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o,{fontSize:"xs",children:p||""}),e.jsxs(i,{align:"center",children:[e.jsxs(o,{fontSize:"xs",children:[s?"Available":"Balance",": ",B(l)]}),d?null:e.jsx(I,{variant:"outline",w:"38px",h:"20px",lineHeight:"20px",borderRadius:"4px",fontSize:"xs",ml:"8px",onClick:()=>{var a;console.log("Click Max balance: ",l),console.log("Click Max currentCoin: ",n),console.log("Click Max currentConfig: ",T);const r=(n==null?void 0:n.metadata)===((a=T)==null?void 0:a.nativeToken)&&!s?b(l).minus(.5).toString():l;u(r&&b(r).gt(0)?r:"0")},children:"MAX"})]})]}),e.jsxs(i,{align:"center",width:"100%",position:"relative",children:[e.jsx(M,{placeholder:"0.0",value:x,onChange:t,w:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",opacity:m?0:1}),m&&e.jsx(i,{w:"100%",justifyContent:"flex-start",position:"absolute",children:e.jsx(_,{w:"120px",h:"21px"})}),e.jsx(i,{gap:"8px",alignItems:"center",children:g?e.jsx(H,{symbol:n==null?void 0:n.symbol,icon:n==null?void 0:n.image,haveArrow:!g,showTag:k(n==null?void 0:n.metadata),showTagWidth:"16px",showTagHeight:"16px"}):e.jsx(E,{h:"32px",current:n,onChange:v,noArrow:g,showTagWidth:"16px",showTagHeight:"16px"})})]}),e.jsxs(i,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[m?e.jsx(_,{w:"80px",h:"21px"}):e.jsx(o,{fontSize:"xs",children:j&&`$${j}`}),e.jsx(o,{fontSize:"xs",children:n==null?void 0:n.name})]})]})})})}function J(S){const{isOpen:x,onClose:l,showRouter:p=!1}=S,{slippage:d,setSlippage:g}=O(),n=["0.1","0.5","1"],[s,c]=h.useState(""),[u,m]=h.useState(!0);h.useEffect(()=>{console.log("showRouter: ",p)},[p]),h.useEffect(()=>{const t=Number(localStorage.getItem("tucana-slippage"))*100||b(d).mul(100).toString();c(String(t))},[x]);const C=t=>{const a=t.target.value.replace(/[^\d^.]+/g,""),w=a&&a[a.length-1]!="."&&a.length>3&&(a!=null&&a.includes("."))?U(a,2):a;c(w)},j=t=>{c(t)};h.useEffect(()=>{d&&c(String(d))},[d]);const k=t=>{m(t)},v=()=>{if(s){const t=b(s).div(100).toNumber();g(t),localStorage.setItem("tucana-slippage",String(t))}l()};return e.jsxs($,{isOpen:x,onClose:l,isCentered:!0,children:[e.jsx(V,{}),e.jsxs(F,{children:[e.jsx(W,{fontWeight:"400 !important",children:"Settings"}),e.jsx(D,{}),e.jsxs(G,{pb:"16px",children:[e.jsxs(f,{children:[e.jsx(o,{children:"Slippage Tolerance"}),e.jsxs(i,{align:"center",w:"100%",justifyContent:"space-between",mt:"8px",children:[e.jsx(i,{justifyContent:"center",alignItems:"center",p:"4px",sx:{"@media screen and (max-width: 810px)":{w:"70%"}},children:n.map(t=>e.jsx(L,{cursor:"pointer",w:"80px",h:"40px",bg:t===String(s)?"primary":"bg_secondary",mr:"8px",borderRadius:"8px",onClick:()=>j(t),sx:{"@media screen and (max-width: 810px)":{w:"33%"}},children:e.jsxs(o,{color:t===String(s)?"highlight_content_text":"text_paragraph",children:[t,"%"]})},t))}),e.jsxs(P,{alignItems:"center",justifyContent:"center",sx:{"@media screen and (max-width: 810px)":{w:"30%"}},children:[e.jsx(M,{borderRadius:"8px",w:"132px",h:"40px",mr:"2px",variant:"outline",value:s,onChange:C,textAlign:"right",fontSize:"sm",pr:"52px",pl:"32px",placeholder:"0.5",sx:{"@media screen and (max-width: 810px)":{w:"100%",pr:"28px",pl:"12px"}}}),e.jsx(Y,{width:"20px",height:"20px",right:"34px",top:"0px",sx:{"@media screen and (max-width: 810px)":{right:"12px"}},children:e.jsx(o,{fontSize:"sm",color:"text_caption",children:"%"})})]})]}),s&&(Number(s)>1||Number(s)<.05)?e.jsxs(f,{w:"100%",h:"20px",borderRadius:"20px",mt:"8px",children:[Number(s)<.05?e.jsxs(i,{align:"center",children:[e.jsx(y,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"warning"}),e.jsx(o,{fontSize:"xs",color:"warning",ml:"4px",children:"Slippage is low. Your transaction may fail."})]}):null,Number(s)<=50&&Number(s)>1?e.jsxs(i,{align:"center",children:[e.jsx(y,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"warning"}),e.jsx(o,{fontSize:"xs",color:"warning",ml:"4px",children:"Your transaction may be frontrun."})]}):null,Number(s)>50?e.jsxs(i,{align:"center",children:[e.jsx(y,{xlinkHref:"#icon-a-icon_tips_triangle",variant:"error"}),e.jsx(o,{fontSize:"xs",color:"error",ml:"4px",children:"Enter a valid slippage percentage"})]}):null]}):null]}),p&&e.jsxs(f,{children:[e.jsx(f,{w:"100%",h:"1px",bg:"bg_secondary",m:"20px 0"}),e.jsx(o,{children:"Router"}),e.jsxs(i,{align:"center",justifyContent:"space-between",mt:"8px",children:[e.jsx(o,{color:"text_caption",children:"Support order split"}),e.jsx(Q,{ml:"4px",isChecked:u,onChange:t=>k(t.target.checked)})]})]}),e.jsxs(i,{align:"center",justifyContent:"space-between",mt:"20px",children:[e.jsx(I,{w:"48%",h:"48px",variant:"outline",onClick:l,children:"Cancel"}),e.jsx(I,{w:"48%",h:"48px",onClick:v,isDisabled:Number(s)>50||Number(s)<.05,children:"Confirm"})]})]})]})]})}export{J as S,q as T};
