import{r as T,v as d,j as f,F as b,aa as F,aq as V,t as R,ar as D,T as M,B as W,at as N,V as z,H as S,S as H,A as Y,O as B,aU as p,i as q,af as U,aC as _}from"./index-BAe5U5I_.js";const G="/assets/icon_mining@2x-Ct_NWB26.png";function J(s,a){if(s==="--"||a==="--")return"--";const o=s?d(s):d(0),h=a?d(a):d(0);return D(o.add(h).toString(),2)}function Z(s){const{feeObj:a,rewardsObj:o,handleClaimClick:h,claimLoading:L,showFarming:x,isReverse:w}=s,C=J(a==null?void 0:a.total,o==null?void 0:o.total),[v,A]=T.useState(d(0)),[t,m]=T.useState(d(0)),u=T.useMemo(()=>{var l,i,c,g;let e=[];e.push({icon:(l=a==null?void 0:a.token0)==null?void 0:l.image,amount:(a==null?void 0:a.fee0)||"--",amountValue:(a==null?void 0:a.fee0Rate)||"--",symbol:(i=a==null?void 0:a.token0)==null?void 0:i.symbol}),e.push({icon:(c=a==null?void 0:a.token1)==null?void 0:c.image,amount:(a==null?void 0:a.fee1)||"--",amountValue:(a==null?void 0:a.fee1Rate)||"--",symbol:(g=a==null?void 0:a.token1)==null?void 0:g.symbol}),w&&(e=e.slice().reverse());try{A(d(a==null?void 0:a.fee0).add(a==null?void 0:a.fee1))}catch{A(d(0))}return e},[a]),n=T.useMemo(()=>{const e=[];o!=null&&o.rewards&&o.rewards.length>0&&o.rewards.forEach(i=>{var c,g;e.push({icon:(c=i.token)==null?void 0:c.image,amount:i.amount||"--",amountValue:i.amountRate||"--",symbol:(g=i.token)==null?void 0:g.symbol})});let l=d(0);return e.forEach(i=>{try{l=d(l).add(i.amount)}catch{}}),m(l),e},[o]),r=x&&n.length>0||!x&&d((o==null?void 0:o.total)||"0").gt(0);return f.jsxs(b,{align:"center",justifyContent:"flex-end",children:[x&&f.jsx(F,{src:G,w:"20px",h:"20px",mr:"8px"}),f.jsx(V,{label:f.jsxs(R,{gap:"16px",pb:"4px",minW:"240px",children:[f.jsx(E,{lable:"Fees",totoalValue:D(a==null?void 0:a.total,2),yieldItems:u}),r&&f.jsx(R,{h:"1px",bg:"border",mt:"15px",mb:"15px"}),r&&f.jsx(E,{lable:"Rewards",totoalValue:D(o==null?void 0:o.total,2),yieldItems:n})]}),"aria-label":"Yield",children:f.jsx("button",{children:f.jsx(M,{textDecoration:"underline dotted",color:"text_caption",children:C})})}),v.add(t).gt(0)&&f.jsx(W,{w:"58px",h:"26px",ml:"4px",bg:"transparent",fontSize:"xs",variant:"ghost",onClick:e=>{N(e),h()},children:"Claim"})]})}function E(s){const{lable:a,totoalValue:o,yieldItems:h}=s;return f.jsxs(z,{gap:"8px",children:[f.jsxs(S,{w:"100%",justifyContent:"space-between",children:[f.jsx(M,{fontSize:"xs",children:a}),f.jsx(M,{color:"text_highlight",fontSize:"xs",children:o})]}),h.map((L,x)=>f.jsx(K,{icon:L.icon,amount:L.amount,amountValue:L.amountValue,symbol:L.symbol},x))]})}function K(s){const{icon:a,amount:o,amountValue:h,symbol:L}=s;return f.jsxs(S,{w:"100%",minW:"160px",align:"center",justifyContent:"space-between",children:[f.jsxs(b,{align:"center",gap:"8px",children:[f.jsx(H,{w:"16px",h:"16px",imageUrl:a}),f.jsx(M,{fontSize:"xs",children:Y(o)}),f.jsx(M,{fontSize:"xs",children:L})]}),f.jsx(M,{fontSize:"xs",children:D(h,2)})]},L)}function $(s,a){const{poolList:o}=B(),h=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,g,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.LOWEST||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.LOWEST}),[o,s,a]),L=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,g,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.LOW||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.LOW}),[o,s,a]),x=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,g,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.MEDIUM||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.MEDIUM}),[o,s,a]),w=T.useMemo(()=>o.filter(t=>{var m,u,n,r,e,l,i,c,g,y,I,P;return((u=(m=t.token0)==null?void 0:m.metadata)==null?void 0:u.toLowerCase())===((n=s==null?void 0:s.metadata)==null?void 0:n.toLowerCase())&&((e=(r=t.token1)==null?void 0:r.metadata)==null?void 0:e.toLowerCase())===((l=a==null?void 0:a.metadata)==null?void 0:l.toLowerCase())&&t.feeTier===p.HIGH||((c=(i=t.token1)==null?void 0:i.metadata)==null?void 0:c.toLowerCase())===((g=s==null?void 0:s.metadata)==null?void 0:g.toLowerCase())&&((I=(y=t.token0)==null?void 0:y.metadata)==null?void 0:I.toLowerCase())===((P=a==null?void 0:a.metadata)==null?void 0:P.toLowerCase())&&t.feeTier===p.HIGH}),[o,s,a]),C=T.useMemo(()=>{var e,l,i,c;const t=((e=h==null?void 0:h[0])==null?void 0:e.liquidity)||0,m=((l=L==null?void 0:L[0])==null?void 0:l.liquidity)||0,u=((i=x==null?void 0:x[0])==null?void 0:i.liquidity)||0,n=((c=w==null?void 0:w[0])==null?void 0:c.liquidity)||0,r=d(t).add(m).add(u).add(n);return[{id:p.LOWEST,value:(h==null?void 0:h.length)>0?r.eq(d(0))?"0":q(d(t).div(r).mul(100).toString(),2):"-1"},{id:p.LOW,value:(L==null?void 0:L.length)>0?r.eq(d(0))?"0":q(d(m).div(r).mul(100).toString(),2):"-1"},{id:p.MEDIUM,value:(x==null?void 0:x.length)>0?r.eq(d(0))?"0":q(d(u).div(r).mul(100).toString(),2):"-1"},{id:p.HIGH,value:(w==null?void 0:w.length)>0?r.eq(d(0))?"0":q(d(n).div(r).mul(100).toString(),2):"-1"}]},[h,L,x,w]),v=T.useMemo(()=>{const t={},m=[];let u=d(0);C.forEach(e=>{var i;u=d(e==null?void 0:e.value).gt(0)?u.plus(e==null?void 0:e.value):u;const l=(i=e==null?void 0:e.value)==null?void 0:i.split(".");m.push({value:e==null?void 0:e.value,int:l[0],decimal:l[1]||"0",fee:e==null?void 0:e.id})});let n=d(100).minus(u).toNumber();console.log("ðŸš€ ~ file: useFeeTierDistribution.ts:102 ~ feeTierDistribution ~ remaining:",n);const r=m.sort((e,l)=>Number(l.decimal)-Number(e.decimal));if(console.log("ðŸš€ ~ file: useFeeTierDistribution.ts:104 ~ feeTierDistribution ~ sortByDecimalPart:",r),n>=.01)for(let e=0;e<r.length&&n;e++)r[e].value!="-1"&&(r[e].value=d(r[e].value).plus(.01).toString(),n=d(n).minus(.01).toNumber());return C.forEach(e=>{var i;const l=(i=r.find(c=>e.id==c.fee))==null?void 0:i.value;t[e.id]=Number(l)}),t},[C]),A=T.useMemo(()=>{for(const t in v)if(v[t]!=0)return!1;return!0},[v]);return{feeTierDistribution:v,feeTierDistributionLoading:A}}var Q=(s=>(s.OnlyRewards="OnlyRewards",s.OfficialPools="OfficialPools",s.AllPools="AllPools",s))(Q||{});function j(s,a){const{poolList:o}=B(),{isImportToken:h}=U();return{filterPoolList:T.useMemo(()=>{const x=s.trim().toLowerCase();if(x.length===0&&a===void 0&&a==="AllPools")return o;const w=o.filter(C=>{const v=C.token0.symbol.toLowerCase(),A=C.token1.symbol.toLowerCase(),t=C.id.toLowerCase(),m=v.includes(x)||A.includes(x)||x.length>10&&t.includes(x);if(m)return m;const u=_(x);let n,r;return u.length>0&&(n=u[0]),u.length===2&&(r=u[1]),n&&r?v.includes(n)&&A.includes(r)||v.includes(r)&&A.includes(n):n?v.includes(n)||A.includes(n):!1});return a==="AllPools"?w:a==="OnlyRewards"?w.filter(C=>C.showFarming):a==="OfficialPools"?w.filter(C=>!h(C.token0.metadata)&&!h(C.token1.metadata)):w},[o,s,a])}}export{Z as P,K as T,Q as a,j as b,$ as u};
